  [1m[36mActiveRecord::SchemaMigration Pluck (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.5ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (12.1ms)[0m  [1m[35mDROP DATABASE IF EXISTS "card_game_backend_development"[0m
  [1m[35m (11.8ms)[0m  [1m[35mDROP DATABASE IF EXISTS "card_game_backend_test"[0m
  [1m[35m (74.9ms)[0m  [1m[35mCREATE DATABASE "card_game_backend_development" ENCODING = 'unicode'[0m
  [1m[35m (23.3ms)[0m  [1m[35mCREATE DATABASE "card_game_backend_test" ENCODING = 'unicode'[0m
  [1m[35m (2.9ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[35m (2.1ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT pg_try_advisory_lock(3379173675217033995)[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to CreatePlayers (20220519232111)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (2.1ms)[0m  [1m[35mCREATE TABLE "players" ("id" uuid DEFAULT gen_random_uuid() NOT NULL PRIMARY KEY, "name" character varying, "lastname" character varying, "password" character varying, "nickname" character varying, "token" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20220519232111"]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateBoards (20220522162722)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (2.3ms)[0m  [1m[35mCREATE TABLE "boards" ("id" uuid DEFAULT gen_random_uuid() NOT NULL PRIMARY KEY, "player_1_id" bigint, "player_2_id" bigint, "board_name" character varying, "turn" integer DEFAULT 0, "winner" integer, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE INDEX "index_boards_on_player_1_id" ON "boards" ("player_1_id")[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE INDEX "index_boards_on_player_2_id" ON "boards" ("player_2_id")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20220522162722"]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.2ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "environment"], ["value", "development"], ["created_at", "2023-10-13 15:22:16.875876"], ["updated_at", "2023-10-13 15:22:16.875876"]]
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_advisory_unlock(3379173675217033995)[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (12.0ms)[0m  [1m[35mDROP DATABASE IF EXISTS "card_game_backend_development"[0m
  [1m[35m (12.8ms)[0m  [1m[35mDROP DATABASE IF EXISTS "card_game_backend_test"[0m
  [1m[35m (20.7ms)[0m  [1m[35mCREATE DATABASE "card_game_backend_development" ENCODING = 'unicode'[0m
  [1m[35m (20.2ms)[0m  [1m[35mCREATE DATABASE "card_game_backend_test" ENCODING = 'unicode'[0m
  [1m[35m (3.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[35m (2.5ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT pg_try_advisory_lock(3379173675217033995)[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to CreatePlayers (20220519232111)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (2.8ms)[0m  [1m[35mCREATE TABLE "players" ("id" uuid DEFAULT gen_random_uuid() NOT NULL PRIMARY KEY, "name" character varying, "lastname" character varying, "password" character varying, "nickname" character varying, "email" character varying, "token" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20220519232111"]]
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateBoards (20220522162722)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (3.2ms)[0m  [1m[35mCREATE TABLE "boards" ("id" uuid DEFAULT gen_random_uuid() NOT NULL PRIMARY KEY, "player_1_id" bigint, "player_2_id" bigint, "board_name" character varying, "turn" integer DEFAULT 0, "winner" integer, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (1.4ms)[0m  [1m[35mCREATE INDEX "index_boards_on_player_1_id" ON "boards" ("player_1_id")[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE INDEX "index_boards_on_player_2_id" ON "boards" ("player_2_id")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20220522162722"]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.3ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "environment"], ["value", "development"], ["created_at", "2023-10-13 15:33:08.643166"], ["updated_at", "2023-10-13 15:33:08.643166"]]
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_advisory_unlock(3379173675217033995)[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Started POST "/players" for ::1 at 2023-10-13 12:33:28 -0300
  [1m[36mActiveRecord::SchemaMigration Pluck (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by PlayersController#create as */*
  Parameters: {"player"=>{"email"=>"lucasdavidmiranda8@hotmail.com", "password"=>"[FILTERED]", "name"=>"lucas", "last_name"=>"miranda", "nickname"=>"enkinaurio"}}
[31mUnpermitted parameter: :last_name. Context: { controller: PlayersController, action: create, request: #<ActionDispatch::Request:0x00007fcf656d8d50>, params: {"player"=>{"email"=>"lucasdavidmiranda8@hotmail.com", "password"=>"[FILTERED]", "name"=>"lucas", "last_name"=>"miranda", "nickname"=>"enkinaurio"}, "controller"=>"players", "action"=>"create"} }[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/players_controller.rb:31:in `create'
  [1m[36mPlayer Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "players" WHERE "players"."nickname" = $1 LIMIT $2[0m  [["nickname", "enkinaurio"], ["LIMIT", 1]]
  ↳ app/controllers/players_controller.rb:31:in `create'
  [1m[36mPlayer Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "players" WHERE "players"."email" = $1 LIMIT $2[0m  [["email", "lucasdavidmiranda8@hotmail.com"], ["LIMIT", 1]]
  ↳ app/controllers/players_controller.rb:31:in `create'
  [1m[36mPlayer Create (0.3ms)[0m  [1m[32mINSERT INTO "players" ("name", "lastname", "password", "nickname", "email", "token", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["name", "lucas"], ["lastname", nil], ["password", "123456#"], ["nickname", "enkinaurio"], ["email", "lucasdavidmiranda8@hotmail.com"], ["token", "47e44e46-5b25-4c63-a28b-e917bec4b00b"], ["created_at", "2023-10-13 15:33:28.999830"], ["updated_at", "2023-10-13 15:33:28.999830"]]
  ↳ app/controllers/players_controller.rb:31:in `create'
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/players_controller.rb:31:in `create'
Completed 200 OK in 13ms (Views: 0.2ms | ActiveRecord: 4.3ms | Allocations: 13111)


Started POST "/players" for ::1 at 2023-10-13 12:34:49 -0300
  [1m[36mActiveRecord::SchemaMigration Pluck (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by PlayersController#create as */*
  Parameters: {"player"=>{"email"=>"lucasdavidmiranda8@hotmail.com", "password"=>"[FILTERED]", "name"=>"lucas", "lastname"=>"miranda", "nickname"=>"enkinaurio"}}
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/players_controller.rb:31:in `create'
  [1m[36mPlayer Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "players" WHERE "players"."nickname" = $1 LIMIT $2[0m  [["nickname", "enkinaurio"], ["LIMIT", 1]]
  ↳ app/controllers/players_controller.rb:31:in `create'
  [1m[36mPlayer Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "players" WHERE "players"."email" = $1 LIMIT $2[0m  [["email", "lucasdavidmiranda8@hotmail.com"], ["LIMIT", 1]]
  ↳ app/controllers/players_controller.rb:31:in `create'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  ↳ app/controllers/players_controller.rb:31:in `create'
Completed 422 Unprocessable Entity in 6ms (Views: 0.1ms | ActiveRecord: 2.4ms | Allocations: 6002)


Started POST "/players" for ::1 at 2023-10-13 12:35:58 -0300
Processing by PlayersController#create as */*
  Parameters: {"player"=>{"email"=>"lucasdavidmiranda8@hotmail.com", "password"=>"[FILTERED]", "name"=>"lucas", "lastname"=>"miranda", "nickname"=>"enkinaurio"}}
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/players_controller.rb:31:in `create'
  [1m[36mPlayer Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "players" WHERE "players"."nickname" = $1 LIMIT $2[0m  [["nickname", "enkinaurio"], ["LIMIT", 1]]
  ↳ app/controllers/players_controller.rb:31:in `create'
  [1m[36mPlayer Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "players" WHERE "players"."email" = $1 LIMIT $2[0m  [["email", "lucasdavidmiranda8@hotmail.com"], ["LIMIT", 1]]
  ↳ app/controllers/players_controller.rb:31:in `create'
  [1m[36mPlayer Create (0.2ms)[0m  [1m[32mINSERT INTO "players" ("name", "lastname", "password", "nickname", "email", "token", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["name", "lucas"], ["lastname", "miranda"], ["password", "123456#"], ["nickname", "enkinaurio"], ["email", "lucasdavidmiranda8@hotmail.com"], ["token", "c610e949-87a7-4e9c-a8e4-37ce2c8b1dcb"], ["created_at", "2023-10-13 15:35:58.809416"], ["updated_at", "2023-10-13 15:35:58.809416"]]
  ↳ app/controllers/players_controller.rb:31:in `create'
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/players_controller.rb:31:in `create'
Completed 200 OK in 5ms (Views: 0.2ms | ActiveRecord: 1.3ms | Allocations: 3921)


Started POST "/players/login" for ::1 at 2023-10-13 12:42:49 -0300
  
ActionController::RoutingError (No route matches [POST] "/players/login"):
  
Started POST "/players/login" for ::1 at 2023-10-13 12:44:14 -0300
Processing by PlayersController#login as */*
  Parameters: {"player"=>{"email"=>"lucasdavidmiranda8@hotmail.com", "password"=>"[FILTERED]"}}
  [1m[36mPlayer Load (0.1ms)[0m  [1m[34mSELECT "players".* FROM "players" WHERE "players"."email" IS NULL AND "players"."password" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  ↳ app/controllers/players_controller.rb:21:in `login'
  [1m[36mPlayer Load (0.1ms)[0m  [1m[34mSELECT "players".* FROM "players" WHERE "players"."nickname" IS NULL AND "players"."password" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  ↳ app/controllers/players_controller.rb:22:in `login'
Completed 500 Internal Server Error in 11ms (ActiveRecord: 2.9ms | Allocations: 5085)


  
NoMethodError (undefined method `errors' for nil:NilClass):
  
app/controllers/players_controller.rb:27:in `login'
Started POST "/players/login" for ::1 at 2023-10-13 12:47:36 -0300
Processing by PlayersController#login as */*
  Parameters: {"player"=>{"email"=>"lucasdavidmiranda8@hotmail.com", "password"=>"[FILTERED]"}}
  [1m[36mPlayer Load (0.1ms)[0m  [1m[34mSELECT "players".* FROM "players" WHERE "players"."email" = $1 AND "players"."password" = $2 LIMIT $3[0m  [["email", "lucasdavidmiranda8@hotmail.com"], ["password", "123456#"], ["LIMIT", 1]]
  ↳ app/controllers/players_controller.rb:21:in `login'
Completed 200 OK in 5ms (Views: 0.2ms | ActiveRecord: 2.4ms | Allocations: 3668)


Started POST "/players/login" for ::1 at 2023-10-13 12:51:16 -0300
Processing by PlayersController#login as */*
  Parameters: {"player"=>{"email"=>"lucasdavidmiranda8@hotmail.com", "password"=>"[FILTERED]"}}
  [1m[36mPlayer Load (0.1ms)[0m  [1m[34mSELECT "players".* FROM "players" WHERE "players"."email" = $1 AND "players"."password" = $2 LIMIT $3[0m  [["email", "lucasdavidmiranda8@hotmail.com"], ["password", "123456#"], ["LIMIT", 1]]
  ↳ app/controllers/players_controller.rb:21:in `login'
Completed 500 Internal Server Error in 4ms (ActiveRecord: 1.5ms | Allocations: 3357)


  
NameError (undefined local variable or method `token' for #<PlayersController:0x0000000001ba80>):
  
app/controllers/players_controller.rb:25:in `login'
Started POST "/players/login" for ::1 at 2023-10-13 12:51:23 -0300
Processing by PlayersController#login as */*
  Parameters: {"player"=>{"email"=>"lucasdavidmiranda8@hotmail.com", "password"=>"[FILTERED]"}}
  [1m[36mPlayer Load (0.2ms)[0m  [1m[34mSELECT "players".* FROM "players" WHERE "players"."email" = $1 AND "players"."password" = $2 LIMIT $3[0m  [["email", "lucasdavidmiranda8@hotmail.com"], ["password", "123456#"], ["LIMIT", 1]]
  ↳ app/controllers/players_controller.rb:21:in `login'
Completed 500 Internal Server Error in 1ms (ActiveRecord: 0.2ms | Allocations: 632)


  
NameError (undefined local variable or method `token' for #<PlayersController:0x0000000001bb20>):
  
app/controllers/players_controller.rb:25:in `login'
Started POST "/players/login" for ::1 at 2023-10-13 12:52:17 -0300
Processing by PlayersController#login as */*
  Parameters: {"player"=>{"email"=>"lucasdavidmiranda8@hotmail.com", "password"=>"[FILTERED]"}}
  [1m[36mPlayer Load (0.1ms)[0m  [1m[34mSELECT "players".* FROM "players" WHERE "players"."email" = $1 AND "players"."password" = $2 LIMIT $3[0m  [["email", "lucasdavidmiranda8@hotmail.com"], ["password", "123456#"], ["LIMIT", 1]]
  ↳ app/controllers/players_controller.rb:21:in `login'
Completed 500 Internal Server Error in 8ms (ActiveRecord: 1.6ms | Allocations: 6515)


  
ActionView::MissingTemplate (Missing template players/login, application/login with {:locale=>[:en], :formats=>[:html, :text, :js, :css, :ics, :csv, :vcf, :vtt, :png, :jpeg, :gif, :bmp, :tiff, :svg, :mpeg, :mp3, :ogg, :m4a, :webm, :mp4, :otf, :ttf, :woff, :woff2, :xml, :rss, :atom, :yaml, :multipart_form, :url_encoded_form, :json, :pdf, :zip, :gzip], :variants=>[], :handlers=>[:raw, :erb, :html, :builder, :ruby]}.

Searched in:
  * "/home/lucasm/JuegoCartas/CardGameRuby/app/views"
  * "/home/lucasm/.rvm/gems/ruby-3.2.0/gems/actiontext-7.0.8/app/views"
  * "/home/lucasm/.rvm/gems/ruby-3.2.0/gems/actionmailbox-7.0.8/app/views"
):
  
app/controllers/players_controller.rb:25:in `login'
Started POST "/players/login" for ::1 at 2023-10-13 12:53:03 -0300
Processing by PlayersController#login as */*
  Parameters: {"player"=>{"email"=>"lucasdavidmiranda8@hotmail.com", "password"=>"[FILTERED]"}}
  [1m[36mPlayer Load (0.2ms)[0m  [1m[34mSELECT "players".* FROM "players" WHERE "players"."email" = $1 AND "players"."password" = $2 LIMIT $3[0m  [["email", "lucasdavidmiranda8@hotmail.com"], ["password", "123456#"], ["LIMIT", 1]]
  ↳ app/controllers/players_controller.rb:21:in `login'
Completed 500 Internal Server Error in 6ms (ActiveRecord: 2.2ms | Allocations: 3409)


  
NameError (undefined local variable or method `player' for #<PlayersController:0x00000000023258>):
  
app/controllers/players_controller.rb:24:in `login'
Started POST "/players/login" for ::1 at 2023-10-13 12:53:21 -0300
Processing by PlayersController#login as */*
  Parameters: {"player"=>{"email"=>"lucasdavidmiranda8@hotmail.com", "password"=>"[FILTERED]"}}
  [1m[36mPlayer Load (0.2ms)[0m  [1m[34mSELECT "players".* FROM "players" WHERE "players"."email" = $1 AND "players"."password" = $2 LIMIT $3[0m  [["email", "lucasdavidmiranda8@hotmail.com"], ["password", "123456#"], ["LIMIT", 1]]
  ↳ app/controllers/players_controller.rb:21:in `login'
Completed 500 Internal Server Error in 5ms (ActiveRecord: 2.1ms | Allocations: 3413)


  
NameError (undefined local variable or method `player' for #<PlayersController:0x00000000026e58>):
  
app/controllers/players_controller.rb:24:in `login'
Started POST "/players/login" for ::1 at 2023-10-13 12:53:32 -0300
Processing by PlayersController#login as */*
  Parameters: {"player"=>{"email"=>"lucasdavidmiranda8@hotmail.com", "password"=>"[FILTERED]"}}
  [1m[36mPlayer Load (0.1ms)[0m  [1m[34mSELECT "players".* FROM "players" WHERE "players"."email" = $1 AND "players"."password" = $2 LIMIT $3[0m  [["email", "lucasdavidmiranda8@hotmail.com"], ["password", "123456#"], ["LIMIT", 1]]
  ↳ app/controllers/players_controller.rb:21:in `login'
Completed 500 Internal Server Error in 6ms (ActiveRecord: 1.5ms | Allocations: 3781)


  
ActionView::MissingTemplate (Missing template players/login, application/login with {:locale=>[:en], :formats=>[:html, :text, :js, :css, :ics, :csv, :vcf, :vtt, :png, :jpeg, :gif, :bmp, :tiff, :svg, :mpeg, :mp3, :ogg, :m4a, :webm, :mp4, :otf, :ttf, :woff, :woff2, :xml, :rss, :atom, :yaml, :multipart_form, :url_encoded_form, :json, :pdf, :zip, :gzip], :variants=>[], :handlers=>[:raw, :erb, :html, :builder, :ruby]}.

Searched in:
  * "/home/lucasm/JuegoCartas/CardGameRuby/app/views"
  * "/home/lucasm/.rvm/gems/ruby-3.2.0/gems/actiontext-7.0.8/app/views"
  * "/home/lucasm/.rvm/gems/ruby-3.2.0/gems/actionmailbox-7.0.8/app/views"
):
  
app/controllers/players_controller.rb:25:in `login'
Started POST "/players/login" for ::1 at 2023-10-13 12:55:02 -0300
Processing by PlayersController#login as */*
  Parameters: {"player"=>{"email"=>"lucasdavidmiranda8@hotmail.com", "password"=>"[FILTERED]"}}
  [1m[36mPlayer Load (0.1ms)[0m  [1m[34mSELECT "players".* FROM "players" WHERE "players"."email" = $1 AND "players"."password" = $2 LIMIT $3[0m  [["email", "lucasdavidmiranda8@hotmail.com"], ["password", "123456#"], ["LIMIT", 1]]
  ↳ app/controllers/players_controller.rb:21:in `login'
Completed 500 Internal Server Error in 4ms (ActiveRecord: 1.6ms | Allocations: 3780)


  
ActionView::MissingTemplate (Missing template players/login, application/login with {:locale=>[:en], :formats=>[:html, :text, :js, :css, :ics, :csv, :vcf, :vtt, :png, :jpeg, :gif, :bmp, :tiff, :svg, :mpeg, :mp3, :ogg, :m4a, :webm, :mp4, :otf, :ttf, :woff, :woff2, :xml, :rss, :atom, :yaml, :multipart_form, :url_encoded_form, :json, :pdf, :zip, :gzip], :variants=>[], :handlers=>[:raw, :erb, :html, :builder, :ruby]}.

Searched in:
  * "/home/lucasm/JuegoCartas/CardGameRuby/app/views"
  * "/home/lucasm/.rvm/gems/ruby-3.2.0/gems/actiontext-7.0.8/app/views"
  * "/home/lucasm/.rvm/gems/ruby-3.2.0/gems/actionmailbox-7.0.8/app/views"
):
  
app/controllers/players_controller.rb:26:in `login'
Started POST "/players/login" for ::1 at 2023-10-13 12:56:00 -0300
Processing by PlayersController#login as */*
  Parameters: {"player"=>{"email"=>"lucasdavidmiranda8@hotmail.com", "password"=>"[FILTERED]"}}
  [1m[36mPlayer Load (0.1ms)[0m  [1m[34mSELECT "players".* FROM "players" WHERE "players"."email" = $1 AND "players"."password" = $2 LIMIT $3[0m  [["email", "lucasdavidmiranda8@hotmail.com"], ["password", "123456#"], ["LIMIT", 1]]
  ↳ app/controllers/players_controller.rb:21:in `login'
Completed 500 Internal Server Error in 7ms (ActiveRecord: 2.4ms | Allocations: 3784)


  
ActionView::MissingTemplate (Missing template players/login, application/login with {:locale=>[:en], :formats=>[:html, :text, :js, :css, :ics, :csv, :vcf, :vtt, :png, :jpeg, :gif, :bmp, :tiff, :svg, :mpeg, :mp3, :ogg, :m4a, :webm, :mp4, :otf, :ttf, :woff, :woff2, :xml, :rss, :atom, :yaml, :multipart_form, :url_encoded_form, :json, :pdf, :zip, :gzip], :variants=>[], :handlers=>[:raw, :erb, :html, :builder, :ruby]}.

Searched in:
  * "/home/lucasm/JuegoCartas/CardGameRuby/app/views"
  * "/home/lucasm/.rvm/gems/ruby-3.2.0/gems/actiontext-7.0.8/app/views"
  * "/home/lucasm/.rvm/gems/ruby-3.2.0/gems/actionmailbox-7.0.8/app/views"
):
  
app/controllers/players_controller.rb:27:in `login'
Started POST "/players/login" for ::1 at 2023-10-13 12:56:33 -0300
Processing by PlayersController#login as */*
  Parameters: {"player"=>{"email"=>"lucasdavidmiranda8@hotmail.com", "password"=>"[FILTERED]"}}
  [1m[36mPlayer Load (0.1ms)[0m  [1m[34mSELECT "players".* FROM "players" WHERE "players"."email" = $1 AND "players"."password" = $2 LIMIT $3[0m  [["email", "lucasdavidmiranda8@hotmail.com"], ["password", "123456#"], ["LIMIT", 1]]
  ↳ app/controllers/players_controller.rb:21:in `login'
Completed 500 Internal Server Error in 4ms (ActiveRecord: 1.6ms | Allocations: 3783)


  
ActionView::MissingTemplate (Missing template players/login, application/login with {:locale=>[:en], :formats=>[:html, :text, :js, :css, :ics, :csv, :vcf, :vtt, :png, :jpeg, :gif, :bmp, :tiff, :svg, :mpeg, :mp3, :ogg, :m4a, :webm, :mp4, :otf, :ttf, :woff, :woff2, :xml, :rss, :atom, :yaml, :multipart_form, :url_encoded_form, :json, :pdf, :zip, :gzip], :variants=>[], :handlers=>[:raw, :erb, :html, :builder, :ruby]}.

Searched in:
  * "/home/lucasm/JuegoCartas/CardGameRuby/app/views"
  * "/home/lucasm/.rvm/gems/ruby-3.2.0/gems/actiontext-7.0.8/app/views"
  * "/home/lucasm/.rvm/gems/ruby-3.2.0/gems/actionmailbox-7.0.8/app/views"
):
  
app/controllers/players_controller.rb:27:in `login'
Started POST "/players/login" for ::1 at 2023-10-13 12:56:48 -0300
Processing by PlayersController#login as */*
  Parameters: {"player"=>{"email"=>"lucasdavidmiranda8@hotmail.com", "password"=>"[FILTERED]"}}
  [1m[36mPlayer Load (0.1ms)[0m  [1m[34mSELECT "players".* FROM "players" WHERE "players"."email" = $1 AND "players"."password" = $2 LIMIT $3[0m  [["email", "lucasdavidmiranda8@hotmail.com"], ["password", "123456#"], ["LIMIT", 1]]
  ↳ app/controllers/players_controller.rb:21:in `login'
Completed 500 Internal Server Error in 5ms (ActiveRecord: 2.1ms | Allocations: 3783)


  
ActionView::MissingTemplate (Missing template players/login, application/login with {:locale=>[:en], :formats=>[:html, :text, :js, :css, :ics, :csv, :vcf, :vtt, :png, :jpeg, :gif, :bmp, :tiff, :svg, :mpeg, :mp3, :ogg, :m4a, :webm, :mp4, :otf, :ttf, :woff, :woff2, :xml, :rss, :atom, :yaml, :multipart_form, :url_encoded_form, :json, :pdf, :zip, :gzip], :variants=>[], :handlers=>[:raw, :erb, :html, :builder, :ruby]}.

Searched in:
  * "/home/lucasm/JuegoCartas/CardGameRuby/app/views"
  * "/home/lucasm/.rvm/gems/ruby-3.2.0/gems/actiontext-7.0.8/app/views"
  * "/home/lucasm/.rvm/gems/ruby-3.2.0/gems/actionmailbox-7.0.8/app/views"
):
  
app/controllers/players_controller.rb:27:in `login'
Started POST "/players/login" for ::1 at 2023-10-13 12:56:59 -0300
Processing by PlayersController#login as */*
  Parameters: {"player"=>{"email"=>"lucasdavidmiranda8@hotmail.com", "password"=>"[FILTERED]"}}
  [1m[36mPlayer Load (0.1ms)[0m  [1m[34mSELECT "players".* FROM "players" WHERE "players"."email" = $1 AND "players"."password" = $2 LIMIT $3[0m  [["email", "lucasdavidmiranda8@hotmail.com"], ["password", "123456#"], ["LIMIT", 1]]
  ↳ app/controllers/players_controller.rb:21:in `login'
Completed 500 Internal Server Error in 5ms (ActiveRecord: 1.5ms | Allocations: 3783)


  
ActionView::MissingTemplate (Missing template players/login, application/login with {:locale=>[:en], :formats=>[:html, :text, :js, :css, :ics, :csv, :vcf, :vtt, :png, :jpeg, :gif, :bmp, :tiff, :svg, :mpeg, :mp3, :ogg, :m4a, :webm, :mp4, :otf, :ttf, :woff, :woff2, :xml, :rss, :atom, :yaml, :multipart_form, :url_encoded_form, :json, :pdf, :zip, :gzip], :variants=>[], :handlers=>[:raw, :erb, :html, :builder, :ruby]}.

Searched in:
  * "/home/lucasm/JuegoCartas/CardGameRuby/app/views"
  * "/home/lucasm/.rvm/gems/ruby-3.2.0/gems/actiontext-7.0.8/app/views"
  * "/home/lucasm/.rvm/gems/ruby-3.2.0/gems/actionmailbox-7.0.8/app/views"
):
  
app/controllers/players_controller.rb:27:in `login'
  [1m[36mActiveRecord::SchemaMigration Pluck (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (5007.8ms)[0m  [1m[35mDROP DATABASE IF EXISTS "card_game_backend_development"[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (14.4ms)[0m  [1m[35mDROP DATABASE IF EXISTS "card_game_backend_development"[0m
  [1m[35m (14.0ms)[0m  [1m[35mDROP DATABASE IF EXISTS "card_game_backend_test"[0m
  [1m[35m (21.0ms)[0m  [1m[35mCREATE DATABASE "card_game_backend_development" ENCODING = 'unicode'[0m
  [1m[35m (19.8ms)[0m  [1m[35mCREATE DATABASE "card_game_backend_test" ENCODING = 'unicode'[0m
  [1m[35m (2.9ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[35m (2.2ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT pg_try_advisory_lock(3379173675217033995)[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to CreatePlayers (20220519232111)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (2.1ms)[0m  [1m[35mCREATE TABLE "players" ("id" uuid DEFAULT gen_random_uuid() NOT NULL PRIMARY KEY, "name" character varying, "lastname" character varying, "password" character varying, "nickname" character varying, "email" character varying, "token" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20220519232111"]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateBoards (20220522162722)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (2.7ms)[0m  [1m[35mCREATE TABLE "boards" ("id" uuid DEFAULT gen_random_uuid() NOT NULL PRIMARY KEY, "player_1_id" bigint, "player_2_id" bigint, "board_name" character varying, "turn" integer DEFAULT 0, "winner" integer, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE INDEX "index_boards_on_player_1_id" ON "boards" ("player_1_id")[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE INDEX "index_boards_on_player_2_id" ON "boards" ("player_2_id")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20220522162722"]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.2ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "environment"], ["value", "development"], ["created_at", "2023-10-13 15:58:02.449444"], ["updated_at", "2023-10-13 15:58:02.449444"]]
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_advisory_unlock(3379173675217033995)[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Started POST "/players" for ::1 at 2023-10-13 12:58:38 -0300
  [1m[36mActiveRecord::SchemaMigration Pluck (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by PlayersController#create as */*
  Parameters: {"player"=>{"email"=>"lucasdavidmiranda8@hotmail.com", "password"=>"[FILTERED]", "name"=>"lucas", "lastname"=>"miranda", "nickname"=>"enkinaurio"}}
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/players_controller.rb:35:in `create'
  [1m[36mPlayer Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "players" WHERE "players"."nickname" = $1 LIMIT $2[0m  [["nickname", "enkinaurio"], ["LIMIT", 1]]
  ↳ app/controllers/players_controller.rb:35:in `create'
  [1m[36mPlayer Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "players" WHERE "players"."email" = $1 LIMIT $2[0m  [["email", "lucasdavidmiranda8@hotmail.com"], ["LIMIT", 1]]
  ↳ app/controllers/players_controller.rb:35:in `create'
  [1m[36mPlayer Create (0.2ms)[0m  [1m[32mINSERT INTO "players" ("name", "lastname", "password", "nickname", "email", "token", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["name", "lucas"], ["lastname", "miranda"], ["password", "123456#"], ["nickname", "enkinaurio"], ["email", "lucasdavidmiranda8@hotmail.com"], ["token", "4ae11e6c-97c8-4b16-9203-9e7fc62648b2"], ["created_at", "2023-10-13 15:58:38.709249"], ["updated_at", "2023-10-13 15:58:38.709249"]]
  ↳ app/controllers/players_controller.rb:35:in `create'
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/players_controller.rb:35:in `create'
Completed 200 OK in 11ms (Views: 0.3ms | ActiveRecord: 3.0ms | Allocations: 12373)


Started POST "/players/login" for ::1 at 2023-10-13 12:58:45 -0300
Processing by PlayersController#login as */*
  Parameters: {"player"=>{"email"=>"lucasdavidmiranda8@hotmail.com", "password"=>"[FILTERED]"}}
  [1m[36mPlayer Load (0.2ms)[0m  [1m[34mSELECT "players".* FROM "players" WHERE "players"."email" = $1 AND "players"."password" = $2 LIMIT $3[0m  [["email", "lucasdavidmiranda8@hotmail.com"], ["password", "123456#"], ["LIMIT", 1]]
  ↳ app/controllers/players_controller.rb:21:in `login'
Completed 500 Internal Server Error in 6ms (ActiveRecord: 0.3ms | Allocations: 3447)


  
ActionView::MissingTemplate (Missing template players/login, application/login with {:locale=>[:en], :formats=>[:html, :text, :js, :css, :ics, :csv, :vcf, :vtt, :png, :jpeg, :gif, :bmp, :tiff, :svg, :mpeg, :mp3, :ogg, :m4a, :webm, :mp4, :otf, :ttf, :woff, :woff2, :xml, :rss, :atom, :yaml, :multipart_form, :url_encoded_form, :json, :pdf, :zip, :gzip], :variants=>[], :handlers=>[:raw, :erb, :html, :builder, :ruby]}.

Searched in:
  * "/home/lucasm/JuegoCartas/CardGameRuby/app/views"
  * "/home/lucasm/.rvm/gems/ruby-3.2.0/gems/actiontext-7.0.8/app/views"
  * "/home/lucasm/.rvm/gems/ruby-3.2.0/gems/actionmailbox-7.0.8/app/views"
):
  
app/controllers/players_controller.rb:26:in `login'
Started POST "/players/login" for ::1 at 2023-10-13 13:01:09 -0300
Processing by PlayersController#login as */*
  Parameters: {"player"=>{"email"=>"lucasdavidmiranda8@hotmail.com", "password"=>"[FILTERED]"}}
  [1m[36mPlayer Load (0.1ms)[0m  [1m[34mSELECT "players".* FROM "players" WHERE "players"."email" = $1 AND "players"."password" = $2 LIMIT $3[0m  [["email", "lucasdavidmiranda8@hotmail.com"], ["password", "123456#"], ["LIMIT", 1]]
  ↳ app/controllers/players_controller.rb:21:in `login'
Completed 500 Internal Server Error in 5ms (ActiveRecord: 2.1ms | Allocations: 3804)


  
ActionView::MissingTemplate (Missing template players/login, application/login with {:locale=>[:en], :formats=>[:html, :text, :js, :css, :ics, :csv, :vcf, :vtt, :png, :jpeg, :gif, :bmp, :tiff, :svg, :mpeg, :mp3, :ogg, :m4a, :webm, :mp4, :otf, :ttf, :woff, :woff2, :xml, :rss, :atom, :yaml, :multipart_form, :url_encoded_form, :json, :pdf, :zip, :gzip], :variants=>[], :handlers=>[:raw, :erb, :html, :builder, :ruby]}.

Searched in:
  * "/home/lucasm/JuegoCartas/CardGameRuby/app/views"
  * "/home/lucasm/.rvm/gems/ruby-3.2.0/gems/actiontext-7.0.8/app/views"
  * "/home/lucasm/.rvm/gems/ruby-3.2.0/gems/actionmailbox-7.0.8/app/views"
):
  
app/controllers/players_controller.rb:27:in `login'
Started POST "/players/login" for ::1 at 2023-10-13 13:01:39 -0300
Processing by PlayersController#login as */*
  Parameters: {"player"=>{"email"=>"lucasdavidmiranda8@hotmail.com", "password"=>"[FILTERED]"}}
  [1m[36mPlayer Load (0.1ms)[0m  [1m[34mSELECT "players".* FROM "players" WHERE "players"."email" = $1 AND "players"."password" = $2 LIMIT $3[0m  [["email", "lucasdavidmiranda8@hotmail.com"], ["password", "123456#"], ["LIMIT", 1]]
  ↳ app/controllers/players_controller.rb:21:in `login'
Completed 200 OK in 7ms (Views: 0.1ms | ActiveRecord: 1.8ms | Allocations: 3423)


Started POST "/players/login" for ::1 at 2023-10-13 13:37:57 -0300
Processing by PlayersController#login as */*
  Parameters: {"player"=>{"email"=>"lucasdavidmiranda8@hotmail.com", "password"=>"[FILTERED]"}}
Completed 500 Internal Server Error in 0ms (ActiveRecord: 0.0ms | Allocations: 163)


  
NameError (uninitialized constant PlayersController::User):
  
app/controllers/players_controller.rb:23:in `login'
Started POST "/players/login" for ::1 at 2023-10-13 13:39:38 -0300
Processing by PlayersController#login as */*
  Parameters: {"player"=>{"email"=>"lucasdavidmiranda8@hotmail.com", "password"=>"[FILTERED]"}}
Completed 500 Internal Server Error in 0ms (ActiveRecord: 0.0ms | Allocations: 157)


  
NameError (uninitialized constant PlayersController::User):
  
app/controllers/players_controller.rb:23:in `login'
Started POST "/players/login" for ::1 at 2023-10-13 13:39:47 -0300
Processing by PlayersController#login as */*
  Parameters: {"player"=>{"email"=>"lucasdavidmiranda8@hotmail.com", "password"=>"[FILTERED]"}}
Completed 500 Internal Server Error in 0ms (ActiveRecord: 0.0ms | Allocations: 157)


  
NameError (uninitialized constant PlayersController::User):
  
app/controllers/players_controller.rb:23:in `login'
Started POST "/players/login" for ::1 at 2023-10-13 13:40:12 -0300
Processing by PlayersController#login as */*
  Parameters: {"player"=>{"email"=>"lucasdavidmiranda8@hotmail.com", "password"=>"[FILTERED]"}}
  [1m[36mPlayer Load (0.3ms)[0m  [1m[34mSELECT "players".* FROM "players" WHERE ((email = 'lucasdavidmiranda8@hotmail.com' OR nickname = NULL) AND password = '123456#') LIMIT $1[0m  [["LIMIT", 1]]
  ↳ app/controllers/players_controller.rb:23:in `login'
Completed 200 OK in 11ms (Views: 0.1ms | ActiveRecord: 2.8ms | Allocations: 6199)


Started POST "/players/login" for ::1 at 2023-10-13 13:42:37 -0300
Processing by PlayersController#login as */*
  Parameters: {"player"=>{"email"=>"lucasdavidmiranda8@hotmail.com", "password"=>"[FILTERED]"}}
  [1m[36mPlayer Load (0.2ms)[0m  [1m[34mSELECT "players".* FROM "players" WHERE ((email = 'lucasdavidmiranda8@hotmail.com' OR nickname = NULL) AND password = '123456#') LIMIT $1[0m  [["LIMIT", 1]]
  ↳ app/controllers/players_controller.rb:21:in `login'
Completed 200 OK in 5ms (Views: 0.1ms | ActiveRecord: 2.5ms | Allocations: 3411)


Started POST "/players/login" for ::1 at 2023-10-13 13:42:53 -0300
Processing by PlayersController#login as */*
  Parameters: {"player"=>{"email"=>"lucasdavidmiranda8@hotmail.com", "password"=>"[FILTERED]"}}
  [1m[36mPlayer Load (0.3ms)[0m  [1m[34mSELECT "players".* FROM "players" WHERE ((email = 'lucasdavidmiranda8@hotmail.com' OR nickname = NULL) AND password = '123456#') LIMIT $1[0m  [["LIMIT", 1]]
  ↳ app/controllers/players_controller.rb:21:in `login'
Completed 200 OK in 5ms (Views: 0.1ms | ActiveRecord: 2.2ms | Allocations: 3397)


Started PUT "/players/c94a6e5a-2ec6-409f-8993-11a5d070890c" for ::1 at 2023-10-13 13:50:24 -0300
  
ActionController::RoutingError (No route matches [PUT] "/players/c94a6e5a-2ec6-409f-8993-11a5d070890c"):
  
Started PUT "/players/c94a6e5a-2ec6-409f-8993-11a5d070890c" for ::1 at 2023-10-13 13:55:10 -0300
Processing by PlayersController#update as */*
  Parameters: {"player"=>{"email"=>"lucasdavidmiranda8@hotmail.com", "password"=>"[FILTERED]", "name"=>"lucas", "lastname"=>"miranda", "nickname"=>"enkinaurio"}, "id"=>"c94a6e5a-2ec6-409f-8993-11a5d070890c"}
  [1m[36mPlayer Load (0.4ms)[0m  [1m[34mSELECT "players".* FROM "players" WHERE "players"."token" = $1 LIMIT $2[0m  [["token", "4ae11e6c-97c8-4b16-9203-9e7fc62648b2"], ["LIMIT", 1]]
  ↳ app/helpers/session_helper.rb:4:in `check_token'
  [1m[36mPlayer Load (0.2ms)[0m  [1m[34mSELECT "players".* FROM "players" WHERE "players"."id" = $1 LIMIT $2[0m  [["id", "c94a6e5a-2ec6-409f-8993-11a5d070890c"], ["LIMIT", 1]]
  ↳ app/controllers/players_controller.rb:45:in `update'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/players_controller.rb:47:in `update'
  [1m[36mPlayer Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "players" WHERE "players"."nickname" = $1 AND "players"."id" != $2 LIMIT $3[0m  [["nickname", "enkinaurio"], ["id", "c94a6e5a-2ec6-409f-8993-11a5d070890c"], ["LIMIT", 1]]
  ↳ app/controllers/players_controller.rb:47:in `update'
  [1m[36mPlayer Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "players" WHERE "players"."email" = $1 AND "players"."id" != $2 LIMIT $3[0m  [["email", "lucasdavidmiranda8@hotmail.com"], ["id", "c94a6e5a-2ec6-409f-8993-11a5d070890c"], ["LIMIT", 1]]
  ↳ app/controllers/players_controller.rb:47:in `update'
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/players_controller.rb:47:in `update'
Completed 200 OK in 27ms (Views: 0.2ms | ActiveRecord: 5.3ms | Allocations: 10186)


Started DELETE "/players/c94a6e5a-2ec6-409f-8993-11a5d070890c" for ::1 at 2023-10-13 14:01:08 -0300
Processing by PlayersController#destroy as */*
  Parameters: {"id"=>"c94a6e5a-2ec6-409f-8993-11a5d070890c"}
  [1m[36mPlayer Load (0.2ms)[0m  [1m[34mSELECT "players".* FROM "players" WHERE "players"."token" = $1 LIMIT $2[0m  [["token", "4ae11e6c-97c8-4b16-9203-9e7fc62648b2"], ["LIMIT", 1]]
  ↳ app/helpers/session_helper.rb:4:in `check_token'
  [1m[36mPlayer Load (0.1ms)[0m  [1m[34mSELECT "players".* FROM "players" WHERE "players"."id" = $1 LIMIT $2[0m  [["id", "c94a6e5a-2ec6-409f-8993-11a5d070890c"], ["LIMIT", 1]]
  ↳ app/controllers/players_controller.rb:55:in `destroy'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/players_controller.rb:56:in `destroy'
  [1m[36mPlayer Destroy (0.2ms)[0m  [1m[31mDELETE FROM "players" WHERE "players"."id" = $1[0m  [["id", "c94a6e5a-2ec6-409f-8993-11a5d070890c"]]
  ↳ app/controllers/players_controller.rb:56:in `destroy'
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/players_controller.rb:56:in `destroy'
Completed 204 No Content in 19ms (ActiveRecord: 3.7ms | Allocations: 9116)


Started POST "/players" for ::1 at 2023-10-13 14:01:13 -0300
Processing by PlayersController#create as */*
  Parameters: {"player"=>{"email"=>"lucasdavidmiranda8@hotmail.com", "password"=>"[FILTERED]", "name"=>"lucas", "lastname"=>"miranda", "nickname"=>"enkinaurio"}}
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/players_controller.rb:37:in `create'
  [1m[36mPlayer Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "players" WHERE "players"."nickname" = $1 LIMIT $2[0m  [["nickname", "enkinaurio"], ["LIMIT", 1]]
  ↳ app/controllers/players_controller.rb:37:in `create'
  [1m[36mPlayer Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "players" WHERE "players"."email" = $1 LIMIT $2[0m  [["email", "lucasdavidmiranda8@hotmail.com"], ["LIMIT", 1]]
  ↳ app/controllers/players_controller.rb:37:in `create'
  [1m[36mPlayer Create (0.3ms)[0m  [1m[32mINSERT INTO "players" ("name", "lastname", "password", "nickname", "email", "token", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["name", "lucas"], ["lastname", "miranda"], ["password", "123456#"], ["nickname", "enkinaurio"], ["email", "lucasdavidmiranda8@hotmail.com"], ["token", "76386160-01b2-4bf0-907e-a16ffd5f1d06"], ["created_at", "2023-10-13 17:01:13.066865"], ["updated_at", "2023-10-13 17:01:13.066865"]]
  ↳ app/controllers/players_controller.rb:37:in `create'
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/players_controller.rb:37:in `create'
Completed 200 OK in 6ms (Views: 0.2ms | ActiveRecord: 1.2ms | Allocations: 4121)


Started POST "/players/login" for ::1 at 2023-10-13 14:01:15 -0300
Processing by PlayersController#login as */*
  Parameters: {"player"=>{"email"=>"lucasdavidmiranda8@hotmail.com", "password"=>"[FILTERED]"}}
  [1m[36mPlayer Load (0.2ms)[0m  [1m[34mSELECT "players".* FROM "players" WHERE ((email = 'lucasdavidmiranda8@hotmail.com' OR nickname = NULL) AND password = '123456#') LIMIT $1[0m  [["LIMIT", 1]]
  ↳ app/controllers/players_controller.rb:21:in `login'
Completed 200 OK in 1ms (Views: 0.1ms | ActiveRecord: 0.2ms | Allocations: 766)


Started PUT "/players/c94a6e5a-2ec6-409f-8993-11a5d070890c" for ::1 at 2023-10-13 14:01:22 -0300
Processing by PlayersController#update as */*
  Parameters: {"player"=>{"email"=>"lucasdavidmiranda8@hotmail.com", "password"=>"[FILTERED]", "name"=>"lucas", "lastname"=>"miranda", "nickname"=>"enkinaurio"}, "id"=>"c94a6e5a-2ec6-409f-8993-11a5d070890c"}
  [1m[36mPlayer Load (0.2ms)[0m  [1m[34mSELECT "players".* FROM "players" WHERE "players"."token" = $1 LIMIT $2[0m  [["token", "76386160-01b2-4bf0-907e-a16ffd5f1d06"], ["LIMIT", 1]]
  ↳ app/helpers/session_helper.rb:4:in `check_token'
  [1m[36mPlayer Load (0.1ms)[0m  [1m[34mSELECT "players".* FROM "players" WHERE "players"."id" = $1 LIMIT $2[0m  [["id", "c94a6e5a-2ec6-409f-8993-11a5d070890c"], ["LIMIT", 1]]
  ↳ app/controllers/players_controller.rb:45:in `update'
Completed 404 Not Found in 1ms (ActiveRecord: 0.3ms | Allocations: 1121)


  
ActiveRecord::RecordNotFound (Couldn't find Player with 'id'=c94a6e5a-2ec6-409f-8993-11a5d070890c):
  
app/controllers/players_controller.rb:45:in `update'
Started PUT "/players/73f9c729-d06f-4b35-9984-7143fe8e47cb" for ::1 at 2023-10-13 14:01:39 -0300
Processing by PlayersController#update as */*
  Parameters: {"player"=>{"email"=>"lucasdavidmiranda8@hotmail.com", "password"=>"[FILTERED]", "name"=>"lucas", "lastname"=>"miranda", "nickname"=>"enkinaurio"}, "id"=>"73f9c729-d06f-4b35-9984-7143fe8e47cb"}
  [1m[36mPlayer Load (0.2ms)[0m  [1m[34mSELECT "players".* FROM "players" WHERE "players"."token" = $1 LIMIT $2[0m  [["token", "76386160-01b2-4bf0-907e-a16ffd5f1d06"], ["LIMIT", 1]]
  ↳ app/helpers/session_helper.rb:4:in `check_token'
  [1m[36mPlayer Load (0.1ms)[0m  [1m[34mSELECT "players".* FROM "players" WHERE "players"."id" = $1 LIMIT $2[0m  [["id", "73f9c729-d06f-4b35-9984-7143fe8e47cb"], ["LIMIT", 1]]
  ↳ app/controllers/players_controller.rb:45:in `update'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/players_controller.rb:47:in `update'
  [1m[36mPlayer Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "players" WHERE "players"."nickname" = $1 AND "players"."id" != $2 LIMIT $3[0m  [["nickname", "enkinaurio"], ["id", "73f9c729-d06f-4b35-9984-7143fe8e47cb"], ["LIMIT", 1]]
  ↳ app/controllers/players_controller.rb:47:in `update'
  [1m[36mPlayer Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "players" WHERE "players"."email" = $1 AND "players"."id" != $2 LIMIT $3[0m  [["email", "lucasdavidmiranda8@hotmail.com"], ["id", "73f9c729-d06f-4b35-9984-7143fe8e47cb"], ["LIMIT", 1]]
  ↳ app/controllers/players_controller.rb:47:in `update'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/players_controller.rb:47:in `update'
Completed 200 OK in 6ms (Views: 0.2ms | ActiveRecord: 0.8ms | Allocations: 4258)


Started POST "/login" for ::1 at 2023-10-13 14:09:55 -0300
  
ActionController::RoutingError (No route matches [POST] "/login"):
  
Started POST "/player/login" for ::1 at 2023-10-13 14:10:13 -0300
Processing by PlayersController#login as */*
  Parameters: {"player"=>{"email"=>"lucasdavidmiranda8@hotmail.com", "password"=>"[FILTERED]"}}
  [1m[36mPlayer Load (0.6ms)[0m  [1m[34mSELECT "players".* FROM "players" WHERE ((email = 'lucasdavidmiranda8@hotmail.com' OR nickname = NULL) AND password = '123456#') LIMIT $1[0m  [["LIMIT", 1]]
  ↳ app/controllers/players_controller.rb:16:in `login'
Completed 200 OK in 11ms (Views: 0.1ms | ActiveRecord: 3.0ms | Allocations: 6144)


Started POST "/player/login" for ::1 at 2023-10-13 14:10:19 -0300
Processing by PlayersController#login as */*
  Parameters: {"player"=>{"email"=>"lucasdavidmiranda8@hotmail.com", "password"=>"[FILTERED]"}}
  [1m[36mPlayer Load (0.3ms)[0m  [1m[34mSELECT "players".* FROM "players" WHERE ((email = 'lucasdavidmiranda8@hotmail.com' OR nickname = NULL) AND password = '123456#') LIMIT $1[0m  [["LIMIT", 1]]
  ↳ app/controllers/players_controller.rb:16:in `login'
Completed 200 OK in 1ms (Views: 0.1ms | ActiveRecord: 0.3ms | Allocations: 736)


Started PUT "/players/73f9c729-d06f-4b35-9984-7143fe8e47cb" for ::1 at 2023-10-13 14:12:36 -0300
Processing by PlayersController#update as */*
  Parameters: {"player"=>{"email"=>"lucasdavidmiranda8@hotmail.com", "password"=>"[FILTERED]", "name"=>"lucas", "lastname"=>"miranda", "nickname"=>"enkinaurio"}, "id"=>"73f9c729-d06f-4b35-9984-7143fe8e47cb"}
  [1m[36mPlayer Load (0.1ms)[0m  [1m[34mSELECT "players".* FROM "players" WHERE "players"."token" = $1 LIMIT $2[0m  [["token", "76386160-01b2-4bf0-907e-a16ffd5f1d06"], ["LIMIT", 1]]
  ↳ app/helpers/session_helper.rb:4:in `check_token'
  [1m[36mPlayer Load (0.1ms)[0m  [1m[34mSELECT "players".* FROM "players" WHERE "players"."id" = $1 LIMIT $2[0m  [["id", "73f9c729-d06f-4b35-9984-7143fe8e47cb"], ["LIMIT", 1]]
  ↳ app/controllers/players_controller.rb:40:in `update'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/players_controller.rb:42:in `update'
  [1m[36mPlayer Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "players" WHERE "players"."nickname" = $1 AND "players"."id" != $2 LIMIT $3[0m  [["nickname", "enkinaurio"], ["id", "73f9c729-d06f-4b35-9984-7143fe8e47cb"], ["LIMIT", 1]]
  ↳ app/controllers/players_controller.rb:42:in `update'
  [1m[36mPlayer Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "players" WHERE "players"."email" = $1 AND "players"."id" != $2 LIMIT $3[0m  [["email", "lucasdavidmiranda8@hotmail.com"], ["id", "73f9c729-d06f-4b35-9984-7143fe8e47cb"], ["LIMIT", 1]]
  ↳ app/controllers/players_controller.rb:42:in `update'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/players_controller.rb:42:in `update'
Completed 200 OK in 10ms (Views: 0.2ms | ActiveRecord: 4.5ms | Allocations: 7390)


  [1m[36mActiveRecord::SchemaMigration Pluck (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (12.4ms)[0m  [1m[35mDROP DATABASE IF EXISTS "card_game_backend_development"[0m
  [1m[35m (12.7ms)[0m  [1m[35mDROP DATABASE IF EXISTS "card_game_backend_test"[0m
  [1m[35m (22.7ms)[0m  [1m[35mCREATE DATABASE "card_game_backend_development" ENCODING = 'unicode'[0m
  [1m[35m (19.9ms)[0m  [1m[35mCREATE DATABASE "card_game_backend_test" ENCODING = 'unicode'[0m
  [1m[35m (2.8ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[35m (2.1ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT pg_try_advisory_lock(3379173675217033995)[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to CreatePlayers (20220519232111)
  [1m[35m (0.1ms)[0m  [1m[34mSELECT pg_advisory_unlock(3379173675217033995)[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT pg_try_advisory_lock(3379173675217033995)[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to CreatePlayers (20220519232111)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (2.4ms)[0m  [1m[35mCREATE TABLE "players" ("id" uuid DEFAULT gen_random_uuid() NOT NULL PRIMARY KEY, "name" character varying, "lastname" character varying, "password" character varying, "nickname" character varying, "email" character varying, "token" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20220519232111"]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateBoards (20220522162722)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (2.5ms)[0m  [1m[35mCREATE TABLE "boards" ("id" uuid DEFAULT gen_random_uuid() NOT NULL PRIMARY KEY, "player_1_id" bigint, "player_2_id" bigint, "board_name" character varying, "turn" integer DEFAULT 0, "winner" integer, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE INDEX "index_boards_on_player_1_id" ON "boards" ("player_1_id")[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE INDEX "index_boards_on_player_2_id" ON "boards" ("player_2_id")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20220522162722"]]
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateImages (20231013173634)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE TABLE "images" ("id" uuid DEFAULT gen_random_uuid() NOT NULL PRIMARY KEY, "player_id" bigint, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE INDEX "index_images_on_player_id" ON "images" ("player_id")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20231013173634"]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.2ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "environment"], ["value", "development"], ["created_at", "2023-10-13 17:45:07.513179"], ["updated_at", "2023-10-13 17:45:07.513179"]]
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_advisory_unlock(3379173675217033995)[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT pg_try_advisory_lock(3379173675217033995)[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to AddImageToPlayers (20231013174716)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "players" ADD "file_id" bigint NOT NULL[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE INDEX "index_players_on_file_id" ON "players" ("file_id")[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "players" ADD CONSTRAINT "fk_rails_a891a24ef4"
FOREIGN KEY ("file_id")
  REFERENCES "files" ("id")
[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT pg_advisory_unlock(3379173675217033995)[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (5013.0ms)[0m  [1m[35mDROP DATABASE IF EXISTS "card_game_backend_development"[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (40.3ms)[0m  [1m[35mDROP DATABASE IF EXISTS "card_game_backend_development"[0m
  [1m[35m (12.8ms)[0m  [1m[35mDROP DATABASE IF EXISTS "card_game_backend_test"[0m
  [1m[35m (25.9ms)[0m  [1m[35mCREATE DATABASE "card_game_backend_development" ENCODING = 'unicode'[0m
  [1m[35m (18.7ms)[0m  [1m[35mCREATE DATABASE "card_game_backend_test" ENCODING = 'unicode'[0m
  [1m[35m (2.9ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[35m (2.2ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT pg_try_advisory_lock(3379173675217033995)[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to CreatePlayers (20220519232111)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (2.5ms)[0m  [1m[35mCREATE TABLE "players" ("id" uuid DEFAULT gen_random_uuid() NOT NULL PRIMARY KEY, "name" character varying, "lastname" character varying, "password" character varying, "nickname" character varying, "email" character varying, "token" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.1ms)[0m  [1m[35mALTER TABLE "players" ADD "image_id" bigint[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE INDEX "index_players_on_image_id" ON "players" ("image_id")[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "players" ADD CONSTRAINT "fk_rails_884bb50f59"
FOREIGN KEY ("image_id")
  REFERENCES "images" ("id")
[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT pg_advisory_unlock(3379173675217033995)[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT pg_try_advisory_lock(3379173675217033995)[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to CreatePlayers (20220519232111)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (2.9ms)[0m  [1m[35mCREATE TABLE "players" ("id" uuid DEFAULT gen_random_uuid() NOT NULL PRIMARY KEY, "name" character varying, "lastname" character varying, "password" character varying, "nickname" character varying, "email" character varying, "token" character varying, "image_id" bigint, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, CONSTRAINT "fk_rails_884bb50f59"
FOREIGN KEY ("image_id")
  REFERENCES "images" ("id")
)[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT pg_advisory_unlock(3379173675217033995)[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT pg_try_advisory_lock(3379173675217033995)[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to CreatePlayers (20220519232111)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (2.8ms)[0m  [1m[35mCREATE TABLE "players" ("id" uuid DEFAULT gen_random_uuid() NOT NULL PRIMARY KEY, "name" character varying, "lastname" character varying, "password" character varying, "nickname" character varying, "email" character varying, "token" character varying, "image_id" bigint, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, CONSTRAINT "fk_rails_884bb50f59"
FOREIGN KEY ("image_id")
  REFERENCES "images" ("id")
)[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT pg_advisory_unlock(3379173675217033995)[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT pg_try_advisory_lock(3379173675217033995)[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to CreatePlayers (20220519232111)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (2.3ms)[0m  [1m[35mCREATE TABLE "players" ("id" uuid DEFAULT gen_random_uuid() NOT NULL PRIMARY KEY, "name" character varying, "lastname" character varying, "password" character varying, "nickname" character varying, "email" character varying, "token" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20220519232111"]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateBoards (20220522162722)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (2.1ms)[0m  [1m[35mCREATE TABLE "boards" ("id" uuid DEFAULT gen_random_uuid() NOT NULL PRIMARY KEY, "player_1_id" bigint, "player_2_id" bigint, "board_name" character varying, "turn" integer DEFAULT 0, "winner" integer, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE INDEX "index_boards_on_player_1_id" ON "boards" ("player_1_id")[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE INDEX "index_boards_on_player_2_id" ON "boards" ("player_2_id")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20220522162722"]]
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateImages (20231013175124)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (2.2ms)[0m  [1m[35mCREATE TABLE "images" ("id" uuid DEFAULT gen_random_uuid() NOT NULL PRIMARY KEY, "player_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, CONSTRAINT "fk_rails_e73d825546"
FOREIGN KEY ("player_id")
  REFERENCES "players" ("id")
)[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_advisory_unlock(3379173675217033995)[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT pg_try_advisory_lock(3379173675217033995)[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to CreateImages (20231013175124)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (2.0ms)[0m  [1m[35mCREATE TABLE "images" ("id" uuid DEFAULT gen_random_uuid() NOT NULL PRIMARY KEY, "player_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, CONSTRAINT "fk_rails_e73d825546"
FOREIGN KEY ("player_id")
  REFERENCES "players" ("id")
)[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT pg_advisory_unlock(3379173675217033995)[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT pg_try_advisory_lock(3379173675217033995)[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to CreateImages (20231013175124)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.5ms)[0m  [1m[35mCREATE TABLE "images" ("id" uuid DEFAULT gen_random_uuid() NOT NULL PRIMARY KEY, "player_id" uuid NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20231013175124"]]
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.2ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "environment"], ["value", "development"], ["created_at", "2023-10-13 17:56:30.155699"], ["updated_at", "2023-10-13 17:56:30.155699"]]
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_advisory_unlock(3379173675217033995)[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Started POST "/players" for ::1 at 2023-10-13 15:10:27 -0300
  [1m[36mActiveRecord::SchemaMigration Pluck (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by PlayersController#create as */*
  Parameters: {"player"=>{"email"=>"lucasdavidmiranda8@hotmail.com", "password"=>"[FILTERED]", "name"=>"lucas", "lastname"=>"miranda", "nickname"=>"enkinaurio"}}
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/players_controller.rb:32:in `create'
  [1m[36mPlayer Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "players" WHERE "players"."nickname" = $1 LIMIT $2[0m  [["nickname", "enkinaurio"], ["LIMIT", 1]]
  ↳ app/controllers/players_controller.rb:32:in `create'
  [1m[36mPlayer Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "players" WHERE "players"."email" = $1 LIMIT $2[0m  [["email", "lucasdavidmiranda8@hotmail.com"], ["LIMIT", 1]]
  ↳ app/controllers/players_controller.rb:32:in `create'
  [1m[36mPlayer Create (0.3ms)[0m  [1m[32mINSERT INTO "players" ("name", "lastname", "password", "nickname", "email", "token", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["name", "lucas"], ["lastname", "miranda"], ["password", "123456#"], ["nickname", "enkinaurio"], ["email", "lucasdavidmiranda8@hotmail.com"], ["token", "edd42b48-2304-476b-9ab1-478baedd790f"], ["created_at", "2023-10-13 18:10:27.624331"], ["updated_at", "2023-10-13 18:10:27.624331"]]
  ↳ app/controllers/players_controller.rb:32:in `create'
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/players_controller.rb:32:in `create'
Completed 200 OK in 11ms (Views: 0.3ms | ActiveRecord: 3.3ms | Allocations: 12403)


Started POST "/player/login" for ::1 at 2023-10-13 15:10:35 -0300
Processing by PlayersController#login as */*
  Parameters: {"player"=>{"email"=>"lucasdavidmiranda8@hotmail.com", "password"=>"[FILTERED]"}}
  [1m[36mPlayer Load (0.3ms)[0m  [1m[34mSELECT "players".* FROM "players" WHERE ((email = 'lucasdavidmiranda8@hotmail.com' OR nickname = NULL) AND password = '123456#') LIMIT $1[0m  [["LIMIT", 1]]
  ↳ app/controllers/players_controller.rb:16:in `login'
Completed 200 OK in 2ms (Views: 0.1ms | ActiveRecord: 0.3ms | Allocations: 917)


Started PUT "/players/4e37a174-42be-4509-939c-4e8df15eab76/update_image" for ::1 at 2023-10-13 15:10:48 -0300
Processing by PlayersController#update_image as */*
  Parameters: {"player"=>{"email"=>"lucasdavidmiranda8@hotmail.com", "password"=>"[FILTERED]", "name"=>"lucas", "lastname"=>"miranda", "nickname"=>"enkinaurio"}, "player_id"=>"4e37a174-42be-4509-939c-4e8df15eab76"}
  [1m[36mPlayer Load (0.2ms)[0m  [1m[34mSELECT "players".* FROM "players" WHERE "players"."token" = $1 LIMIT $2[0m  [["token", "edd42b48-2304-476b-9ab1-478baedd790f"], ["LIMIT", 1]]
  ↳ app/helpers/session_helper.rb:4:in `check_token'
  [1m[36mPlayer Load (0.1ms)[0m  [1m[34mSELECT "players".* FROM "players" WHERE "players"."id" = $1 LIMIT $2[0m  [["id", "4e37a174-42be-4509-939c-4e8df15eab76"], ["LIMIT", 1]]
  ↳ app/controllers/players_controller.rb:59:in `update_image'
  [1m[36mImage Load (0.2ms)[0m  [1m[34mSELECT "images".* FROM "images" WHERE "images"."player_id" = $1 LIMIT $2[0m  [["player_id", "4e37a174-42be-4509-939c-4e8df15eab76"], ["LIMIT", 1]]
  ↳ app/controllers/players_controller.rb:61:in `update_image'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/players_controller.rb:68:in `update_image'
  [1m[36mPlayer Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "players" WHERE "players"."nickname" = $1 AND "players"."id" != $2 LIMIT $3[0m  [["nickname", "enkinaurio"], ["id", "4e37a174-42be-4509-939c-4e8df15eab76"], ["LIMIT", 1]]
  ↳ app/controllers/players_controller.rb:68:in `update_image'
  [1m[36mPlayer Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "players" WHERE "players"."email" = $1 AND "players"."id" != $2 LIMIT $3[0m  [["email", "lucasdavidmiranda8@hotmail.com"], ["id", "4e37a174-42be-4509-939c-4e8df15eab76"], ["LIMIT", 1]]
  ↳ app/controllers/players_controller.rb:68:in `update_image'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/players_controller.rb:68:in `update_image'
Completed 200 OK in 22ms (Views: 0.2ms | ActiveRecord: 1.7ms | Allocations: 12007)


Started PUT "/players/4e37a174-42be-4509-939c-4e8df15eab76/update_image" for ::1 at 2023-10-13 15:14:00 -0300
Processing by PlayersController#update_image as */*
  Parameters: {"player"=>{"email"=>"lucasdavidmiranda8@hotmail.com", "password"=>"[FILTERED]", "name"=>"lucas", "lastname"=>"miranda", "nickname"=>"enkinaurio"}, "player_id"=>"4e37a174-42be-4509-939c-4e8df15eab76"}
  [1m[36mPlayer Load (0.1ms)[0m  [1m[34mSELECT "players".* FROM "players" WHERE "players"."token" = $1 LIMIT $2[0m  [["token", "edd42b48-2304-476b-9ab1-478baedd790f"], ["LIMIT", 1]]
  ↳ app/helpers/session_helper.rb:4:in `check_token'
  [1m[36mPlayer Load (0.1ms)[0m  [1m[34mSELECT "players".* FROM "players" WHERE "players"."id" = $1 LIMIT $2[0m  [["id", "4e37a174-42be-4509-939c-4e8df15eab76"], ["LIMIT", 1]]
  ↳ app/controllers/players_controller.rb:61:in `update_image'
  [1m[36mImage Load (0.1ms)[0m  [1m[34mSELECT "images".* FROM "images" WHERE "images"."player_id" = $1 LIMIT $2[0m  [["player_id", "4e37a174-42be-4509-939c-4e8df15eab76"], ["LIMIT", 1]]
  ↳ app/controllers/players_controller.rb:63:in `update_image'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/players_controller.rb:70:in `update_image'
  [1m[36mPlayer Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "players" WHERE "players"."nickname" = $1 AND "players"."id" != $2 LIMIT $3[0m  [["nickname", "enkinaurio"], ["id", "4e37a174-42be-4509-939c-4e8df15eab76"], ["LIMIT", 1]]
  ↳ app/controllers/players_controller.rb:70:in `update_image'
  [1m[36mPlayer Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "players" WHERE "players"."email" = $1 AND "players"."id" != $2 LIMIT $3[0m  [["email", "lucasdavidmiranda8@hotmail.com"], ["id", "4e37a174-42be-4509-939c-4e8df15eab76"], ["LIMIT", 1]]
  ↳ app/controllers/players_controller.rb:70:in `update_image'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/players_controller.rb:70:in `update_image'
Completed 200 OK in 9ms (Views: 0.1ms | ActiveRecord: 2.5ms | Allocations: 10016)


Started PUT "/players/4e37a174-42be-4509-939c-4e8df15eab76/update_image" for ::1 at 2023-10-13 15:16:22 -0300
Processing by PlayersController#update_image as */*
  Parameters: {"player"=>{"email"=>"lucasdavidmiranda8@hotmail.com", "password"=>"[FILTERED]", "name"=>"lucas", "lastname"=>"miranda", "nickname"=>"enkinaurio"}, "player_id"=>"4e37a174-42be-4509-939c-4e8df15eab76"}
  [1m[36mPlayer Load (0.1ms)[0m  [1m[34mSELECT "players".* FROM "players" WHERE "players"."token" = $1 LIMIT $2[0m  [["token", "edd42b48-2304-476b-9ab1-478baedd790f"], ["LIMIT", 1]]
  ↳ app/helpers/session_helper.rb:4:in `check_token'
  [1m[36mPlayer Load (0.1ms)[0m  [1m[34mSELECT "players".* FROM "players" WHERE "players"."id" = $1 LIMIT $2[0m  [["id", "4e37a174-42be-4509-939c-4e8df15eab76"], ["LIMIT", 1]]
  ↳ app/controllers/players_controller.rb:61:in `update_image'
  [1m[36mImage Load (0.2ms)[0m  [1m[34mSELECT "images".* FROM "images" WHERE "images"."player_id" = $1 LIMIT $2[0m  [["player_id", "4e37a174-42be-4509-939c-4e8df15eab76"], ["LIMIT", 1]]
  ↳ app/controllers/players_controller.rb:63:in `update_image'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/players_controller.rb:70:in `update_image'
  [1m[36mPlayer Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "players" WHERE "players"."nickname" = $1 AND "players"."id" != $2 LIMIT $3[0m  [["nickname", "enkinaurio"], ["id", "4e37a174-42be-4509-939c-4e8df15eab76"], ["LIMIT", 1]]
  ↳ app/controllers/players_controller.rb:70:in `update_image'
  [1m[36mPlayer Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "players" WHERE "players"."email" = $1 AND "players"."id" != $2 LIMIT $3[0m  [["email", "lucasdavidmiranda8@hotmail.com"], ["id", "4e37a174-42be-4509-939c-4e8df15eab76"], ["LIMIT", 1]]
  ↳ app/controllers/players_controller.rb:70:in `update_image'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/players_controller.rb:70:in `update_image'
Completed 200 OK in 11ms (Views: 0.1ms | ActiveRecord: 2.9ms | Allocations: 10077)


Started PUT "/players/4e37a174-42be-4509-939c-4e8df15eab76/update_image" for ::1 at 2023-10-13 15:19:09 -0300
Processing by PlayersController#update_image as */*
  Parameters: {"image"=>#<ActionDispatch::Http::UploadedFile:0x00007fe057d24b70 @tempfile=#<Tempfile:/tmp/RackMultipart20231013-48170-hxknz6.jpg>, @content_type="image/jpeg", @original_filename="Perfil_LS.jpg", @headers="Content-Disposition: form-data; name=\"image\"; filename=\"Perfil_LS.jpg\"\r\nContent-Type: image/jpeg\r\n">, "player_id"=>"4e37a174-42be-4509-939c-4e8df15eab76"}
  [1m[36mPlayer Load (0.2ms)[0m  [1m[34mSELECT "players".* FROM "players" WHERE "players"."token" = $1 LIMIT $2[0m  [["token", "edd42b48-2304-476b-9ab1-478baedd790f"], ["LIMIT", 1]]
  ↳ app/helpers/session_helper.rb:4:in `check_token'
  [1m[36mPlayer Load (0.2ms)[0m  [1m[34mSELECT "players".* FROM "players" WHERE "players"."id" = $1 LIMIT $2[0m  [["id", "4e37a174-42be-4509-939c-4e8df15eab76"], ["LIMIT", 1]]
  ↳ app/controllers/players_controller.rb:61:in `update_image'
  [1m[36mImage Load (0.1ms)[0m  [1m[34mSELECT "images".* FROM "images" WHERE "images"."player_id" = $1 LIMIT $2[0m  [["player_id", "4e37a174-42be-4509-939c-4e8df15eab76"], ["LIMIT", 1]]
  ↳ app/controllers/players_controller.rb:63:in `update_image'
Completed 500 Internal Server Error in 27ms (ActiveRecord: 4.7ms | Allocations: 16195)


  
ActiveRecord::StatementInvalid (PG::UndefinedTable: ERROR:  relation "active_storage_blobs" does not exist
LINE 9:  WHERE a.attrelid = '"active_storage_blobs"'::regclass
                            ^
):
  
app/controllers/players_controller.rb:70:in `update_image'
  [1m[35m (0.1ms)[0m  [1m[34mSELECT pg_try_advisory_lock(3379173675217033995)[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[34mSELECT pg_advisory_unlock(3379173675217033995)[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (1.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT pg_try_advisory_lock(3379173675217033995)[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[34mSELECT pg_advisory_unlock(3379173675217033995)[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (12.0ms)[0m  [1m[35mDROP DATABASE IF EXISTS "card_game_backend_development"[0m
  [1m[35m (13.5ms)[0m  [1m[35mDROP DATABASE IF EXISTS "card_game_backend_test"[0m
  [1m[35m (20.2ms)[0m  [1m[35mCREATE DATABASE "card_game_backend_development" ENCODING = 'unicode'[0m
  [1m[35m (19.3ms)[0m  [1m[35mCREATE DATABASE "card_game_backend_test" ENCODING = 'unicode'[0m
  [1m[35m (2.8ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[35m (2.2ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT pg_try_advisory_lock(3379173675217033995)[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to CreatePlayers (20220519232111)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (2.4ms)[0m  [1m[35mCREATE TABLE "players" ("id" uuid DEFAULT gen_random_uuid() NOT NULL PRIMARY KEY, "name" character varying, "lastname" character varying, "password" character varying, "nickname" character varying, "email" character varying, "token" character varying, "image_id" bigint, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, CONSTRAINT "fk_rails_884bb50f59"
FOREIGN KEY ("image_id")
  REFERENCES "images" ("id")
)[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT pg_advisory_unlock(3379173675217033995)[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (40.8ms)[0m  [1m[35mDROP DATABASE IF EXISTS "card_game_backend_development"[0m
  [1m[35m (12.3ms)[0m  [1m[35mDROP DATABASE IF EXISTS "card_game_backend_test"[0m
  [1m[35m (20.5ms)[0m  [1m[35mCREATE DATABASE "card_game_backend_development" ENCODING = 'unicode'[0m
  [1m[35m (19.3ms)[0m  [1m[35mCREATE DATABASE "card_game_backend_test" ENCODING = 'unicode'[0m
  [1m[35m (2.8ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[35m (2.2ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT pg_try_advisory_lock(3379173675217033995)[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to CreatePlayers (20220519232111)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (2.7ms)[0m  [1m[35mCREATE TABLE "players" ("id" uuid DEFAULT gen_random_uuid() NOT NULL PRIMARY KEY, "name" character varying, "lastname" character varying, "password" character varying, "nickname" character varying, "email" character varying, "token" character varying, "image_id" bigint, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, CONSTRAINT "fk_rails_884bb50f59"
FOREIGN KEY ("image_id")
  REFERENCES "images" ("id")
)[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT pg_advisory_unlock(3379173675217033995)[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (61.8ms)[0m  [1m[35mDROP DATABASE IF EXISTS "card_game_backend_development"[0m
  [1m[35m (12.6ms)[0m  [1m[35mDROP DATABASE IF EXISTS "card_game_backend_test"[0m
  [1m[35m (20.5ms)[0m  [1m[35mCREATE DATABASE "card_game_backend_development" ENCODING = 'unicode'[0m
  [1m[35m (19.6ms)[0m  [1m[35mCREATE DATABASE "card_game_backend_test" ENCODING = 'unicode'[0m
  [1m[35m (2.7ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[35m (2.1ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT pg_try_advisory_lock(3379173675217033995)[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to CreatePlayers (20220519232111)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (3.2ms)[0m  [1m[35mCREATE TABLE "players" ("id" uuid DEFAULT gen_random_uuid() NOT NULL PRIMARY KEY, "name" character varying, "lastname" character varying, "password" character varying, "nickname" character varying, "email" character varying, "token" character varying, "image_id" bigint, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, CONSTRAINT "fk_rails_884bb50f59"
FOREIGN KEY ("image_id")
  REFERENCES "images" ("id")
)[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT pg_advisory_unlock(3379173675217033995)[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (46.4ms)[0m  [1m[35mDROP DATABASE IF EXISTS "card_game_backend_development"[0m
  [1m[35m (12.6ms)[0m  [1m[35mDROP DATABASE IF EXISTS "card_game_backend_test"[0m
  [1m[35m (20.0ms)[0m  [1m[35mCREATE DATABASE "card_game_backend_development" ENCODING = 'unicode'[0m
  [1m[35m (19.6ms)[0m  [1m[35mCREATE DATABASE "card_game_backend_test" ENCODING = 'unicode'[0m
  [1m[35m (2.8ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[35m (2.2ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT pg_try_advisory_lock(3379173675217033995)[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to CreatePlayers (20220519232111)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (2.7ms)[0m  [1m[35mCREATE TABLE "players" ("id" uuid DEFAULT gen_random_uuid() NOT NULL PRIMARY KEY, "name" character varying, "lastname" character varying, "password" character varying, "nickname" character varying, "email" character varying, "token" character varying, "image_id" bigint, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, CONSTRAINT "fk_rails_884bb50f59"
FOREIGN KEY ("image_id")
  REFERENCES "images" ("id")
)[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT pg_advisory_unlock(3379173675217033995)[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT pg_try_advisory_lock(3379173675217033995)[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to CreatePlayers (20220519232111)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (3.4ms)[0m  [1m[35mCREATE TABLE "players" ("id" uuid DEFAULT gen_random_uuid() NOT NULL PRIMARY KEY, "name" character varying, "lastname" character varying, "password" character varying, "nickname" character varying, "email" character varying, "token" character varying, "image_id" bigint, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, CONSTRAINT "fk_rails_884bb50f59"
FOREIGN KEY ("image_id")
  REFERENCES "images" ("id")
)[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT pg_advisory_unlock(3379173675217033995)[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT pg_try_advisory_lock(3379173675217033995)[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to CreatePlayers (20220519232111)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (3.6ms)[0m  [1m[35mCREATE TABLE "players" ("id" uuid DEFAULT gen_random_uuid() NOT NULL PRIMARY KEY, "name" character varying, "lastname" character varying, "password" character varying, "nickname" character varying, "email" character varying, "token" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20220519232111"]]
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateBoards (20220522162722)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (2.3ms)[0m  [1m[35mCREATE TABLE "boards" ("id" uuid DEFAULT gen_random_uuid() NOT NULL PRIMARY KEY, "player_1_id" bigint, "player_2_id" bigint, "board_name" character varying, "turn" integer DEFAULT 0, "winner" integer, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE INDEX "index_boards_on_player_1_id" ON "boards" ("player_1_id")[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE INDEX "index_boards_on_player_2_id" ON "boards" ("player_2_id")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20220522162722"]]
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateImages (20231013175124)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.5ms)[0m  [1m[35mCREATE TABLE "images" ("id" uuid DEFAULT gen_random_uuid() NOT NULL PRIMARY KEY, "player_id" uuid NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, CONSTRAINT "fk_rails_e73d825546"
FOREIGN KEY ("player_id")
  REFERENCES "players" ("id")
)[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE INDEX "index_images_on_player_id" ON "images" ("player_id")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20231013175124"]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateActiveStorageTables (20231013182339)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (2.4ms)[0m  [1m[35mCREATE TABLE "active_storage_blobs" ("id" bigserial primary key, "key" character varying NOT NULL, "filename" character varying NOT NULL, "content_type" character varying, "metadata" text, "service_name" character varying NOT NULL, "byte_size" bigint NOT NULL, "checksum" character varying, "created_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_active_storage_blobs_on_key" ON "active_storage_blobs" ("key")[0m
  [1m[35m (2.1ms)[0m  [1m[35mCREATE TABLE "active_storage_attachments" ("id" bigserial primary key, "name" character varying NOT NULL, "record_type" character varying NOT NULL, "record_id" bigint NOT NULL, "blob_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, CONSTRAINT "fk_rails_c3b3935057"
FOREIGN KEY ("blob_id")
  REFERENCES "active_storage_blobs" ("id")
)[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE INDEX "index_active_storage_attachments_on_blob_id" ON "active_storage_attachments" ("blob_id")[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_active_storage_attachments_uniqueness" ON "active_storage_attachments" ("record_type", "record_id", "name", "blob_id")[0m
  [1m[35m (2.2ms)[0m  [1m[35mCREATE TABLE "active_storage_variant_records" ("id" bigserial primary key, "blob_id" bigint NOT NULL, "variation_digest" character varying NOT NULL, CONSTRAINT "fk_rails_993965df05"
FOREIGN KEY ("blob_id")
  REFERENCES "active_storage_blobs" ("id")
)[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_active_storage_variant_records_uniqueness" ON "active_storage_variant_records" ("blob_id", "variation_digest")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20231013182339"]]
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
Migrating to AddImageReferenceToPlayers (20231013183045)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mALTER TABLE "players" ADD "image_id" bigint NOT NULL[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE INDEX "index_players_on_image_id" ON "players" ("image_id")[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "players" ADD CONSTRAINT "fk_rails_884bb50f59"
FOREIGN KEY ("image_id")
  REFERENCES "images" ("id")
[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_advisory_unlock(3379173675217033995)[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT pg_try_advisory_lock(3379173675217033995)[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to AddImageReferenceToPlayers (20231013183045)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "players" ADD "image_id" bigint NOT NULL[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE INDEX "index_players_on_image_id" ON "players" ("image_id")[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "players" ADD CONSTRAINT "fk_rails_884bb50f59"
FOREIGN KEY ("image_id")
  REFERENCES "images" ("id")
[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT pg_advisory_unlock(3379173675217033995)[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[34mSELECT pg_try_advisory_lock(3379173675217033995)[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to CreatePlayers (20221019232111)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mCREATE TABLE "players" ("id" uuid DEFAULT gen_random_uuid() NOT NULL PRIMARY KEY, "name" character varying, "lastname" character varying, "password" character varying, "nickname" character varying, "email" character varying, "token" character varying, "image_id" uuid, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT pg_advisory_unlock(3379173675217033995)[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (19.0ms)[0m  [1m[35mCREATE DATABASE "card_game_backend_development" ENCODING = 'unicode'[0m
  [1m[35m (19.4ms)[0m  [1m[35mCREATE DATABASE "card_game_backend_test" ENCODING = 'unicode'[0m
  [1m[35m (2.7ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[35m (2.4ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT pg_try_advisory_lock(3379173675217033995)[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to CreateBoards (20220522162722)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (2.6ms)[0m  [1m[35mCREATE TABLE "boards" ("id" uuid DEFAULT gen_random_uuid() NOT NULL PRIMARY KEY, "player_1_id" bigint, "player_2_id" bigint, "board_name" character varying, "turn" integer DEFAULT 0, "winner" integer, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE INDEX "index_boards_on_player_1_id" ON "boards" ("player_1_id")[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE INDEX "index_boards_on_player_2_id" ON "boards" ("player_2_id")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20220522162722"]]
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreatePlayers (20221019232111)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (2.8ms)[0m  [1m[35mCREATE TABLE "players" ("id" uuid DEFAULT gen_random_uuid() NOT NULL PRIMARY KEY, "name" character varying, "lastname" character varying, "password" character varying, "nickname" character varying, "email" character varying, "token" character varying, "image_id" uuid, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "players" ADD CONSTRAINT "fk_rails_884bb50f59"
FOREIGN KEY ("image_id")
  REFERENCES "images" ("id")
 ON DELETE SET NULL[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_advisory_unlock(3379173675217033995)[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT pg_try_advisory_lock(3379173675217033995)[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to CreateActiveStorageTables (20231013182339)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (3.3ms)[0m  [1m[35mCREATE TABLE "active_storage_blobs" ("id" bigserial primary key, "key" character varying NOT NULL, "filename" character varying NOT NULL, "content_type" character varying, "metadata" text, "service_name" character varying NOT NULL, "byte_size" bigint NOT NULL, "checksum" character varying, "created_at" timestamp(6) NOT NULL)[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_active_storage_blobs_on_key" ON "active_storage_blobs" ("key")[0m
  [1m[35m (2.7ms)[0m  [1m[35mCREATE TABLE "active_storage_attachments" ("id" bigserial primary key, "name" character varying NOT NULL, "record_type" character varying NOT NULL, "record_id" bigint NOT NULL, "blob_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, CONSTRAINT "fk_rails_c3b3935057"
FOREIGN KEY ("blob_id")
  REFERENCES "active_storage_blobs" ("id")
)[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE INDEX "index_active_storage_attachments_on_blob_id" ON "active_storage_attachments" ("blob_id")[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_active_storage_attachments_uniqueness" ON "active_storage_attachments" ("record_type", "record_id", "name", "blob_id")[0m
  [1m[35m (3.1ms)[0m  [1m[35mCREATE TABLE "active_storage_variant_records" ("id" bigserial primary key, "blob_id" bigint NOT NULL, "variation_digest" character varying NOT NULL, CONSTRAINT "fk_rails_993965df05"
FOREIGN KEY ("blob_id")
  REFERENCES "active_storage_blobs" ("id")
)[0m
  [1m[35m (1.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_active_storage_variant_records_uniqueness" ON "active_storage_variant_records" ("blob_id", "variation_digest")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20231013182339"]]
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateImages (20231013183935)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (2.1ms)[0m  [1m[35mCREATE TABLE "images" ("id" uuid DEFAULT gen_random_uuid() NOT NULL PRIMARY KEY, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20231013183935"]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreatePlayers (20231013183954)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (2.4ms)[0m  [1m[35mCREATE TABLE "players" ("id" uuid DEFAULT gen_random_uuid() NOT NULL PRIMARY KEY, "name" character varying, "lastname" character varying, "password" character varying, "nickname" character varying, "email" character varying, "token" character varying, "image_id" uuid, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "players" ADD CONSTRAINT "fk_rails_884bb50f59"
FOREIGN KEY ("image_id")
  REFERENCES "images" ("id")
 ON DELETE SET NULL[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20231013183954"]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.3ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "environment"], ["value", "development"], ["created_at", "2023-10-13 18:40:46.348056"], ["updated_at", "2023-10-13 18:40:46.348056"]]
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_advisory_unlock(3379173675217033995)[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Started POST "/players" for ::1 at 2023-10-13 15:40:57 -0300
  [1m[36mActiveRecord::SchemaMigration Pluck (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by PlayersController#create as */*
  Parameters: {"player"=>{"email"=>"lucasdavidmiranda8@hotmail.com", "password"=>"[FILTERED]", "name"=>"lucas", "lastname"=>"miranda", "nickname"=>"enkinaurio"}}
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/players_controller.rb:34:in `create'
  [1m[36mPlayer Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "players" WHERE "players"."nickname" = $1 LIMIT $2[0m  [["nickname", "enkinaurio"], ["LIMIT", 1]]
  ↳ app/controllers/players_controller.rb:34:in `create'
  [1m[36mPlayer Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "players" WHERE "players"."email" = $1 LIMIT $2[0m  [["email", "lucasdavidmiranda8@hotmail.com"], ["LIMIT", 1]]
  ↳ app/controllers/players_controller.rb:34:in `create'
  [1m[36mPlayer Create (0.3ms)[0m  [1m[32mINSERT INTO "players" ("name", "lastname", "password", "nickname", "email", "token", "image_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["name", "lucas"], ["lastname", "miranda"], ["password", "123456#"], ["nickname", "enkinaurio"], ["email", "lucasdavidmiranda8@hotmail.com"], ["token", "cc45f93d-0704-43f5-9b50-d9b431aa7cad"], ["image_id", nil], ["created_at", "2023-10-13 18:40:57.251131"], ["updated_at", "2023-10-13 18:40:57.251131"]]
  ↳ app/controllers/players_controller.rb:34:in `create'
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/players_controller.rb:34:in `create'
Completed 200 OK in 11ms (Views: 0.2ms | ActiveRecord: 3.2ms | Allocations: 12950)


Started POST "/player/login" for ::1 at 2023-10-13 15:41:03 -0300
Processing by PlayersController#login as */*
  Parameters: {"player"=>{"email"=>"lucasdavidmiranda8@hotmail.com", "password"=>"[FILTERED]"}}
  [1m[36mPlayer Load (0.3ms)[0m  [1m[34mSELECT "players".* FROM "players" WHERE ((email = 'lucasdavidmiranda8@hotmail.com' OR nickname = NULL) AND password = '123456#') LIMIT $1[0m  [["LIMIT", 1]]
  ↳ app/controllers/players_controller.rb:18:in `login'
Completed 200 OK in 2ms (Views: 0.1ms | ActiveRecord: 0.3ms | Allocations: 919)


Started PUT "/players/e0362091-2b70-4fb5-ba37-b64991669a84/update_image" for ::1 at 2023-10-13 15:41:17 -0300
Processing by PlayersController#update_image as */*
  Parameters: {"image"=>#<ActionDispatch::Http::UploadedFile:0x00007f81008ee800 @tempfile=#<Tempfile:/tmp/RackMultipart20231013-52276-12c8w3.jpg>, @content_type="image/jpeg", @original_filename="Perfil_LS.jpg", @headers="Content-Disposition: form-data; name=\"image\"; filename=\"Perfil_LS.jpg\"\r\nContent-Type: image/jpeg\r\n">, "player_id"=>"e0362091-2b70-4fb5-ba37-b64991669a84"}
  [1m[36mPlayer Load (0.2ms)[0m  [1m[34mSELECT "players".* FROM "players" WHERE "players"."token" = $1 LIMIT $2[0m  [["token", "cc45f93d-0704-43f5-9b50-d9b431aa7cad"], ["LIMIT", 1]]
  ↳ app/helpers/session_helper.rb:4:in `check_token'
  [1m[36mPlayer Load (0.2ms)[0m  [1m[34mSELECT "players".* FROM "players" WHERE "players"."id" = $1 LIMIT $2[0m  [["id", "e0362091-2b70-4fb5-ba37-b64991669a84"], ["LIMIT", 1]]
  ↳ app/controllers/players_controller.rb:61:in `update_image'
Completed 500 Internal Server Error in 7ms (ActiveRecord: 1.1ms | Allocations: 5054)


  
ActiveRecord::StatementInvalid (PG::UndefinedColumn: ERROR:  column images.player_id does not exist
LINE 1: SELECT "images".* FROM "images" WHERE "images"."player_id" =...
                                              ^
):
  
app/controllers/players_controller.rb:63:in `update_image'
  [1m[36mActiveRecord::SchemaMigration Pluck (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (41.3ms)[0m  [1m[35mDROP DATABASE IF EXISTS "card_game_backend_development"[0m
  [1m[35m (12.8ms)[0m  [1m[35mDROP DATABASE IF EXISTS "card_game_backend_test"[0m
  [1m[35m (19.9ms)[0m  [1m[35mCREATE DATABASE "card_game_backend_development" ENCODING = 'unicode'[0m
  [1m[35m (19.6ms)[0m  [1m[35mCREATE DATABASE "card_game_backend_test" ENCODING = 'unicode'[0m
  [1m[35m (3.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[35m (2.2ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT pg_try_advisory_lock(3379173675217033995)[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to CreateBoards (20220522162722)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (2.7ms)[0m  [1m[35mCREATE TABLE "boards" ("id" uuid DEFAULT gen_random_uuid() NOT NULL PRIMARY KEY, "player_1_id" bigint, "player_2_id" bigint, "board_name" character varying, "turn" integer DEFAULT 0, "winner" integer, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE INDEX "index_boards_on_player_1_id" ON "boards" ("player_1_id")[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE INDEX "index_boards_on_player_2_id" ON "boards" ("player_2_id")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20220522162722"]]
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateActiveStorageTables (20231013182339)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (3.2ms)[0m  [1m[35mCREATE TABLE "active_storage_blobs" ("id" bigserial primary key, "key" character varying NOT NULL, "filename" character varying NOT NULL, "content_type" character varying, "metadata" text, "service_name" character varying NOT NULL, "byte_size" bigint NOT NULL, "checksum" character varying, "created_at" timestamp(6) NOT NULL)[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_active_storage_blobs_on_key" ON "active_storage_blobs" ("key")[0m
  [1m[35m (3.0ms)[0m  [1m[35mCREATE TABLE "active_storage_attachments" ("id" bigserial primary key, "name" character varying NOT NULL, "record_type" character varying NOT NULL, "record_id" bigint NOT NULL, "blob_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, CONSTRAINT "fk_rails_c3b3935057"
FOREIGN KEY ("blob_id")
  REFERENCES "active_storage_blobs" ("id")
)[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE INDEX "index_active_storage_attachments_on_blob_id" ON "active_storage_attachments" ("blob_id")[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_active_storage_attachments_uniqueness" ON "active_storage_attachments" ("record_type", "record_id", "name", "blob_id")[0m
  [1m[35m (2.6ms)[0m  [1m[35mCREATE TABLE "active_storage_variant_records" ("id" bigserial primary key, "blob_id" bigint NOT NULL, "variation_digest" character varying NOT NULL, CONSTRAINT "fk_rails_993965df05"
FOREIGN KEY ("blob_id")
  REFERENCES "active_storage_blobs" ("id")
)[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_active_storage_variant_records_uniqueness" ON "active_storage_variant_records" ("blob_id", "variation_digest")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20231013182339"]]
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateImages (20231013183935)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.4ms)[0m  [1m[35mCREATE TABLE "images" ("id" uuid DEFAULT gen_random_uuid() NOT NULL PRIMARY KEY, "player_id" uuid NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, CONSTRAINT "fk_rails_e73d825546"
FOREIGN KEY ("player_id")
  REFERENCES "players" ("id")
)[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_advisory_unlock(3379173675217033995)[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.2ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "environment"], ["value", "development"], ["created_at", "2023-10-13 18:44:24.802238"], ["updated_at", "2023-10-13 18:44:24.802238"]]
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (49.5ms)[0m  [1m[35mDROP DATABASE IF EXISTS "card_game_backend_development"[0m
  [1m[35m (12.5ms)[0m  [1m[35mDROP DATABASE IF EXISTS "card_game_backend_test"[0m
  [1m[35m (20.8ms)[0m  [1m[35mCREATE DATABASE "card_game_backend_development" ENCODING = 'unicode'[0m
  [1m[35m (20.3ms)[0m  [1m[35mCREATE DATABASE "card_game_backend_test" ENCODING = 'unicode'[0m
  [1m[35m (2.9ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[35m (2.2ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT pg_try_advisory_lock(3379173675217033995)[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to CreateBoards (20220522162722)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (2.2ms)[0m  [1m[35mCREATE TABLE "boards" ("id" uuid DEFAULT gen_random_uuid() NOT NULL PRIMARY KEY, "player_1_id" bigint, "player_2_id" bigint, "board_name" character varying, "turn" integer DEFAULT 0, "winner" integer, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE INDEX "index_boards_on_player_1_id" ON "boards" ("player_1_id")[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE INDEX "index_boards_on_player_2_id" ON "boards" ("player_2_id")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20220522162722"]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateActiveStorageTables (20231013182339)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (2.7ms)[0m  [1m[35mCREATE TABLE "active_storage_blobs" ("id" bigserial primary key, "key" character varying NOT NULL, "filename" character varying NOT NULL, "content_type" character varying, "metadata" text, "service_name" character varying NOT NULL, "byte_size" bigint NOT NULL, "checksum" character varying, "created_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_active_storage_blobs_on_key" ON "active_storage_blobs" ("key")[0m
  [1m[35m (2.5ms)[0m  [1m[35mCREATE TABLE "active_storage_attachments" ("id" bigserial primary key, "name" character varying NOT NULL, "record_type" character varying NOT NULL, "record_id" bigint NOT NULL, "blob_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, CONSTRAINT "fk_rails_c3b3935057"
FOREIGN KEY ("blob_id")
  REFERENCES "active_storage_blobs" ("id")
)[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE INDEX "index_active_storage_attachments_on_blob_id" ON "active_storage_attachments" ("blob_id")[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_active_storage_attachments_uniqueness" ON "active_storage_attachments" ("record_type", "record_id", "name", "blob_id")[0m
  [1m[35m (2.4ms)[0m  [1m[35mCREATE TABLE "active_storage_variant_records" ("id" bigserial primary key, "blob_id" bigint NOT NULL, "variation_digest" character varying NOT NULL, CONSTRAINT "fk_rails_993965df05"
FOREIGN KEY ("blob_id")
  REFERENCES "active_storage_blobs" ("id")
)[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_active_storage_variant_records_uniqueness" ON "active_storage_variant_records" ("blob_id", "variation_digest")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20231013182339"]]
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateImages (20231013183935)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE TABLE "images" ("id" uuid DEFAULT gen_random_uuid() NOT NULL PRIMARY KEY, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20231013183935"]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreatePlayers (20231013183954)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (2.1ms)[0m  [1m[35mCREATE TABLE "players" ("id" uuid DEFAULT gen_random_uuid() NOT NULL PRIMARY KEY, "name" character varying, "lastname" character varying, "password" character varying, "nickname" character varying, "email" character varying, "token" character varying, "image_id" uuid, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "players" ADD CONSTRAINT "fk_rails_884bb50f59"
FOREIGN KEY ("image_id")
  REFERENCES "images" ("id")
 ON DELETE SET NULL[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20231013183954"]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
Migrating to AddPlayerToImages (20231013184330)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mALTER TABLE "images" ADD "player_id" bigint NOT NULL[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE INDEX "index_images_on_player_id" ON "images" ("player_id")[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "images" ADD CONSTRAINT "fk_rails_e73d825546"
FOREIGN KEY ("player_id")
  REFERENCES "players" ("id")
[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_advisory_unlock(3379173675217033995)[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.2ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "environment"], ["value", "development"], ["created_at", "2023-10-13 18:46:07.571481"], ["updated_at", "2023-10-13 18:46:07.571481"]]
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (41.6ms)[0m  [1m[35mDROP DATABASE IF EXISTS "card_game_backend_development"[0m
  [1m[35m (12.5ms)[0m  [1m[35mDROP DATABASE IF EXISTS "card_game_backend_test"[0m
  [1m[35m (19.7ms)[0m  [1m[35mCREATE DATABASE "card_game_backend_development" ENCODING = 'unicode'[0m
  [1m[35m (19.2ms)[0m  [1m[35mCREATE DATABASE "card_game_backend_test" ENCODING = 'unicode'[0m
  [1m[35m (2.8ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[35m (2.2ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT pg_try_advisory_lock(3379173675217033995)[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to CreateBoards (20220522162722)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (2.2ms)[0m  [1m[35mCREATE TABLE "boards" ("id" uuid DEFAULT gen_random_uuid() NOT NULL PRIMARY KEY, "player_1_id" bigint, "player_2_id" bigint, "board_name" character varying, "turn" integer DEFAULT 0, "winner" integer, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE INDEX "index_boards_on_player_1_id" ON "boards" ("player_1_id")[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE INDEX "index_boards_on_player_2_id" ON "boards" ("player_2_id")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20220522162722"]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateActiveStorageTables (20231013182339)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (2.3ms)[0m  [1m[35mCREATE TABLE "active_storage_blobs" ("id" bigserial primary key, "key" character varying NOT NULL, "filename" character varying NOT NULL, "content_type" character varying, "metadata" text, "service_name" character varying NOT NULL, "byte_size" bigint NOT NULL, "checksum" character varying, "created_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_active_storage_blobs_on_key" ON "active_storage_blobs" ("key")[0m
  [1m[35m (2.1ms)[0m  [1m[35mCREATE TABLE "active_storage_attachments" ("id" bigserial primary key, "name" character varying NOT NULL, "record_type" character varying NOT NULL, "record_id" bigint NOT NULL, "blob_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, CONSTRAINT "fk_rails_c3b3935057"
FOREIGN KEY ("blob_id")
  REFERENCES "active_storage_blobs" ("id")
)[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE INDEX "index_active_storage_attachments_on_blob_id" ON "active_storage_attachments" ("blob_id")[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_active_storage_attachments_uniqueness" ON "active_storage_attachments" ("record_type", "record_id", "name", "blob_id")[0m
  [1m[35m (2.0ms)[0m  [1m[35mCREATE TABLE "active_storage_variant_records" ("id" bigserial primary key, "blob_id" bigint NOT NULL, "variation_digest" character varying NOT NULL, CONSTRAINT "fk_rails_993965df05"
FOREIGN KEY ("blob_id")
  REFERENCES "active_storage_blobs" ("id")
)[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_active_storage_variant_records_uniqueness" ON "active_storage_variant_records" ("blob_id", "variation_digest")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20231013182339"]]
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateImages (20231013183935)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE TABLE "images" ("id" uuid DEFAULT gen_random_uuid() NOT NULL PRIMARY KEY, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.4ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20231013183935"]]
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreatePlayers (20231013183954)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (2.1ms)[0m  [1m[35mCREATE TABLE "players" ("id" uuid DEFAULT gen_random_uuid() NOT NULL PRIMARY KEY, "name" character varying, "lastname" character varying, "password" character varying, "nickname" character varying, "email" character varying, "token" character varying, "image_id" uuid, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "players" ADD CONSTRAINT "fk_rails_884bb50f59"
FOREIGN KEY ("image_id")
  REFERENCES "images" ("id")
 ON DELETE SET NULL[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20231013183954"]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
Migrating to AddPlayerToImages (20231013184330)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mALTER TABLE "images" ADD "player_id" bigint NOT NULL[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE INDEX "index_images_on_player_id" ON "images" ("player_id")[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "images" ADD CONSTRAINT "fk_rails_e73d825546"
FOREIGN KEY ("player_id")
  REFERENCES "players" ("id")
[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_advisory_unlock(3379173675217033995)[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT pg_try_advisory_lock(3379173675217033995)[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to AddPlayerToImages (20231013184330)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT pg_advisory_unlock(3379173675217033995)[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT pg_try_advisory_lock(3379173675217033995)[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to CreatePlayers (20231013183954)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "players" DROP CONSTRAINT "fk_rails_884bb50f59"[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE "players"[0m
  [1m[36mActiveRecord::SchemaMigration Delete All (0.4ms)[0m  [1m[31mDELETE FROM "schema_migrations" WHERE "schema_migrations"."version" = $1[0m  [["version", "20231013183954"]]
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_advisory_unlock(3379173675217033995)[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT pg_try_advisory_lock(3379173675217033995)[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to CreatePlayers (20231013183954)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (2.7ms)[0m  [1m[35mCREATE TABLE "players" ("id" uuid DEFAULT gen_random_uuid() NOT NULL PRIMARY KEY, "name" character varying, "lastname" character varying, "password" character varying, "nickname" character varying, "email" character varying, "token" character varying, "image_id" uuid, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "players" ADD CONSTRAINT "fk_rails_884bb50f59"
FOREIGN KEY ("image_id")
  REFERENCES "images" ("id")
 ON DELETE SET NULL[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20231013183954"]]
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
Migrating to AddPlayerToImages (20231013184330)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT pg_advisory_unlock(3379173675217033995)[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.2ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "environment"], ["value", "development"], ["created_at", "2023-10-13 18:50:47.352307"], ["updated_at", "2023-10-13 18:50:47.352307"]]
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (48.7ms)[0m  [1m[35mDROP DATABASE IF EXISTS "card_game_backend_development"[0m
  [1m[35m (12.6ms)[0m  [1m[35mDROP DATABASE IF EXISTS "card_game_backend_test"[0m
  [1m[35m (19.7ms)[0m  [1m[35mCREATE DATABASE "card_game_backend_development" ENCODING = 'unicode'[0m
  [1m[35m (19.0ms)[0m  [1m[35mCREATE DATABASE "card_game_backend_test" ENCODING = 'unicode'[0m
  [1m[35m (2.7ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[35m (2.4ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT pg_try_advisory_lock(3379173675217033995)[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to CreateBoards (20220522162722)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (2.3ms)[0m  [1m[35mCREATE TABLE "boards" ("id" uuid DEFAULT gen_random_uuid() NOT NULL PRIMARY KEY, "player_1_id" bigint, "player_2_id" bigint, "board_name" character varying, "turn" integer DEFAULT 0, "winner" integer, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE INDEX "index_boards_on_player_1_id" ON "boards" ("player_1_id")[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE INDEX "index_boards_on_player_2_id" ON "boards" ("player_2_id")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20220522162722"]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateActiveStorageTables (20231013182339)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (2.8ms)[0m  [1m[35mCREATE TABLE "active_storage_blobs" ("id" bigserial primary key, "key" character varying NOT NULL, "filename" character varying NOT NULL, "content_type" character varying, "metadata" text, "service_name" character varying NOT NULL, "byte_size" bigint NOT NULL, "checksum" character varying, "created_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_active_storage_blobs_on_key" ON "active_storage_blobs" ("key")[0m
  [1m[35m (2.3ms)[0m  [1m[35mCREATE TABLE "active_storage_attachments" ("id" bigserial primary key, "name" character varying NOT NULL, "record_type" character varying NOT NULL, "record_id" bigint NOT NULL, "blob_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, CONSTRAINT "fk_rails_c3b3935057"
FOREIGN KEY ("blob_id")
  REFERENCES "active_storage_blobs" ("id")
)[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE INDEX "index_active_storage_attachments_on_blob_id" ON "active_storage_attachments" ("blob_id")[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_active_storage_attachments_uniqueness" ON "active_storage_attachments" ("record_type", "record_id", "name", "blob_id")[0m
  [1m[35m (2.3ms)[0m  [1m[35mCREATE TABLE "active_storage_variant_records" ("id" bigserial primary key, "blob_id" bigint NOT NULL, "variation_digest" character varying NOT NULL, CONSTRAINT "fk_rails_993965df05"
FOREIGN KEY ("blob_id")
  REFERENCES "active_storage_blobs" ("id")
)[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_active_storage_variant_records_uniqueness" ON "active_storage_variant_records" ("blob_id", "variation_digest")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20231013182339"]]
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateImages (20231013183935)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE TABLE "images" ("id" uuid DEFAULT gen_random_uuid() NOT NULL PRIMARY KEY, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20231013183935"]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreatePlayers (20231013183954)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (2.2ms)[0m  [1m[35mCREATE TABLE "players" ("id" uuid DEFAULT gen_random_uuid() NOT NULL PRIMARY KEY, "name" character varying, "lastname" character varying, "password" character varying, "nickname" character varying, "email" character varying, "token" character varying, "image_id" uuid, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "players" ADD CONSTRAINT "fk_rails_884bb50f59"
FOREIGN KEY ("image_id")
  REFERENCES "images" ("id")
 ON DELETE SET NULL[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20231013183954"]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
Migrating to AddPlayerToImages (20231013184330)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mALTER TABLE "images" ADD "player_id" uuid NOT NULL[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "images" ADD CONSTRAINT "fk_rails_e73d825546"
FOREIGN KEY ("player_id")
  REFERENCES "players" ("id")
 ON DELETE CASCADE[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20231013184330"]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.2ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "environment"], ["value", "development"], ["created_at", "2023-10-13 18:51:04.678851"], ["updated_at", "2023-10-13 18:51:04.678851"]]
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_advisory_unlock(3379173675217033995)[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Started POST "/players" for ::1 at 2023-10-13 15:51:23 -0300
  [1m[36mActiveRecord::SchemaMigration Pluck (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by PlayersController#create as */*
  Parameters: {"player"=>{"email"=>"lucasdavidmiranda8@hotmail.com", "password"=>"[FILTERED]", "name"=>"lucas", "lastname"=>"miranda", "nickname"=>"enkinaurio"}}
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/players_controller.rb:34:in `create'
  [1m[36mPlayer Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "players" WHERE "players"."nickname" = $1 LIMIT $2[0m  [["nickname", "enkinaurio"], ["LIMIT", 1]]
  ↳ app/controllers/players_controller.rb:34:in `create'
  [1m[36mPlayer Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "players" WHERE "players"."email" = $1 LIMIT $2[0m  [["email", "lucasdavidmiranda8@hotmail.com"], ["LIMIT", 1]]
  ↳ app/controllers/players_controller.rb:34:in `create'
  [1m[36mPlayer Create (0.3ms)[0m  [1m[32mINSERT INTO "players" ("name", "lastname", "password", "nickname", "email", "token", "image_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["name", "lucas"], ["lastname", "miranda"], ["password", "123456#"], ["nickname", "enkinaurio"], ["email", "lucasdavidmiranda8@hotmail.com"], ["token", "9884b51a-17db-4772-bc07-ed1bad870c2a"], ["image_id", nil], ["created_at", "2023-10-13 18:51:23.136657"], ["updated_at", "2023-10-13 18:51:23.136657"]]
  ↳ app/controllers/players_controller.rb:34:in `create'
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/players_controller.rb:34:in `create'
Completed 200 OK in 10ms (Views: 0.2ms | ActiveRecord: 2.9ms | Allocations: 12948)


Started POST "/player/login" for ::1 at 2023-10-13 15:51:28 -0300
Processing by PlayersController#login as */*
  Parameters: {"player"=>{"email"=>"lucasdavidmiranda8@hotmail.com", "password"=>"[FILTERED]"}}
  [1m[36mPlayer Load (0.3ms)[0m  [1m[34mSELECT "players".* FROM "players" WHERE ((email = 'lucasdavidmiranda8@hotmail.com' OR nickname = NULL) AND password = '123456#') LIMIT $1[0m  [["LIMIT", 1]]
  ↳ app/controllers/players_controller.rb:18:in `login'
Completed 200 OK in 2ms (Views: 0.1ms | ActiveRecord: 0.3ms | Allocations: 919)


Started PUT "/players/4dc86b4e-6e3e-4f70-b439-cffe72b513ec/update_image" for ::1 at 2023-10-13 15:51:42 -0300
Processing by PlayersController#update_image as */*
  Parameters: {"image"=>#<ActionDispatch::Http::UploadedFile:0x00007fd79190b508 @tempfile=#<Tempfile:/tmp/RackMultipart20231013-54465-o5ocw5.jpg>, @content_type="image/jpeg", @original_filename="Perfil_LS.jpg", @headers="Content-Disposition: form-data; name=\"image\"; filename=\"Perfil_LS.jpg\"\r\nContent-Type: image/jpeg\r\n">, "player_id"=>"4dc86b4e-6e3e-4f70-b439-cffe72b513ec"}
  [1m[36mPlayer Load (0.2ms)[0m  [1m[34mSELECT "players".* FROM "players" WHERE "players"."token" = $1 LIMIT $2[0m  [["token", "9884b51a-17db-4772-bc07-ed1bad870c2a"], ["LIMIT", 1]]
  ↳ app/helpers/session_helper.rb:4:in `check_token'
  [1m[36mPlayer Load (0.2ms)[0m  [1m[34mSELECT "players".* FROM "players" WHERE "players"."id" = $1 LIMIT $2[0m  [["id", "4dc86b4e-6e3e-4f70-b439-cffe72b513ec"], ["LIMIT", 1]]
  ↳ app/controllers/players_controller.rb:61:in `update_image'
  [1m[36mImage Load (0.2ms)[0m  [1m[34mSELECT "images".* FROM "images" WHERE "images"."player_id" = $1 LIMIT $2[0m  [["player_id", "4dc86b4e-6e3e-4f70-b439-cffe72b513ec"], ["LIMIT", 1]]
  ↳ app/controllers/players_controller.rb:63:in `update_image'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/players_controller.rb:70:in `update_image'
  [1m[36mImage Create (0.5ms)[0m  [1m[32mINSERT INTO "images" ("created_at", "updated_at", "player_id") VALUES ($1, $2, $3) RETURNING "id"[0m  [["created_at", "2023-10-13 18:51:42.376392"], ["updated_at", "2023-10-13 18:51:42.376392"], ["player_id", "4dc86b4e-6e3e-4f70-b439-cffe72b513ec"]]
  ↳ app/controllers/players_controller.rb:70:in `update_image'
  [1m[36mActiveStorage::Blob Load (0.6ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" INNER JOIN "active_storage_attachments" ON "active_storage_blobs"."id" = "active_storage_attachments"."blob_id" WHERE "active_storage_attachments"."record_id" = $1 AND "active_storage_attachments"."record_type" = $2 AND "active_storage_attachments"."name" = $3 LIMIT $4[0m  [["record_id", 4825], ["record_type", "Image"], ["name", "file"], ["LIMIT", 1]]
  ↳ app/controllers/players_controller.rb:70:in `update_image'
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = $1 AND "active_storage_attachments"."record_type" = $2 AND "active_storage_attachments"."name" = $3 LIMIT $4[0m  [["record_id", 4825], ["record_type", "Image"], ["name", "file"], ["LIMIT", 1]]
  ↳ app/controllers/players_controller.rb:70:in `update_image'
  [1m[36mActiveStorage::Blob Create (0.4ms)[0m  [1m[32mINSERT INTO "active_storage_blobs" ("key", "filename", "content_type", "metadata", "service_name", "byte_size", "checksum", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["key", "c5dhwtx060ac2aja7qbdi3y1ijr3"], ["filename", "Perfil_LS.jpg"], ["content_type", "image/jpeg"], ["metadata", "{\"identified\":true}"], ["service_name", "local"], ["byte_size", 41525], ["checksum", "nI/KLUGrrXLsuJv61FGHcA=="], ["created_at", "2023-10-13 18:51:42.398435"]]
  ↳ app/controllers/players_controller.rb:70:in `update_image'
  [1m[36mActiveStorage::Attachment Create (0.4ms)[0m  [1m[32mINSERT INTO "active_storage_attachments" ("name", "record_type", "record_id", "blob_id", "created_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "file"], ["record_type", "Image"], ["record_id", 4825], ["blob_id", 1], ["created_at", "2023-10-13 18:51:42.400132"]]
  ↳ app/controllers/players_controller.rb:70:in `update_image'
  [1m[36mImage Update (0.2ms)[0m  [1m[33mUPDATE "images" SET "updated_at" = $1 WHERE "images"."id" = $2[0m  [["updated_at", "2023-10-13 18:51:42.401465"], ["id", "4825e432-c0a3-4bfe-a0e3-b2c4719cd2f1"]]
  ↳ app/controllers/players_controller.rb:70:in `update_image'
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/players_controller.rb:70:in `update_image'
[36m  Disk Storage (0.4ms) [0m[32mUploaded file to key: c5dhwtx060ac2aja7qbdi3y1ijr3 (checksum: nI/KLUGrrXLsuJv61FGHcA==)[0m
[ActiveJob] Enqueued ActiveStorage::AnalyzeJob (Job ID: 7d9648b9-8c79-4889-b8a4-2cea5ec98a33) to Async(default) with arguments: #<GlobalID:0x00007fd78d9ef360 @uri=#<URI::GID gid://cardgame-ruby/ActiveStorage::Blob/1>>
[ActiveJob] [ActiveStorage::AnalyzeJob] [7d9648b9-8c79-4889-b8a4-2cea5ec98a33]   [1m[36mActiveStorage::Blob Load (0.3ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
[ActiveJob] [ActiveStorage::AnalyzeJob] [7d9648b9-8c79-4889-b8a4-2cea5ec98a33] Performing ActiveStorage::AnalyzeJob (Job ID: 7d9648b9-8c79-4889-b8a4-2cea5ec98a33) from Async(default) enqueued at 2023-10-13T18:51:42Z with arguments: #<GlobalID:0x00007fd78fc463a0 @uri=#<URI::GID gid://cardgame-ruby/ActiveStorage::Blob/1>>
[ActiveJob] [ActiveStorage::AnalyzeJob] [7d9648b9-8c79-4889-b8a4-2cea5ec98a33] Skipping image analysis because the ruby-vips gem isn't installed
[ActiveJob] [ActiveStorage::AnalyzeJob] [7d9648b9-8c79-4889-b8a4-2cea5ec98a33]   [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [7d9648b9-8c79-4889-b8a4-2cea5ec98a33]   [1m[36mActiveStorage::Blob Update (0.9ms)[0m  [1m[33mUPDATE "active_storage_blobs" SET "metadata" = $1 WHERE "active_storage_blobs"."id" = $2[0m  [["metadata", "{\"identified\":true,\"analyzed\":true}"], ["id", 1]]
[ActiveJob] [ActiveStorage::AnalyzeJob] [7d9648b9-8c79-4889-b8a4-2cea5ec98a33]   [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [7d9648b9-8c79-4889-b8a4-2cea5ec98a33] Performed ActiveStorage::AnalyzeJob (Job ID: 7d9648b9-8c79-4889-b8a4-2cea5ec98a33) from Async(default) in 33.1ms
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/players_controller.rb:74:in `update_image'
  [1m[36mPlayer Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "players" WHERE "players"."nickname" = $1 AND "players"."id" != $2 LIMIT $3[0m  [["nickname", "enkinaurio"], ["id", "4dc86b4e-6e3e-4f70-b439-cffe72b513ec"], ["LIMIT", 1]]
  ↳ app/controllers/players_controller.rb:74:in `update_image'
  [1m[36mPlayer Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "players" WHERE "players"."email" = $1 AND "players"."id" != $2 LIMIT $3[0m  [["email", "lucasdavidmiranda8@hotmail.com"], ["id", "4dc86b4e-6e3e-4f70-b439-cffe72b513ec"], ["LIMIT", 1]]
  ↳ app/controllers/players_controller.rb:74:in `update_image'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/players_controller.rb:74:in `update_image'
Completed 500 Internal Server Error in 65374ms (ActiveRecord: 9.8ms | Allocations: 121418)


  
ArgumentError (Missing host to link to! Please provide the :host parameter, set default_url_options[:host], or set :only_path to true):
  
app/models/image.rb:20:in `full_url'
app/controllers/players_controller.rb:75:in `update_image'
Started PUT "/players/4dc86b4e-6e3e-4f70-b439-cffe72b513ec/update_image" for ::1 at 2023-10-13 15:52:58 -0300
  [1m[36mActiveRecord::SchemaMigration Pluck (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by PlayersController#update_image as */*
  Parameters: {"image"=>#<ActionDispatch::Http::UploadedFile:0x00007fb85efec540 @tempfile=#<Tempfile:/tmp/RackMultipart20231013-54633-qui3qp.jpg>, @content_type="image/jpeg", @original_filename="Perfil_LS.jpg", @headers="Content-Disposition: form-data; name=\"image\"; filename=\"Perfil_LS.jpg\"\r\nContent-Type: image/jpeg\r\n">, "player_id"=>"4dc86b4e-6e3e-4f70-b439-cffe72b513ec"}
  [1m[36mPlayer Load (0.2ms)[0m  [1m[34mSELECT "players".* FROM "players" WHERE "players"."token" = $1 LIMIT $2[0m  [["token", "9884b51a-17db-4772-bc07-ed1bad870c2a"], ["LIMIT", 1]]
  ↳ app/helpers/session_helper.rb:4:in `check_token'
  [1m[36mPlayer Load (0.2ms)[0m  [1m[34mSELECT "players".* FROM "players" WHERE "players"."id" = $1 LIMIT $2[0m  [["id", "4dc86b4e-6e3e-4f70-b439-cffe72b513ec"], ["LIMIT", 1]]
  ↳ app/controllers/players_controller.rb:61:in `update_image'
  [1m[36mImage Load (0.2ms)[0m  [1m[34mSELECT "images".* FROM "images" WHERE "images"."player_id" = $1 LIMIT $2[0m  [["player_id", "4dc86b4e-6e3e-4f70-b439-cffe72b513ec"], ["LIMIT", 1]]
  ↳ app/controllers/players_controller.rb:63:in `update_image'
  [1m[36mActiveStorage::Attachment Load (0.3ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = $1 AND "active_storage_attachments"."record_type" = $2 AND "active_storage_attachments"."name" = $3 LIMIT $4[0m  [["record_id", 4825], ["record_type", "Image"], ["name", "file"], ["LIMIT", 1]]
  ↳ app/controllers/players_controller.rb:64:in `update_image'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/players_controller.rb:64:in `update_image'
  [1m[36mActiveStorage::Attachment Destroy (0.2ms)[0m  [1m[31mDELETE FROM "active_storage_attachments" WHERE "active_storage_attachments"."id" = $1[0m  [["id", 1]]
  ↳ app/controllers/players_controller.rb:64:in `update_image'
  [1m[36mImage Load (0.1ms)[0m  [1m[34mSELECT "images".* FROM "images" WHERE "images"."id" = $1 LIMIT $2[0m  [["id", nil], ["LIMIT", 1]]
  ↳ app/controllers/players_controller.rb:64:in `update_image'
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/players_controller.rb:64:in `update_image'
  [1m[36mActiveStorage::Blob Load (0.2ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/players_controller.rb:64:in `update_image'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/players_controller.rb:64:in `update_image'
  [1m[36mActiveStorage::Attachment Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "active_storage_attachments" WHERE "active_storage_attachments"."blob_id" = $1 LIMIT $2[0m  [["blob_id", 1], ["LIMIT", 1]]
  ↳ app/controllers/players_controller.rb:64:in `update_image'
  [1m[36mActiveStorage::VariantRecord Load (0.2ms)[0m  [1m[34mSELECT "active_storage_variant_records".* FROM "active_storage_variant_records" WHERE "active_storage_variant_records"."blob_id" = $1[0m  [["blob_id", 1]]
  ↳ app/controllers/players_controller.rb:64:in `update_image'
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = $1 AND "active_storage_attachments"."record_type" = $2 AND "active_storage_attachments"."name" = $3 LIMIT $4[0m  [["record_id", 1], ["record_type", "ActiveStorage::Blob"], ["name", "preview_image"], ["LIMIT", 1]]
  ↳ app/controllers/players_controller.rb:64:in `update_image'
  [1m[36mActiveStorage::Blob Destroy (0.3ms)[0m  [1m[31mDELETE FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = $1[0m  [["id", 1]]
  ↳ app/controllers/players_controller.rb:64:in `update_image'
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/players_controller.rb:64:in `update_image'
[36m  Disk Storage (0.1ms) [0m[31mDeleted file from key: c5dhwtx060ac2aja7qbdi3y1ijr3[0m
[36m  Disk Storage (0.0ms) [0m[31mDeleted files by key prefix: variants/c5dhwtx060ac2aja7qbdi3y1ijr3/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/players_controller.rb:65:in `update_image'
  [1m[36mActiveStorage::Blob Load (0.3ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" INNER JOIN "active_storage_attachments" ON "active_storage_blobs"."id" = "active_storage_attachments"."blob_id" WHERE "active_storage_attachments"."record_id" = $1 AND "active_storage_attachments"."record_type" = $2 AND "active_storage_attachments"."name" = $3 LIMIT $4[0m  [["record_id", 4825], ["record_type", "Image"], ["name", "file"], ["LIMIT", 1]]
  ↳ app/controllers/players_controller.rb:65:in `update_image'
  [1m[36mActiveStorage::Blob Create (0.2ms)[0m  [1m[32mINSERT INTO "active_storage_blobs" ("key", "filename", "content_type", "metadata", "service_name", "byte_size", "checksum", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["key", "3nodttt7xt95f4bhx4i4kcbcq767"], ["filename", "Perfil_LS.jpg"], ["content_type", "image/jpeg"], ["metadata", "{\"identified\":true}"], ["service_name", "local"], ["byte_size", 41525], ["checksum", "nI/KLUGrrXLsuJv61FGHcA=="], ["created_at", "2023-10-13 18:52:58.619052"]]
  ↳ app/controllers/players_controller.rb:65:in `update_image'
  [1m[36mActiveStorage::Attachment Create (0.2ms)[0m  [1m[32mINSERT INTO "active_storage_attachments" ("name", "record_type", "record_id", "blob_id", "created_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "file"], ["record_type", "Image"], ["record_id", 4825], ["blob_id", 2], ["created_at", "2023-10-13 18:52:58.620105"]]
  ↳ app/controllers/players_controller.rb:65:in `update_image'
  [1m[36mImage Update (0.2ms)[0m  [1m[33mUPDATE "images" SET "updated_at" = $1 WHERE "images"."id" = $2[0m  [["updated_at", "2023-10-13 18:52:58.620828"], ["id", "4825e432-c0a3-4bfe-a0e3-b2c4719cd2f1"]]
  ↳ app/controllers/players_controller.rb:65:in `update_image'
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/players_controller.rb:65:in `update_image'
[36m  Disk Storage (0.4ms) [0m[32mUploaded file to key: 3nodttt7xt95f4bhx4i4kcbcq767 (checksum: nI/KLUGrrXLsuJv61FGHcA==)[0m
[ActiveJob] Enqueued ActiveStorage::AnalyzeJob (Job ID: 3b660045-b709-4467-b9e1-ec4225dbf9d8) to Async(default) with arguments: #<GlobalID:0x00007fb85cf5d888 @uri=#<URI::GID gid://cardgame-ruby/ActiveStorage::Blob/2>>
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/players_controller.rb:70:in `update_image'
  [1m[36mPlayer Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "players" WHERE "players"."nickname" = $1 AND "players"."id" != $2 LIMIT $3[0m  [["nickname", "enkinaurio"], ["id", "4dc86b4e-6e3e-4f70-b439-cffe72b513ec"], ["LIMIT", 1]]
  ↳ app/controllers/players_controller.rb:70:in `update_image'
  [1m[36mPlayer Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "players" WHERE "players"."email" = $1 AND "players"."id" != $2 LIMIT $3[0m  [["email", "lucasdavidmiranda8@hotmail.com"], ["id", "4dc86b4e-6e3e-4f70-b439-cffe72b513ec"], ["LIMIT", 1]]
  ↳ app/controllers/players_controller.rb:70:in `update_image'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/players_controller.rb:70:in `update_image'
Completed 500 Internal Server Error in 61ms (ActiveRecord: 13.9ms | Allocations: 59532)


  
ArgumentError (Missing host to link to! Please provide the :host parameter, set default_url_options[:host], or set :only_path to true):
  
app/models/image.rb:20:in `full_url'
app/controllers/players_controller.rb:71:in `update_image'
[ActiveJob] [ActiveStorage::AnalyzeJob] [3b660045-b709-4467-b9e1-ec4225dbf9d8]   [1m[36mActiveStorage::Blob Load (0.2ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[ActiveJob] [ActiveStorage::AnalyzeJob] [3b660045-b709-4467-b9e1-ec4225dbf9d8] Performing ActiveStorage::AnalyzeJob (Job ID: 3b660045-b709-4467-b9e1-ec4225dbf9d8) from Async(default) enqueued at 2023-10-13T18:52:58Z with arguments: #<GlobalID:0x00007fb860d5a208 @uri=#<URI::GID gid://cardgame-ruby/ActiveStorage::Blob/2>>
[ActiveJob] [ActiveStorage::AnalyzeJob] [3b660045-b709-4467-b9e1-ec4225dbf9d8] Skipping image analysis because the ruby-vips gem isn't installed
[ActiveJob] [ActiveStorage::AnalyzeJob] [3b660045-b709-4467-b9e1-ec4225dbf9d8]   [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [3b660045-b709-4467-b9e1-ec4225dbf9d8]   [1m[36mActiveStorage::Blob Update (0.2ms)[0m  [1m[33mUPDATE "active_storage_blobs" SET "metadata" = $1 WHERE "active_storage_blobs"."id" = $2[0m  [["metadata", "{\"identified\":true,\"analyzed\":true}"], ["id", 2]]
[ActiveJob] [ActiveStorage::AnalyzeJob] [3b660045-b709-4467-b9e1-ec4225dbf9d8]   [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [3b660045-b709-4467-b9e1-ec4225dbf9d8] Performed ActiveStorage::AnalyzeJob (Job ID: 3b660045-b709-4467-b9e1-ec4225dbf9d8) from Async(default) in 7.05ms
Started PUT "/players/4dc86b4e-6e3e-4f70-b439-cffe72b513ec/update_image" for ::1 at 2023-10-13 15:59:06 -0300
  [1m[36mActiveRecord::SchemaMigration Pluck (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by PlayersController#update_image as */*
  Parameters: {"image"=>#<ActionDispatch::Http::UploadedFile:0x00007fb86016c590 @tempfile=#<Tempfile:/tmp/RackMultipart20231013-54633-8t4c3r.jpg>, @content_type="image/jpeg", @original_filename="Perfil_LS.jpg", @headers="Content-Disposition: form-data; name=\"image\"; filename=\"Perfil_LS.jpg\"\r\nContent-Type: image/jpeg\r\n">, "player_id"=>"4dc86b4e-6e3e-4f70-b439-cffe72b513ec"}
  [1m[36mPlayer Load (0.2ms)[0m  [1m[34mSELECT "players".* FROM "players" WHERE "players"."token" = $1 LIMIT $2[0m  [["token", "9884b51a-17db-4772-bc07-ed1bad870c2a"], ["LIMIT", 1]]
  ↳ app/helpers/session_helper.rb:4:in `check_token'
  [1m[36mPlayer Load (0.1ms)[0m  [1m[34mSELECT "players".* FROM "players" WHERE "players"."id" = $1 LIMIT $2[0m  [["id", "4dc86b4e-6e3e-4f70-b439-cffe72b513ec"], ["LIMIT", 1]]
  ↳ app/controllers/players_controller.rb:61:in `update_image'
  [1m[36mImage Load (0.1ms)[0m  [1m[34mSELECT "images".* FROM "images" WHERE "images"."player_id" = $1 LIMIT $2[0m  [["player_id", "4dc86b4e-6e3e-4f70-b439-cffe72b513ec"], ["LIMIT", 1]]
  ↳ app/controllers/players_controller.rb:63:in `update_image'
  [1m[36mActiveStorage::Attachment Load (0.2ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = $1 AND "active_storage_attachments"."record_type" = $2 AND "active_storage_attachments"."name" = $3 LIMIT $4[0m  [["record_id", 4825], ["record_type", "Image"], ["name", "file"], ["LIMIT", 1]]
  ↳ app/controllers/players_controller.rb:64:in `update_image'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/players_controller.rb:64:in `update_image'
  [1m[36mActiveStorage::Attachment Destroy (0.2ms)[0m  [1m[31mDELETE FROM "active_storage_attachments" WHERE "active_storage_attachments"."id" = $1[0m  [["id", 2]]
  ↳ app/controllers/players_controller.rb:64:in `update_image'
  [1m[36mImage Load (0.1ms)[0m  [1m[34mSELECT "images".* FROM "images" WHERE "images"."id" = $1 LIMIT $2[0m  [["id", nil], ["LIMIT", 1]]
  ↳ app/controllers/players_controller.rb:64:in `update_image'
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/players_controller.rb:64:in `update_image'
  [1m[36mActiveStorage::Blob Load (0.2ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/players_controller.rb:64:in `update_image'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/players_controller.rb:64:in `update_image'
  [1m[36mActiveStorage::Attachment Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "active_storage_attachments" WHERE "active_storage_attachments"."blob_id" = $1 LIMIT $2[0m  [["blob_id", 2], ["LIMIT", 1]]
  ↳ app/controllers/players_controller.rb:64:in `update_image'
  [1m[36mActiveStorage::VariantRecord Load (0.1ms)[0m  [1m[34mSELECT "active_storage_variant_records".* FROM "active_storage_variant_records" WHERE "active_storage_variant_records"."blob_id" = $1[0m  [["blob_id", 2]]
  ↳ app/controllers/players_controller.rb:64:in `update_image'
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = $1 AND "active_storage_attachments"."record_type" = $2 AND "active_storage_attachments"."name" = $3 LIMIT $4[0m  [["record_id", 2], ["record_type", "ActiveStorage::Blob"], ["name", "preview_image"], ["LIMIT", 1]]
  ↳ app/controllers/players_controller.rb:64:in `update_image'
  [1m[36mActiveStorage::Blob Destroy (0.3ms)[0m  [1m[31mDELETE FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = $1[0m  [["id", 2]]
  ↳ app/controllers/players_controller.rb:64:in `update_image'
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/players_controller.rb:64:in `update_image'
[36m  Disk Storage (0.1ms) [0m[31mDeleted file from key: 3nodttt7xt95f4bhx4i4kcbcq767[0m
[36m  Disk Storage (0.0ms) [0m[31mDeleted files by key prefix: variants/3nodttt7xt95f4bhx4i4kcbcq767/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/players_controller.rb:65:in `update_image'
  [1m[36mActiveStorage::Blob Load (0.3ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" INNER JOIN "active_storage_attachments" ON "active_storage_blobs"."id" = "active_storage_attachments"."blob_id" WHERE "active_storage_attachments"."record_id" = $1 AND "active_storage_attachments"."record_type" = $2 AND "active_storage_attachments"."name" = $3 LIMIT $4[0m  [["record_id", 4825], ["record_type", "Image"], ["name", "file"], ["LIMIT", 1]]
  ↳ app/controllers/players_controller.rb:65:in `update_image'
  [1m[36mActiveStorage::Blob Create (0.2ms)[0m  [1m[32mINSERT INTO "active_storage_blobs" ("key", "filename", "content_type", "metadata", "service_name", "byte_size", "checksum", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["key", "tzwmihf26dckj40lzj78rf9mobsd"], ["filename", "Perfil_LS.jpg"], ["content_type", "image/jpeg"], ["metadata", "{\"identified\":true}"], ["service_name", "local"], ["byte_size", 41525], ["checksum", "nI/KLUGrrXLsuJv61FGHcA=="], ["created_at", "2023-10-13 18:59:06.135201"]]
  ↳ app/controllers/players_controller.rb:65:in `update_image'
  [1m[36mActiveStorage::Attachment Create (0.2ms)[0m  [1m[32mINSERT INTO "active_storage_attachments" ("name", "record_type", "record_id", "blob_id", "created_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "file"], ["record_type", "Image"], ["record_id", 4825], ["blob_id", 3], ["created_at", "2023-10-13 18:59:06.136467"]]
  ↳ app/controllers/players_controller.rb:65:in `update_image'
  [1m[36mImage Update (0.2ms)[0m  [1m[33mUPDATE "images" SET "updated_at" = $1 WHERE "images"."id" = $2[0m  [["updated_at", "2023-10-13 18:59:06.137401"], ["id", "4825e432-c0a3-4bfe-a0e3-b2c4719cd2f1"]]
  ↳ app/controllers/players_controller.rb:65:in `update_image'
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/players_controller.rb:65:in `update_image'
[36m  Disk Storage (0.4ms) [0m[32mUploaded file to key: tzwmihf26dckj40lzj78rf9mobsd (checksum: nI/KLUGrrXLsuJv61FGHcA==)[0m
[ActiveJob] Enqueued ActiveStorage::AnalyzeJob (Job ID: a0e4f975-9785-437e-be70-a2a5aa2fe99a) to Async(default) with arguments: #<GlobalID:0x00007fb8602e1268 @uri=#<URI::GID gid://cardgame-ruby/ActiveStorage::Blob/3>>
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/players_controller.rb:70:in `update_image'
  [1m[36mPlayer Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "players" WHERE "players"."nickname" = $1 AND "players"."id" != $2 LIMIT $3[0m  [["nickname", "enkinaurio"], ["id", "4dc86b4e-6e3e-4f70-b439-cffe72b513ec"], ["LIMIT", 1]]
  ↳ app/controllers/players_controller.rb:70:in `update_image'
  [1m[36mPlayer Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "players" WHERE "players"."email" = $1 AND "players"."id" != $2 LIMIT $3[0m  [["email", "lucasdavidmiranda8@hotmail.com"], ["id", "4dc86b4e-6e3e-4f70-b439-cffe72b513ec"], ["LIMIT", 1]]
  ↳ app/controllers/players_controller.rb:70:in `update_image'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/players_controller.rb:70:in `update_image'
Completed 500 Internal Server Error in 24ms (ActiveRecord: 5.3ms | Allocations: 19415)


  
ArgumentError (Missing host to link to! Please provide the :host parameter, set default_url_options[:host], or set :only_path to true):
  
app/models/image.rb:20:in `full_url'
app/controllers/players_controller.rb:71:in `update_image'
[ActiveJob] [ActiveStorage::AnalyzeJob] [a0e4f975-9785-437e-be70-a2a5aa2fe99a]   [1m[36mActiveStorage::Blob Load (0.2ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
[ActiveJob] [ActiveStorage::AnalyzeJob] [a0e4f975-9785-437e-be70-a2a5aa2fe99a] Performing ActiveStorage::AnalyzeJob (Job ID: a0e4f975-9785-437e-be70-a2a5aa2fe99a) from Async(default) enqueued at 2023-10-13T18:59:06Z with arguments: #<GlobalID:0x00007fb85e948900 @uri=#<URI::GID gid://cardgame-ruby/ActiveStorage::Blob/3>>
[ActiveJob] [ActiveStorage::AnalyzeJob] [a0e4f975-9785-437e-be70-a2a5aa2fe99a] Skipping image analysis because the ruby-vips gem isn't installed
[ActiveJob] [ActiveStorage::AnalyzeJob] [a0e4f975-9785-437e-be70-a2a5aa2fe99a]   [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [a0e4f975-9785-437e-be70-a2a5aa2fe99a]   [1m[36mActiveStorage::Blob Update (0.2ms)[0m  [1m[33mUPDATE "active_storage_blobs" SET "metadata" = $1 WHERE "active_storage_blobs"."id" = $2[0m  [["metadata", "{\"identified\":true,\"analyzed\":true}"], ["id", 3]]
[ActiveJob] [ActiveStorage::AnalyzeJob] [a0e4f975-9785-437e-be70-a2a5aa2fe99a]   [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [a0e4f975-9785-437e-be70-a2a5aa2fe99a] Performed ActiveStorage::AnalyzeJob (Job ID: a0e4f975-9785-437e-be70-a2a5aa2fe99a) from Async(default) in 6.75ms
Started PUT "/players/4dc86b4e-6e3e-4f70-b439-cffe72b513ec/update_image" for ::1 at 2023-10-13 15:59:16 -0300
  [1m[36mActiveRecord::SchemaMigration Pluck (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by PlayersController#update_image as */*
  Parameters: {"image"=>#<ActionDispatch::Http::UploadedFile:0x00007f30018c4f78 @tempfile=#<Tempfile:/tmp/RackMultipart20231013-55380-9jsdh2.jpg>, @content_type="image/jpeg", @original_filename="Perfil_LS.jpg", @headers="Content-Disposition: form-data; name=\"image\"; filename=\"Perfil_LS.jpg\"\r\nContent-Type: image/jpeg\r\n">, "player_id"=>"4dc86b4e-6e3e-4f70-b439-cffe72b513ec"}
  [1m[36mPlayer Load (0.2ms)[0m  [1m[34mSELECT "players".* FROM "players" WHERE "players"."token" = $1 LIMIT $2[0m  [["token", "9884b51a-17db-4772-bc07-ed1bad870c2a"], ["LIMIT", 1]]
  ↳ app/helpers/session_helper.rb:4:in `check_token'
  [1m[36mPlayer Load (0.1ms)[0m  [1m[34mSELECT "players".* FROM "players" WHERE "players"."id" = $1 LIMIT $2[0m  [["id", "4dc86b4e-6e3e-4f70-b439-cffe72b513ec"], ["LIMIT", 1]]
  ↳ app/controllers/players_controller.rb:61:in `update_image'
  [1m[36mImage Load (0.2ms)[0m  [1m[34mSELECT "images".* FROM "images" WHERE "images"."player_id" = $1 LIMIT $2[0m  [["player_id", "4dc86b4e-6e3e-4f70-b439-cffe72b513ec"], ["LIMIT", 1]]
  ↳ app/controllers/players_controller.rb:63:in `update_image'
  [1m[36mActiveStorage::Attachment Load (0.2ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = $1 AND "active_storage_attachments"."record_type" = $2 AND "active_storage_attachments"."name" = $3 LIMIT $4[0m  [["record_id", 4825], ["record_type", "Image"], ["name", "file"], ["LIMIT", 1]]
  ↳ app/controllers/players_controller.rb:64:in `update_image'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/players_controller.rb:64:in `update_image'
  [1m[36mActiveStorage::Attachment Destroy (0.2ms)[0m  [1m[31mDELETE FROM "active_storage_attachments" WHERE "active_storage_attachments"."id" = $1[0m  [["id", 3]]
  ↳ app/controllers/players_controller.rb:64:in `update_image'
  [1m[36mImage Load (0.1ms)[0m  [1m[34mSELECT "images".* FROM "images" WHERE "images"."id" = $1 LIMIT $2[0m  [["id", nil], ["LIMIT", 1]]
  ↳ app/controllers/players_controller.rb:64:in `update_image'
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/players_controller.rb:64:in `update_image'
  [1m[36mActiveStorage::Blob Load (0.2ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  ↳ app/controllers/players_controller.rb:64:in `update_image'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/players_controller.rb:64:in `update_image'
  [1m[36mActiveStorage::Attachment Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "active_storage_attachments" WHERE "active_storage_attachments"."blob_id" = $1 LIMIT $2[0m  [["blob_id", 3], ["LIMIT", 1]]
  ↳ app/controllers/players_controller.rb:64:in `update_image'
  [1m[36mActiveStorage::VariantRecord Load (0.1ms)[0m  [1m[34mSELECT "active_storage_variant_records".* FROM "active_storage_variant_records" WHERE "active_storage_variant_records"."blob_id" = $1[0m  [["blob_id", 3]]
  ↳ app/controllers/players_controller.rb:64:in `update_image'
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = $1 AND "active_storage_attachments"."record_type" = $2 AND "active_storage_attachments"."name" = $3 LIMIT $4[0m  [["record_id", 3], ["record_type", "ActiveStorage::Blob"], ["name", "preview_image"], ["LIMIT", 1]]
  ↳ app/controllers/players_controller.rb:64:in `update_image'
  [1m[36mActiveStorage::Blob Destroy (0.4ms)[0m  [1m[31mDELETE FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = $1[0m  [["id", 3]]
  ↳ app/controllers/players_controller.rb:64:in `update_image'
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/players_controller.rb:64:in `update_image'
[36m  Disk Storage (0.1ms) [0m[31mDeleted file from key: tzwmihf26dckj40lzj78rf9mobsd[0m
[36m  Disk Storage (0.0ms) [0m[31mDeleted files by key prefix: variants/tzwmihf26dckj40lzj78rf9mobsd/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/players_controller.rb:65:in `update_image'
  [1m[36mActiveStorage::Blob Load (0.3ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" INNER JOIN "active_storage_attachments" ON "active_storage_blobs"."id" = "active_storage_attachments"."blob_id" WHERE "active_storage_attachments"."record_id" = $1 AND "active_storage_attachments"."record_type" = $2 AND "active_storage_attachments"."name" = $3 LIMIT $4[0m  [["record_id", 4825], ["record_type", "Image"], ["name", "file"], ["LIMIT", 1]]
  ↳ app/controllers/players_controller.rb:65:in `update_image'
  [1m[36mActiveStorage::Blob Create (0.2ms)[0m  [1m[32mINSERT INTO "active_storage_blobs" ("key", "filename", "content_type", "metadata", "service_name", "byte_size", "checksum", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["key", "7lhgjflg4zoy1m4gua98qbg7oc4b"], ["filename", "Perfil_LS.jpg"], ["content_type", "image/jpeg"], ["metadata", "{\"identified\":true}"], ["service_name", "local"], ["byte_size", 41525], ["checksum", "nI/KLUGrrXLsuJv61FGHcA=="], ["created_at", "2023-10-13 18:59:16.677854"]]
  ↳ app/controllers/players_controller.rb:65:in `update_image'
  [1m[36mActiveStorage::Attachment Create (0.2ms)[0m  [1m[32mINSERT INTO "active_storage_attachments" ("name", "record_type", "record_id", "blob_id", "created_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "file"], ["record_type", "Image"], ["record_id", 4825], ["blob_id", 4], ["created_at", "2023-10-13 18:59:16.678904"]]
  ↳ app/controllers/players_controller.rb:65:in `update_image'
  [1m[36mImage Update (0.2ms)[0m  [1m[33mUPDATE "images" SET "updated_at" = $1 WHERE "images"."id" = $2[0m  [["updated_at", "2023-10-13 18:59:16.679707"], ["id", "4825e432-c0a3-4bfe-a0e3-b2c4719cd2f1"]]
  ↳ app/controllers/players_controller.rb:65:in `update_image'
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/players_controller.rb:65:in `update_image'
[36m  Disk Storage (0.2ms) [0m[32mUploaded file to key: 7lhgjflg4zoy1m4gua98qbg7oc4b (checksum: nI/KLUGrrXLsuJv61FGHcA==)[0m
[ActiveJob] Enqueued ActiveStorage::AnalyzeJob (Job ID: 3aeadcb6-d82c-4f79-a33a-0e05c1b3df6e) to Async(default) with arguments: #<GlobalID:0x00007f300321d6c8 @uri=#<URI::GID gid://cardgame-ruby/ActiveStorage::Blob/4>>
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/players_controller.rb:70:in `update_image'
  [1m[36mPlayer Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "players" WHERE "players"."nickname" = $1 AND "players"."id" != $2 LIMIT $3[0m  [["nickname", "enkinaurio"], ["id", "4dc86b4e-6e3e-4f70-b439-cffe72b513ec"], ["LIMIT", 1]]
  ↳ app/controllers/players_controller.rb:70:in `update_image'
  [1m[36mPlayer Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "players" WHERE "players"."email" = $1 AND "players"."id" != $2 LIMIT $3[0m  [["email", "lucasdavidmiranda8@hotmail.com"], ["id", "4dc86b4e-6e3e-4f70-b439-cffe72b513ec"], ["LIMIT", 1]]
  ↳ app/controllers/players_controller.rb:70:in `update_image'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/players_controller.rb:70:in `update_image'
Completed 500 Internal Server Error in 52ms (ActiveRecord: 12.3ms | Allocations: 57861)


  
ArgumentError (Missing host to link to! Please provide the :host parameter, set default_url_options[:host], or set :only_path to true):
  
app/models/image.rb:20:in `full_url'
app/controllers/players_controller.rb:71:in `update_image'
[ActiveJob] [ActiveStorage::AnalyzeJob] [3aeadcb6-d82c-4f79-a33a-0e05c1b3df6e]   [1m[36mActiveStorage::Blob Load (0.2ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
[ActiveJob] [ActiveStorage::AnalyzeJob] [3aeadcb6-d82c-4f79-a33a-0e05c1b3df6e] Performing ActiveStorage::AnalyzeJob (Job ID: 3aeadcb6-d82c-4f79-a33a-0e05c1b3df6e) from Async(default) enqueued at 2023-10-13T18:59:16Z with arguments: #<GlobalID:0x00007f30019d7cf8 @uri=#<URI::GID gid://cardgame-ruby/ActiveStorage::Blob/4>>
[ActiveJob] [ActiveStorage::AnalyzeJob] [3aeadcb6-d82c-4f79-a33a-0e05c1b3df6e] Skipping image analysis because the ruby-vips gem isn't installed
[ActiveJob] [ActiveStorage::AnalyzeJob] [3aeadcb6-d82c-4f79-a33a-0e05c1b3df6e]   [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [3aeadcb6-d82c-4f79-a33a-0e05c1b3df6e]   [1m[36mActiveStorage::Blob Update (0.2ms)[0m  [1m[33mUPDATE "active_storage_blobs" SET "metadata" = $1 WHERE "active_storage_blobs"."id" = $2[0m  [["metadata", "{\"identified\":true,\"analyzed\":true}"], ["id", 4]]
[ActiveJob] [ActiveStorage::AnalyzeJob] [3aeadcb6-d82c-4f79-a33a-0e05c1b3df6e]   [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [3aeadcb6-d82c-4f79-a33a-0e05c1b3df6e] Performed ActiveStorage::AnalyzeJob (Job ID: 3aeadcb6-d82c-4f79-a33a-0e05c1b3df6e) from Async(default) in 5.19ms
Started PUT "/players/4dc86b4e-6e3e-4f70-b439-cffe72b513ec/update_image" for ::1 at 2023-10-13 16:01:07 -0300
Processing by PlayersController#update_image as */*
  Parameters: {"image"=>#<ActionDispatch::Http::UploadedFile:0x00007f3003273ca8 @tempfile=#<Tempfile:/tmp/RackMultipart20231013-55380-zw3dr7.jpg>, @content_type="image/jpeg", @original_filename="Perfil_LS.jpg", @headers="Content-Disposition: form-data; name=\"image\"; filename=\"Perfil_LS.jpg\"\r\nContent-Type: image/jpeg\r\n">, "player_id"=>"4dc86b4e-6e3e-4f70-b439-cffe72b513ec"}
  [1m[36mPlayer Load (0.2ms)[0m  [1m[34mSELECT "players".* FROM "players" WHERE "players"."token" = $1 LIMIT $2[0m  [["token", "9884b51a-17db-4772-bc07-ed1bad870c2a"], ["LIMIT", 1]]
  ↳ app/helpers/session_helper.rb:4:in `check_token'
  [1m[36mPlayer Load (0.1ms)[0m  [1m[34mSELECT "players".* FROM "players" WHERE "players"."id" = $1 LIMIT $2[0m  [["id", "4dc86b4e-6e3e-4f70-b439-cffe72b513ec"], ["LIMIT", 1]]
  ↳ app/controllers/players_controller.rb:61:in `update_image'
  [1m[36mImage Load (0.1ms)[0m  [1m[34mSELECT "images".* FROM "images" WHERE "images"."player_id" = $1 LIMIT $2[0m  [["player_id", "4dc86b4e-6e3e-4f70-b439-cffe72b513ec"], ["LIMIT", 1]]
  ↳ app/controllers/players_controller.rb:63:in `update_image'
  [1m[36mActiveStorage::Attachment Load (0.2ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = $1 AND "active_storage_attachments"."record_type" = $2 AND "active_storage_attachments"."name" = $3 LIMIT $4[0m  [["record_id", 4825], ["record_type", "Image"], ["name", "file"], ["LIMIT", 1]]
  ↳ app/controllers/players_controller.rb:64:in `update_image'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/players_controller.rb:64:in `update_image'
  [1m[36mActiveStorage::Attachment Destroy (0.2ms)[0m  [1m[31mDELETE FROM "active_storage_attachments" WHERE "active_storage_attachments"."id" = $1[0m  [["id", 4]]
  ↳ app/controllers/players_controller.rb:64:in `update_image'
  [1m[36mImage Load (0.1ms)[0m  [1m[34mSELECT "images".* FROM "images" WHERE "images"."id" = $1 LIMIT $2[0m  [["id", nil], ["LIMIT", 1]]
  ↳ app/controllers/players_controller.rb:64:in `update_image'
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/players_controller.rb:64:in `update_image'
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/controllers/players_controller.rb:64:in `update_image'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/players_controller.rb:64:in `update_image'
  [1m[36mActiveStorage::Attachment Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "active_storage_attachments" WHERE "active_storage_attachments"."blob_id" = $1 LIMIT $2[0m  [["blob_id", 4], ["LIMIT", 1]]
  ↳ app/controllers/players_controller.rb:64:in `update_image'
  [1m[36mActiveStorage::VariantRecord Load (0.1ms)[0m  [1m[34mSELECT "active_storage_variant_records".* FROM "active_storage_variant_records" WHERE "active_storage_variant_records"."blob_id" = $1[0m  [["blob_id", 4]]
  ↳ app/controllers/players_controller.rb:64:in `update_image'
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = $1 AND "active_storage_attachments"."record_type" = $2 AND "active_storage_attachments"."name" = $3 LIMIT $4[0m  [["record_id", 4], ["record_type", "ActiveStorage::Blob"], ["name", "preview_image"], ["LIMIT", 1]]
  ↳ app/controllers/players_controller.rb:64:in `update_image'
  [1m[36mActiveStorage::Blob Destroy (0.2ms)[0m  [1m[31mDELETE FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = $1[0m  [["id", 4]]
  ↳ app/controllers/players_controller.rb:64:in `update_image'
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/players_controller.rb:64:in `update_image'
[36m  Disk Storage (0.1ms) [0m[31mDeleted file from key: 7lhgjflg4zoy1m4gua98qbg7oc4b[0m
[36m  Disk Storage (0.0ms) [0m[31mDeleted files by key prefix: variants/7lhgjflg4zoy1m4gua98qbg7oc4b/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/players_controller.rb:65:in `update_image'
  [1m[36mActiveStorage::Blob Load (0.2ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" INNER JOIN "active_storage_attachments" ON "active_storage_blobs"."id" = "active_storage_attachments"."blob_id" WHERE "active_storage_attachments"."record_id" = $1 AND "active_storage_attachments"."record_type" = $2 AND "active_storage_attachments"."name" = $3 LIMIT $4[0m  [["record_id", 4825], ["record_type", "Image"], ["name", "file"], ["LIMIT", 1]]
  ↳ app/controllers/players_controller.rb:65:in `update_image'
  [1m[36mActiveStorage::Blob Create (0.2ms)[0m  [1m[32mINSERT INTO "active_storage_blobs" ("key", "filename", "content_type", "metadata", "service_name", "byte_size", "checksum", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["key", "0h6nol1616cxd7bponqbpyqd8ilg"], ["filename", "Perfil_LS.jpg"], ["content_type", "image/jpeg"], ["metadata", "{\"identified\":true}"], ["service_name", "local"], ["byte_size", 41525], ["checksum", "nI/KLUGrrXLsuJv61FGHcA=="], ["created_at", "2023-10-13 19:01:07.250240"]]
  ↳ app/controllers/players_controller.rb:65:in `update_image'
  [1m[36mActiveStorage::Attachment Create (0.1ms)[0m  [1m[32mINSERT INTO "active_storage_attachments" ("name", "record_type", "record_id", "blob_id", "created_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "file"], ["record_type", "Image"], ["record_id", 4825], ["blob_id", 5], ["created_at", "2023-10-13 19:01:07.251252"]]
  ↳ app/controllers/players_controller.rb:65:in `update_image'
  [1m[36mImage Update (0.1ms)[0m  [1m[33mUPDATE "images" SET "updated_at" = $1 WHERE "images"."id" = $2[0m  [["updated_at", "2023-10-13 19:01:07.251868"], ["id", "4825e432-c0a3-4bfe-a0e3-b2c4719cd2f1"]]
  ↳ app/controllers/players_controller.rb:65:in `update_image'
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/players_controller.rb:65:in `update_image'
[36m  Disk Storage (0.2ms) [0m[32mUploaded file to key: 0h6nol1616cxd7bponqbpyqd8ilg (checksum: nI/KLUGrrXLsuJv61FGHcA==)[0m
[ActiveJob] Enqueued ActiveStorage::AnalyzeJob (Job ID: 0f946241-9ae7-48ee-ae06-02e35208e2e6) to Async(default) with arguments: #<GlobalID:0x00007f3001f16390 @uri=#<URI::GID gid://cardgame-ruby/ActiveStorage::Blob/5>>
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/players_controller.rb:70:in `update_image'
  [1m[36mPlayer Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "players" WHERE "players"."nickname" = $1 AND "players"."id" != $2 LIMIT $3[0m  [["nickname", "enkinaurio"], ["id", "4dc86b4e-6e3e-4f70-b439-cffe72b513ec"], ["LIMIT", 1]]
  ↳ app/controllers/players_controller.rb:70:in `update_image'
  [1m[36mPlayer Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "players" WHERE "players"."email" = $1 AND "players"."id" != $2 LIMIT $3[0m  [["email", "lucasdavidmiranda8@hotmail.com"], ["id", "4dc86b4e-6e3e-4f70-b439-cffe72b513ec"], ["LIMIT", 1]]
  ↳ app/controllers/players_controller.rb:70:in `update_image'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/players_controller.rb:70:in `update_image'
Completed 500 Internal Server Error in 20ms (ActiveRecord: 4.8ms | Allocations: 19199)


  
ArgumentError (Missing host to link to! Please provide the :host parameter, set default_url_options[:host], or set :only_path to true):
  
app/models/image.rb:20:in `full_url'
app/controllers/players_controller.rb:71:in `update_image'
[ActiveJob] [ActiveStorage::AnalyzeJob] [0f946241-9ae7-48ee-ae06-02e35208e2e6]   [1m[36mActiveStorage::Blob Load (0.2ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
[ActiveJob] [ActiveStorage::AnalyzeJob] [0f946241-9ae7-48ee-ae06-02e35208e2e6] Performing ActiveStorage::AnalyzeJob (Job ID: 0f946241-9ae7-48ee-ae06-02e35208e2e6) from Async(default) enqueued at 2023-10-13T19:01:07Z with arguments: #<GlobalID:0x00007f3001ae38b8 @uri=#<URI::GID gid://cardgame-ruby/ActiveStorage::Blob/5>>
[ActiveJob] [ActiveStorage::AnalyzeJob] [0f946241-9ae7-48ee-ae06-02e35208e2e6] Skipping image analysis because the ruby-vips gem isn't installed
[ActiveJob] [ActiveStorage::AnalyzeJob] [0f946241-9ae7-48ee-ae06-02e35208e2e6]   [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [0f946241-9ae7-48ee-ae06-02e35208e2e6]   [1m[36mActiveStorage::Blob Update (0.2ms)[0m  [1m[33mUPDATE "active_storage_blobs" SET "metadata" = $1 WHERE "active_storage_blobs"."id" = $2[0m  [["metadata", "{\"identified\":true,\"analyzed\":true}"], ["id", 5]]
[ActiveJob] [ActiveStorage::AnalyzeJob] [0f946241-9ae7-48ee-ae06-02e35208e2e6]   [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [0f946241-9ae7-48ee-ae06-02e35208e2e6] Performed ActiveStorage::AnalyzeJob (Job ID: 0f946241-9ae7-48ee-ae06-02e35208e2e6) from Async(default) in 7.49ms
Started PUT "/players/4dc86b4e-6e3e-4f70-b439-cffe72b513ec/update_image" for ::1 at 2023-10-13 16:02:40 -0300
  [1m[36mActiveRecord::SchemaMigration Pluck (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by PlayersController#update_image as */*
  Parameters: {"image"=>#<ActionDispatch::Http::UploadedFile:0x00007fadc2a449e0 @tempfile=#<Tempfile:/tmp/RackMultipart20231013-55582-9ybx88.jpg>, @content_type="image/jpeg", @original_filename="Perfil_LS.jpg", @headers="Content-Disposition: form-data; name=\"image\"; filename=\"Perfil_LS.jpg\"\r\nContent-Type: image/jpeg\r\n">, "player_id"=>"4dc86b4e-6e3e-4f70-b439-cffe72b513ec"}
  [1m[36mPlayer Load (0.2ms)[0m  [1m[34mSELECT "players".* FROM "players" WHERE "players"."token" = $1 LIMIT $2[0m  [["token", "9884b51a-17db-4772-bc07-ed1bad870c2a"], ["LIMIT", 1]]
  ↳ app/helpers/session_helper.rb:4:in `check_token'
  [1m[36mPlayer Load (0.1ms)[0m  [1m[34mSELECT "players".* FROM "players" WHERE "players"."id" = $1 LIMIT $2[0m  [["id", "4dc86b4e-6e3e-4f70-b439-cffe72b513ec"], ["LIMIT", 1]]
  ↳ app/controllers/players_controller.rb:61:in `update_image'
  [1m[36mImage Load (0.1ms)[0m  [1m[34mSELECT "images".* FROM "images" WHERE "images"."player_id" = $1 LIMIT $2[0m  [["player_id", "4dc86b4e-6e3e-4f70-b439-cffe72b513ec"], ["LIMIT", 1]]
  ↳ app/controllers/players_controller.rb:63:in `update_image'
  [1m[36mActiveStorage::Attachment Load (0.2ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = $1 AND "active_storage_attachments"."record_type" = $2 AND "active_storage_attachments"."name" = $3 LIMIT $4[0m  [["record_id", 4825], ["record_type", "Image"], ["name", "file"], ["LIMIT", 1]]
  ↳ app/controllers/players_controller.rb:64:in `update_image'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/players_controller.rb:64:in `update_image'
  [1m[36mActiveStorage::Attachment Destroy (0.4ms)[0m  [1m[31mDELETE FROM "active_storage_attachments" WHERE "active_storage_attachments"."id" = $1[0m  [["id", 5]]
  ↳ app/controllers/players_controller.rb:64:in `update_image'
  [1m[36mImage Load (0.1ms)[0m  [1m[34mSELECT "images".* FROM "images" WHERE "images"."id" = $1 LIMIT $2[0m  [["id", nil], ["LIMIT", 1]]
  ↳ app/controllers/players_controller.rb:64:in `update_image'
  [1m[36mTRANSACTION (6.2ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/players_controller.rb:64:in `update_image'
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/controllers/players_controller.rb:64:in `update_image'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/players_controller.rb:64:in `update_image'
  [1m[36mActiveStorage::Attachment Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "active_storage_attachments" WHERE "active_storage_attachments"."blob_id" = $1 LIMIT $2[0m  [["blob_id", 5], ["LIMIT", 1]]
  ↳ app/controllers/players_controller.rb:64:in `update_image'
  [1m[36mActiveStorage::VariantRecord Load (0.1ms)[0m  [1m[34mSELECT "active_storage_variant_records".* FROM "active_storage_variant_records" WHERE "active_storage_variant_records"."blob_id" = $1[0m  [["blob_id", 5]]
  ↳ app/controllers/players_controller.rb:64:in `update_image'
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = $1 AND "active_storage_attachments"."record_type" = $2 AND "active_storage_attachments"."name" = $3 LIMIT $4[0m  [["record_id", 5], ["record_type", "ActiveStorage::Blob"], ["name", "preview_image"], ["LIMIT", 1]]
  ↳ app/controllers/players_controller.rb:64:in `update_image'
  [1m[36mActiveStorage::Blob Destroy (0.3ms)[0m  [1m[31mDELETE FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = $1[0m  [["id", 5]]
  ↳ app/controllers/players_controller.rb:64:in `update_image'
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/players_controller.rb:64:in `update_image'
[36m  Disk Storage (0.1ms) [0m[31mDeleted file from key: 0h6nol1616cxd7bponqbpyqd8ilg[0m
[36m  Disk Storage (0.0ms) [0m[31mDeleted files by key prefix: variants/0h6nol1616cxd7bponqbpyqd8ilg/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/players_controller.rb:65:in `update_image'
  [1m[36mActiveStorage::Blob Load (0.3ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" INNER JOIN "active_storage_attachments" ON "active_storage_blobs"."id" = "active_storage_attachments"."blob_id" WHERE "active_storage_attachments"."record_id" = $1 AND "active_storage_attachments"."record_type" = $2 AND "active_storage_attachments"."name" = $3 LIMIT $4[0m  [["record_id", 4825], ["record_type", "Image"], ["name", "file"], ["LIMIT", 1]]
  ↳ app/controllers/players_controller.rb:65:in `update_image'
  [1m[36mActiveStorage::Blob Create (0.2ms)[0m  [1m[32mINSERT INTO "active_storage_blobs" ("key", "filename", "content_type", "metadata", "service_name", "byte_size", "checksum", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["key", "5i51szi9xtb7lmk4huiy60whnw9c"], ["filename", "Perfil_LS.jpg"], ["content_type", "image/jpeg"], ["metadata", "{\"identified\":true}"], ["service_name", "local"], ["byte_size", 41525], ["checksum", "nI/KLUGrrXLsuJv61FGHcA=="], ["created_at", "2023-10-13 19:02:40.340952"]]
  ↳ app/controllers/players_controller.rb:65:in `update_image'
  [1m[36mActiveStorage::Attachment Create (0.2ms)[0m  [1m[32mINSERT INTO "active_storage_attachments" ("name", "record_type", "record_id", "blob_id", "created_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "file"], ["record_type", "Image"], ["record_id", 4825], ["blob_id", 6], ["created_at", "2023-10-13 19:02:40.341952"]]
  ↳ app/controllers/players_controller.rb:65:in `update_image'
  [1m[36mImage Update (0.1ms)[0m  [1m[33mUPDATE "images" SET "updated_at" = $1 WHERE "images"."id" = $2[0m  [["updated_at", "2023-10-13 19:02:40.342782"], ["id", "4825e432-c0a3-4bfe-a0e3-b2c4719cd2f1"]]
  ↳ app/controllers/players_controller.rb:65:in `update_image'
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/players_controller.rb:65:in `update_image'
[36m  Disk Storage (0.2ms) [0m[32mUploaded file to key: 5i51szi9xtb7lmk4huiy60whnw9c (checksum: nI/KLUGrrXLsuJv61FGHcA==)[0m
[ActiveJob] Enqueued ActiveStorage::AnalyzeJob (Job ID: 62991325-714f-444f-bcd6-33ed33182564) to Async(default) with arguments: #<GlobalID:0x00007fadc43bd660 @uri=#<URI::GID gid://cardgame-ruby/ActiveStorage::Blob/6>>
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/players_controller.rb:70:in `update_image'
  [1m[36mPlayer Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "players" WHERE "players"."nickname" = $1 AND "players"."id" != $2 LIMIT $3[0m  [["nickname", "enkinaurio"], ["id", "4dc86b4e-6e3e-4f70-b439-cffe72b513ec"], ["LIMIT", 1]]
  ↳ app/controllers/players_controller.rb:70:in `update_image'
  [1m[36mPlayer Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "players" WHERE "players"."email" = $1 AND "players"."id" != $2 LIMIT $3[0m  [["email", "lucasdavidmiranda8@hotmail.com"], ["id", "4dc86b4e-6e3e-4f70-b439-cffe72b513ec"], ["LIMIT", 1]]
  ↳ app/controllers/players_controller.rb:70:in `update_image'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/players_controller.rb:70:in `update_image'
Completed 500 Internal Server Error in 56ms (ActiveRecord: 16.6ms | Allocations: 57845)


  
ArgumentError (Missing host to link to! Please provide the :host parameter, set default_url_options[:host], or set :only_path to true):
  
app/models/image.rb:20:in `full_url'
app/controllers/players_controller.rb:71:in `update_image'
[ActiveJob] [ActiveStorage::AnalyzeJob] [62991325-714f-444f-bcd6-33ed33182564]   [1m[36mActiveStorage::Blob Load (0.2ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
[ActiveJob] [ActiveStorage::AnalyzeJob] [62991325-714f-444f-bcd6-33ed33182564] Performing ActiveStorage::AnalyzeJob (Job ID: 62991325-714f-444f-bcd6-33ed33182564) from Async(default) enqueued at 2023-10-13T19:02:40Z with arguments: #<GlobalID:0x00007fadc2b679d0 @uri=#<URI::GID gid://cardgame-ruby/ActiveStorage::Blob/6>>
[ActiveJob] [ActiveStorage::AnalyzeJob] [62991325-714f-444f-bcd6-33ed33182564] Skipping image analysis because the ruby-vips gem isn't installed
[ActiveJob] [ActiveStorage::AnalyzeJob] [62991325-714f-444f-bcd6-33ed33182564]   [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [62991325-714f-444f-bcd6-33ed33182564]   [1m[36mActiveStorage::Blob Update (0.2ms)[0m  [1m[33mUPDATE "active_storage_blobs" SET "metadata" = $1 WHERE "active_storage_blobs"."id" = $2[0m  [["metadata", "{\"identified\":true,\"analyzed\":true}"], ["id", 6]]
[ActiveJob] [ActiveStorage::AnalyzeJob] [62991325-714f-444f-bcd6-33ed33182564]   [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [62991325-714f-444f-bcd6-33ed33182564] Performed ActiveStorage::AnalyzeJob (Job ID: 62991325-714f-444f-bcd6-33ed33182564) from Async(default) in 5.95ms
Started PUT "/players/4dc86b4e-6e3e-4f70-b439-cffe72b513ec/update_image" for ::1 at 2023-10-13 16:20:40 -0300
Processing by PlayersController#update_image as */*
  Parameters: {"image"=>#<ActionDispatch::Http::UploadedFile:0x00007fadc2a499e0 @tempfile=#<Tempfile:/tmp/RackMultipart20231013-55582-bsqxgo.jpg>, @content_type="image/jpeg", @original_filename="Perfil_LS.jpg", @headers="Content-Disposition: form-data; name=\"image\"; filename=\"Perfil_LS.jpg\"\r\nContent-Type: image/jpeg\r\n">, "player_id"=>"4dc86b4e-6e3e-4f70-b439-cffe72b513ec"}
  [1m[36mPlayer Load (0.2ms)[0m  [1m[34mSELECT "players".* FROM "players" WHERE "players"."token" = $1 LIMIT $2[0m  [["token", "9884b51a-17db-4772-bc07-ed1bad870c2a"], ["LIMIT", 1]]
  ↳ app/helpers/session_helper.rb:4:in `check_token'
  [1m[36mPlayer Load (0.1ms)[0m  [1m[34mSELECT "players".* FROM "players" WHERE "players"."id" = $1 LIMIT $2[0m  [["id", "4dc86b4e-6e3e-4f70-b439-cffe72b513ec"], ["LIMIT", 1]]
  ↳ app/controllers/players_controller.rb:61:in `update_image'
  [1m[36mImage Load (0.2ms)[0m  [1m[34mSELECT "images".* FROM "images" WHERE "images"."player_id" = $1 LIMIT $2[0m  [["player_id", "4dc86b4e-6e3e-4f70-b439-cffe72b513ec"], ["LIMIT", 1]]
  ↳ app/controllers/players_controller.rb:63:in `update_image'
  [1m[36mActiveStorage::Attachment Load (0.2ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = $1 AND "active_storage_attachments"."record_type" = $2 AND "active_storage_attachments"."name" = $3 LIMIT $4[0m  [["record_id", 4825], ["record_type", "Image"], ["name", "file"], ["LIMIT", 1]]
  ↳ app/controllers/players_controller.rb:64:in `update_image'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/players_controller.rb:64:in `update_image'
  [1m[36mActiveStorage::Attachment Destroy (0.1ms)[0m  [1m[31mDELETE FROM "active_storage_attachments" WHERE "active_storage_attachments"."id" = $1[0m  [["id", 6]]
  ↳ app/controllers/players_controller.rb:64:in `update_image'
  [1m[36mImage Load (0.1ms)[0m  [1m[34mSELECT "images".* FROM "images" WHERE "images"."id" = $1 LIMIT $2[0m  [["id", nil], ["LIMIT", 1]]
  ↳ app/controllers/players_controller.rb:64:in `update_image'
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/players_controller.rb:64:in `update_image'
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/controllers/players_controller.rb:64:in `update_image'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/players_controller.rb:64:in `update_image'
  [1m[36mActiveStorage::Attachment Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "active_storage_attachments" WHERE "active_storage_attachments"."blob_id" = $1 LIMIT $2[0m  [["blob_id", 6], ["LIMIT", 1]]
  ↳ app/controllers/players_controller.rb:64:in `update_image'
  [1m[36mActiveStorage::VariantRecord Load (0.1ms)[0m  [1m[34mSELECT "active_storage_variant_records".* FROM "active_storage_variant_records" WHERE "active_storage_variant_records"."blob_id" = $1[0m  [["blob_id", 6]]
  ↳ app/controllers/players_controller.rb:64:in `update_image'
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = $1 AND "active_storage_attachments"."record_type" = $2 AND "active_storage_attachments"."name" = $3 LIMIT $4[0m  [["record_id", 6], ["record_type", "ActiveStorage::Blob"], ["name", "preview_image"], ["LIMIT", 1]]
  ↳ app/controllers/players_controller.rb:64:in `update_image'
  [1m[36mActiveStorage::Blob Destroy (0.3ms)[0m  [1m[31mDELETE FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = $1[0m  [["id", 6]]
  ↳ app/controllers/players_controller.rb:64:in `update_image'
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/players_controller.rb:64:in `update_image'
[36m  Disk Storage (0.1ms) [0m[31mDeleted file from key: 5i51szi9xtb7lmk4huiy60whnw9c[0m
[36m  Disk Storage (0.0ms) [0m[31mDeleted files by key prefix: variants/5i51szi9xtb7lmk4huiy60whnw9c/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/players_controller.rb:65:in `update_image'
  [1m[36mActiveStorage::Blob Load (0.3ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" INNER JOIN "active_storage_attachments" ON "active_storage_blobs"."id" = "active_storage_attachments"."blob_id" WHERE "active_storage_attachments"."record_id" = $1 AND "active_storage_attachments"."record_type" = $2 AND "active_storage_attachments"."name" = $3 LIMIT $4[0m  [["record_id", 4825], ["record_type", "Image"], ["name", "file"], ["LIMIT", 1]]
  ↳ app/controllers/players_controller.rb:65:in `update_image'
  [1m[36mActiveStorage::Blob Create (0.2ms)[0m  [1m[32mINSERT INTO "active_storage_blobs" ("key", "filename", "content_type", "metadata", "service_name", "byte_size", "checksum", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["key", "uhgek29upddxdzf6a2sdkb7reav3"], ["filename", "Perfil_LS.jpg"], ["content_type", "image/jpeg"], ["metadata", "{\"identified\":true}"], ["service_name", "local"], ["byte_size", 41525], ["checksum", "nI/KLUGrrXLsuJv61FGHcA=="], ["created_at", "2023-10-13 19:20:40.475449"]]
  ↳ app/controllers/players_controller.rb:65:in `update_image'
  [1m[36mActiveStorage::Attachment Create (0.2ms)[0m  [1m[32mINSERT INTO "active_storage_attachments" ("name", "record_type", "record_id", "blob_id", "created_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "file"], ["record_type", "Image"], ["record_id", 4825], ["blob_id", 7], ["created_at", "2023-10-13 19:20:40.476368"]]
  ↳ app/controllers/players_controller.rb:65:in `update_image'
  [1m[36mImage Update (0.1ms)[0m  [1m[33mUPDATE "images" SET "updated_at" = $1 WHERE "images"."id" = $2[0m  [["updated_at", "2023-10-13 19:20:40.477061"], ["id", "4825e432-c0a3-4bfe-a0e3-b2c4719cd2f1"]]
  ↳ app/controllers/players_controller.rb:65:in `update_image'
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/players_controller.rb:65:in `update_image'
[36m  Disk Storage (0.2ms) [0m[32mUploaded file to key: uhgek29upddxdzf6a2sdkb7reav3 (checksum: nI/KLUGrrXLsuJv61FGHcA==)[0m
[ActiveJob] Enqueued ActiveStorage::AnalyzeJob (Job ID: f35c3827-02cd-41c8-9499-ab08c21fb7b6) to Async(default) with arguments: #<GlobalID:0x00007fadc0ec3450 @uri=#<URI::GID gid://cardgame-ruby/ActiveStorage::Blob/7>>
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/players_controller.rb:70:in `update_image'
  [1m[36mPlayer Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "players" WHERE "players"."nickname" = $1 AND "players"."id" != $2 LIMIT $3[0m  [["nickname", "enkinaurio"], ["id", "4dc86b4e-6e3e-4f70-b439-cffe72b513ec"], ["LIMIT", 1]]
  ↳ app/controllers/players_controller.rb:70:in `update_image'
  [1m[36mPlayer Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "players" WHERE "players"."email" = $1 AND "players"."id" != $2 LIMIT $3[0m  [["email", "lucasdavidmiranda8@hotmail.com"], ["id", "4dc86b4e-6e3e-4f70-b439-cffe72b513ec"], ["LIMIT", 1]]
  ↳ app/controllers/players_controller.rb:70:in `update_image'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/players_controller.rb:70:in `update_image'
Completed 500 Internal Server Error in 39ms (ActiveRecord: 7.5ms | Allocations: 41641)


  
NoMethodError (undefined method `service_url' for #<ActiveStorage::Attached::One:0x00007fadc4457058 @name="file", @record=#<Image id: "4825e432-c0a3-4bfe-a0e3-b2c4719cd2f1", created_at: "2023-10-13 18:51:42.376392000 +0000", updated_at: "2023-10-13 19:20:40.477061000 +0000", player_id: "4dc86b4e-6e3e-4f70-b439-cffe72b513ec">>):
  
app/models/image.rb:24:in `full_url'
app/controllers/players_controller.rb:71:in `update_image'
[ActiveJob] [ActiveStorage::AnalyzeJob] [f35c3827-02cd-41c8-9499-ab08c21fb7b6]   [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
[ActiveJob] [ActiveStorage::AnalyzeJob] [f35c3827-02cd-41c8-9499-ab08c21fb7b6] Performing ActiveStorage::AnalyzeJob (Job ID: f35c3827-02cd-41c8-9499-ab08c21fb7b6) from Async(default) enqueued at 2023-10-13T19:20:40Z with arguments: #<GlobalID:0x00007fadc43b79e0 @uri=#<URI::GID gid://cardgame-ruby/ActiveStorage::Blob/7>>
[ActiveJob] [ActiveStorage::AnalyzeJob] [f35c3827-02cd-41c8-9499-ab08c21fb7b6] Skipping image analysis because the ruby-vips gem isn't installed
[ActiveJob] [ActiveStorage::AnalyzeJob] [f35c3827-02cd-41c8-9499-ab08c21fb7b6]   [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [f35c3827-02cd-41c8-9499-ab08c21fb7b6]   [1m[36mActiveStorage::Blob Update (0.2ms)[0m  [1m[33mUPDATE "active_storage_blobs" SET "metadata" = $1 WHERE "active_storage_blobs"."id" = $2[0m  [["metadata", "{\"identified\":true,\"analyzed\":true}"], ["id", 7]]
[ActiveJob] [ActiveStorage::AnalyzeJob] [f35c3827-02cd-41c8-9499-ab08c21fb7b6]   [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [f35c3827-02cd-41c8-9499-ab08c21fb7b6] Performed ActiveStorage::AnalyzeJob (Job ID: f35c3827-02cd-41c8-9499-ab08c21fb7b6) from Async(default) in 15.45ms
Started PUT "/players/4dc86b4e-6e3e-4f70-b439-cffe72b513ec/update_image" for ::1 at 2023-10-13 16:22:37 -0300
Processing by PlayersController#update_image as */*
  Parameters: {"image"=>#<ActionDispatch::Http::UploadedFile:0x00007fadc350a0a0 @tempfile=#<Tempfile:/tmp/RackMultipart20231013-55582-d0laiz.jpg>, @content_type="image/jpeg", @original_filename="Perfil_LS.jpg", @headers="Content-Disposition: form-data; name=\"image\"; filename=\"Perfil_LS.jpg\"\r\nContent-Type: image/jpeg\r\n">, "player_id"=>"4dc86b4e-6e3e-4f70-b439-cffe72b513ec"}
  [1m[36mPlayer Load (0.1ms)[0m  [1m[34mSELECT "players".* FROM "players" WHERE "players"."token" = $1 LIMIT $2[0m  [["token", "9884b51a-17db-4772-bc07-ed1bad870c2a"], ["LIMIT", 1]]
  ↳ app/helpers/session_helper.rb:4:in `check_token'
  [1m[36mPlayer Load (0.1ms)[0m  [1m[34mSELECT "players".* FROM "players" WHERE "players"."id" = $1 LIMIT $2[0m  [["id", "4dc86b4e-6e3e-4f70-b439-cffe72b513ec"], ["LIMIT", 1]]
  ↳ app/controllers/players_controller.rb:61:in `update_image'
  [1m[36mImage Load (0.1ms)[0m  [1m[34mSELECT "images".* FROM "images" WHERE "images"."player_id" = $1 LIMIT $2[0m  [["player_id", "4dc86b4e-6e3e-4f70-b439-cffe72b513ec"], ["LIMIT", 1]]
  ↳ app/controllers/players_controller.rb:63:in `update_image'
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = $1 AND "active_storage_attachments"."record_type" = $2 AND "active_storage_attachments"."name" = $3 LIMIT $4[0m  [["record_id", 4825], ["record_type", "Image"], ["name", "file"], ["LIMIT", 1]]
  ↳ app/controllers/players_controller.rb:64:in `update_image'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/players_controller.rb:64:in `update_image'
  [1m[36mActiveStorage::Attachment Destroy (0.2ms)[0m  [1m[31mDELETE FROM "active_storage_attachments" WHERE "active_storage_attachments"."id" = $1[0m  [["id", 7]]
  ↳ app/controllers/players_controller.rb:64:in `update_image'
  [1m[36mImage Load (0.1ms)[0m  [1m[34mSELECT "images".* FROM "images" WHERE "images"."id" = $1 LIMIT $2[0m  [["id", nil], ["LIMIT", 1]]
  ↳ app/controllers/players_controller.rb:64:in `update_image'
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/players_controller.rb:64:in `update_image'
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  ↳ app/controllers/players_controller.rb:64:in `update_image'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/players_controller.rb:64:in `update_image'
  [1m[36mActiveStorage::Attachment Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "active_storage_attachments" WHERE "active_storage_attachments"."blob_id" = $1 LIMIT $2[0m  [["blob_id", 7], ["LIMIT", 1]]
  ↳ app/controllers/players_controller.rb:64:in `update_image'
  [1m[36mActiveStorage::VariantRecord Load (0.1ms)[0m  [1m[34mSELECT "active_storage_variant_records".* FROM "active_storage_variant_records" WHERE "active_storage_variant_records"."blob_id" = $1[0m  [["blob_id", 7]]
  ↳ app/controllers/players_controller.rb:64:in `update_image'
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = $1 AND "active_storage_attachments"."record_type" = $2 AND "active_storage_attachments"."name" = $3 LIMIT $4[0m  [["record_id", 7], ["record_type", "ActiveStorage::Blob"], ["name", "preview_image"], ["LIMIT", 1]]
  ↳ app/controllers/players_controller.rb:64:in `update_image'
  [1m[36mActiveStorage::Blob Destroy (0.2ms)[0m  [1m[31mDELETE FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = $1[0m  [["id", 7]]
  ↳ app/controllers/players_controller.rb:64:in `update_image'
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/players_controller.rb:64:in `update_image'
[36m  Disk Storage (0.1ms) [0m[31mDeleted file from key: uhgek29upddxdzf6a2sdkb7reav3[0m
[36m  Disk Storage (0.0ms) [0m[31mDeleted files by key prefix: variants/uhgek29upddxdzf6a2sdkb7reav3/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/players_controller.rb:65:in `update_image'
  [1m[36mActiveStorage::Blob Load (0.2ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" INNER JOIN "active_storage_attachments" ON "active_storage_blobs"."id" = "active_storage_attachments"."blob_id" WHERE "active_storage_attachments"."record_id" = $1 AND "active_storage_attachments"."record_type" = $2 AND "active_storage_attachments"."name" = $3 LIMIT $4[0m  [["record_id", 4825], ["record_type", "Image"], ["name", "file"], ["LIMIT", 1]]
  ↳ app/controllers/players_controller.rb:65:in `update_image'
  [1m[36mActiveStorage::Blob Create (0.2ms)[0m  [1m[32mINSERT INTO "active_storage_blobs" ("key", "filename", "content_type", "metadata", "service_name", "byte_size", "checksum", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["key", "3hv34owj2ykz92ke0yz7rzatc3jb"], ["filename", "Perfil_LS.jpg"], ["content_type", "image/jpeg"], ["metadata", "{\"identified\":true}"], ["service_name", "local"], ["byte_size", 41525], ["checksum", "nI/KLUGrrXLsuJv61FGHcA=="], ["created_at", "2023-10-13 19:22:37.430275"]]
  ↳ app/controllers/players_controller.rb:65:in `update_image'
  [1m[36mActiveStorage::Attachment Create (0.2ms)[0m  [1m[32mINSERT INTO "active_storage_attachments" ("name", "record_type", "record_id", "blob_id", "created_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "file"], ["record_type", "Image"], ["record_id", 4825], ["blob_id", 8], ["created_at", "2023-10-13 19:22:37.431446"]]
  ↳ app/controllers/players_controller.rb:65:in `update_image'
  [1m[36mImage Update (0.2ms)[0m  [1m[33mUPDATE "images" SET "updated_at" = $1 WHERE "images"."id" = $2[0m  [["updated_at", "2023-10-13 19:22:37.432183"], ["id", "4825e432-c0a3-4bfe-a0e3-b2c4719cd2f1"]]
  ↳ app/controllers/players_controller.rb:65:in `update_image'
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/players_controller.rb:65:in `update_image'
[36m  Disk Storage (0.2ms) [0m[32mUploaded file to key: 3hv34owj2ykz92ke0yz7rzatc3jb (checksum: nI/KLUGrrXLsuJv61FGHcA==)[0m
[ActiveJob] Enqueued ActiveStorage::AnalyzeJob (Job ID: 4ba8b34a-bde5-4f0c-a5d3-63dc396f7bc1) to Async(default) with arguments: #<GlobalID:0x00007fadc2bf6b30 @uri=#<URI::GID gid://cardgame-ruby/ActiveStorage::Blob/8>>
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/players_controller.rb:70:in `update_image'
  [1m[36mPlayer Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "players" WHERE "players"."nickname" = $1 AND "players"."id" != $2 LIMIT $3[0m  [["nickname", "enkinaurio"], ["id", "4dc86b4e-6e3e-4f70-b439-cffe72b513ec"], ["LIMIT", 1]]
  ↳ app/controllers/players_controller.rb:70:in `update_image'
  [1m[36mPlayer Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "players" WHERE "players"."email" = $1 AND "players"."id" != $2 LIMIT $3[0m  [["email", "lucasdavidmiranda8@hotmail.com"], ["id", "4dc86b4e-6e3e-4f70-b439-cffe72b513ec"], ["LIMIT", 1]]
  ↳ app/controllers/players_controller.rb:70:in `update_image'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/players_controller.rb:70:in `update_image'
Completed 500 Internal Server Error in 42ms (ActiveRecord: 10.6ms | Allocations: 39809)


  
ArgumentError (Missing host to link to! Please provide the :host parameter, set default_url_options[:host], or set :only_path to true):
  
app/models/image.rb:24:in `full_url'
app/controllers/players_controller.rb:71:in `update_image'
[ActiveJob] [ActiveStorage::AnalyzeJob] [4ba8b34a-bde5-4f0c-a5d3-63dc396f7bc1]   [1m[36mActiveStorage::Blob Load (0.2ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = $1 LIMIT $2[0m  [["id", 8], ["LIMIT", 1]]
[ActiveJob] [ActiveStorage::AnalyzeJob] [4ba8b34a-bde5-4f0c-a5d3-63dc396f7bc1] Performing ActiveStorage::AnalyzeJob (Job ID: 4ba8b34a-bde5-4f0c-a5d3-63dc396f7bc1) from Async(default) enqueued at 2023-10-13T19:22:37Z with arguments: #<GlobalID:0x00007fadc0eaeca8 @uri=#<URI::GID gid://cardgame-ruby/ActiveStorage::Blob/8>>
[ActiveJob] [ActiveStorage::AnalyzeJob] [4ba8b34a-bde5-4f0c-a5d3-63dc396f7bc1] Skipping image analysis because the ruby-vips gem isn't installed
[ActiveJob] [ActiveStorage::AnalyzeJob] [4ba8b34a-bde5-4f0c-a5d3-63dc396f7bc1]   [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [4ba8b34a-bde5-4f0c-a5d3-63dc396f7bc1]   [1m[36mActiveStorage::Blob Update (0.2ms)[0m  [1m[33mUPDATE "active_storage_blobs" SET "metadata" = $1 WHERE "active_storage_blobs"."id" = $2[0m  [["metadata", "{\"identified\":true,\"analyzed\":true}"], ["id", 8]]
[ActiveJob] [ActiveStorage::AnalyzeJob] [4ba8b34a-bde5-4f0c-a5d3-63dc396f7bc1]   [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [4ba8b34a-bde5-4f0c-a5d3-63dc396f7bc1] Performed ActiveStorage::AnalyzeJob (Job ID: 4ba8b34a-bde5-4f0c-a5d3-63dc396f7bc1) from Async(default) in 14.19ms
Started PUT "/players/4dc86b4e-6e3e-4f70-b439-cffe72b513ec/update_image" for ::1 at 2023-10-13 16:24:51 -0300
Processing by PlayersController#update_image as */*
  Parameters: {"image"=>#<ActionDispatch::Http::UploadedFile:0x00007fadc0e37720 @tempfile=#<Tempfile:/tmp/RackMultipart20231013-55582-k83w5a.jpg>, @content_type="image/jpeg", @original_filename="Perfil_LS.jpg", @headers="Content-Disposition: form-data; name=\"image\"; filename=\"Perfil_LS.jpg\"\r\nContent-Type: image/jpeg\r\n">, "player_id"=>"4dc86b4e-6e3e-4f70-b439-cffe72b513ec"}
  [1m[36mPlayer Load (0.1ms)[0m  [1m[34mSELECT "players".* FROM "players" WHERE "players"."token" = $1 LIMIT $2[0m  [["token", "9884b51a-17db-4772-bc07-ed1bad870c2a"], ["LIMIT", 1]]
  ↳ app/helpers/session_helper.rb:4:in `check_token'
  [1m[36mPlayer Load (0.2ms)[0m  [1m[34mSELECT "players".* FROM "players" WHERE "players"."id" = $1 LIMIT $2[0m  [["id", "4dc86b4e-6e3e-4f70-b439-cffe72b513ec"], ["LIMIT", 1]]
  ↳ app/controllers/players_controller.rb:61:in `update_image'
  [1m[36mImage Load (0.1ms)[0m  [1m[34mSELECT "images".* FROM "images" WHERE "images"."player_id" = $1 LIMIT $2[0m  [["player_id", "4dc86b4e-6e3e-4f70-b439-cffe72b513ec"], ["LIMIT", 1]]
  ↳ app/controllers/players_controller.rb:63:in `update_image'
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = $1 AND "active_storage_attachments"."record_type" = $2 AND "active_storage_attachments"."name" = $3 LIMIT $4[0m  [["record_id", 4825], ["record_type", "Image"], ["name", "file"], ["LIMIT", 1]]
  ↳ app/controllers/players_controller.rb:64:in `update_image'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/players_controller.rb:64:in `update_image'
  [1m[36mActiveStorage::Attachment Destroy (0.2ms)[0m  [1m[31mDELETE FROM "active_storage_attachments" WHERE "active_storage_attachments"."id" = $1[0m  [["id", 8]]
  ↳ app/controllers/players_controller.rb:64:in `update_image'
  [1m[36mImage Load (0.1ms)[0m  [1m[34mSELECT "images".* FROM "images" WHERE "images"."id" = $1 LIMIT $2[0m  [["id", nil], ["LIMIT", 1]]
  ↳ app/controllers/players_controller.rb:64:in `update_image'
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/players_controller.rb:64:in `update_image'
  [1m[36mActiveStorage::Blob Load (0.2ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = $1 LIMIT $2[0m  [["id", 8], ["LIMIT", 1]]
  ↳ app/controllers/players_controller.rb:64:in `update_image'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/players_controller.rb:64:in `update_image'
  [1m[36mActiveStorage::Attachment Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "active_storage_attachments" WHERE "active_storage_attachments"."blob_id" = $1 LIMIT $2[0m  [["blob_id", 8], ["LIMIT", 1]]
  ↳ app/controllers/players_controller.rb:64:in `update_image'
  [1m[36mActiveStorage::VariantRecord Load (0.1ms)[0m  [1m[34mSELECT "active_storage_variant_records".* FROM "active_storage_variant_records" WHERE "active_storage_variant_records"."blob_id" = $1[0m  [["blob_id", 8]]
  ↳ app/controllers/players_controller.rb:64:in `update_image'
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = $1 AND "active_storage_attachments"."record_type" = $2 AND "active_storage_attachments"."name" = $3 LIMIT $4[0m  [["record_id", 8], ["record_type", "ActiveStorage::Blob"], ["name", "preview_image"], ["LIMIT", 1]]
  ↳ app/controllers/players_controller.rb:64:in `update_image'
  [1m[36mActiveStorage::Blob Destroy (0.2ms)[0m  [1m[31mDELETE FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = $1[0m  [["id", 8]]
  ↳ app/controllers/players_controller.rb:64:in `update_image'
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/players_controller.rb:64:in `update_image'
[36m  Disk Storage (0.1ms) [0m[31mDeleted file from key: 3hv34owj2ykz92ke0yz7rzatc3jb[0m
[36m  Disk Storage (0.0ms) [0m[31mDeleted files by key prefix: variants/3hv34owj2ykz92ke0yz7rzatc3jb/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/players_controller.rb:65:in `update_image'
  [1m[36mActiveStorage::Blob Load (0.2ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" INNER JOIN "active_storage_attachments" ON "active_storage_blobs"."id" = "active_storage_attachments"."blob_id" WHERE "active_storage_attachments"."record_id" = $1 AND "active_storage_attachments"."record_type" = $2 AND "active_storage_attachments"."name" = $3 LIMIT $4[0m  [["record_id", 4825], ["record_type", "Image"], ["name", "file"], ["LIMIT", 1]]
  ↳ app/controllers/players_controller.rb:65:in `update_image'
  [1m[36mActiveStorage::Blob Create (0.1ms)[0m  [1m[32mINSERT INTO "active_storage_blobs" ("key", "filename", "content_type", "metadata", "service_name", "byte_size", "checksum", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["key", "jipejjq0tiozubyt7its2daztgwt"], ["filename", "Perfil_LS.jpg"], ["content_type", "image/jpeg"], ["metadata", "{\"identified\":true}"], ["service_name", "local"], ["byte_size", 41525], ["checksum", "nI/KLUGrrXLsuJv61FGHcA=="], ["created_at", "2023-10-13 19:24:51.550777"]]
  ↳ app/controllers/players_controller.rb:65:in `update_image'
  [1m[36mActiveStorage::Attachment Create (0.2ms)[0m  [1m[32mINSERT INTO "active_storage_attachments" ("name", "record_type", "record_id", "blob_id", "created_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "file"], ["record_type", "Image"], ["record_id", 4825], ["blob_id", 9], ["created_at", "2023-10-13 19:24:51.551658"]]
  ↳ app/controllers/players_controller.rb:65:in `update_image'
  [1m[36mImage Update (0.1ms)[0m  [1m[33mUPDATE "images" SET "updated_at" = $1 WHERE "images"."id" = $2[0m  [["updated_at", "2023-10-13 19:24:51.552344"], ["id", "4825e432-c0a3-4bfe-a0e3-b2c4719cd2f1"]]
  ↳ app/controllers/players_controller.rb:65:in `update_image'
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/players_controller.rb:65:in `update_image'
[36m  Disk Storage (0.2ms) [0m[32mUploaded file to key: jipejjq0tiozubyt7its2daztgwt (checksum: nI/KLUGrrXLsuJv61FGHcA==)[0m
[ActiveJob] Enqueued ActiveStorage::AnalyzeJob (Job ID: c0a37f12-0e56-4a8d-bc79-e76c5bfc0e5b) to Async(default) with arguments: #<GlobalID:0x00007fadc4498008 @uri=#<URI::GID gid://cardgame-ruby/ActiveStorage::Blob/9>>
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/players_controller.rb:70:in `update_image'
  [1m[36mPlayer Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "players" WHERE "players"."nickname" = $1 AND "players"."id" != $2 LIMIT $3[0m  [["nickname", "enkinaurio"], ["id", "4dc86b4e-6e3e-4f70-b439-cffe72b513ec"], ["LIMIT", 1]]
  ↳ app/controllers/players_controller.rb:70:in `update_image'
  [1m[36mPlayer Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "players" WHERE "players"."email" = $1 AND "players"."id" != $2 LIMIT $3[0m  [["email", "lucasdavidmiranda8@hotmail.com"], ["id", "4dc86b4e-6e3e-4f70-b439-cffe72b513ec"], ["LIMIT", 1]]
  ↳ app/controllers/players_controller.rb:70:in `update_image'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/players_controller.rb:70:in `update_image'
Completed 200 OK in 38ms (Views: 0.2ms | ActiveRecord: 11.5ms | Allocations: 40054)


[ActiveJob] [ActiveStorage::AnalyzeJob] [c0a37f12-0e56-4a8d-bc79-e76c5bfc0e5b]   [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = $1 LIMIT $2[0m  [["id", 9], ["LIMIT", 1]]
[ActiveJob] [ActiveStorage::AnalyzeJob] [c0a37f12-0e56-4a8d-bc79-e76c5bfc0e5b] Performing ActiveStorage::AnalyzeJob (Job ID: c0a37f12-0e56-4a8d-bc79-e76c5bfc0e5b) from Async(default) enqueued at 2023-10-13T19:24:51Z with arguments: #<GlobalID:0x00007fadc45c39f0 @uri=#<URI::GID gid://cardgame-ruby/ActiveStorage::Blob/9>>
[ActiveJob] [ActiveStorage::AnalyzeJob] [c0a37f12-0e56-4a8d-bc79-e76c5bfc0e5b] Skipping image analysis because the ruby-vips gem isn't installed
[ActiveJob] [ActiveStorage::AnalyzeJob] [c0a37f12-0e56-4a8d-bc79-e76c5bfc0e5b]   [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [c0a37f12-0e56-4a8d-bc79-e76c5bfc0e5b]   [1m[36mActiveStorage::Blob Update (0.2ms)[0m  [1m[33mUPDATE "active_storage_blobs" SET "metadata" = $1 WHERE "active_storage_blobs"."id" = $2[0m  [["metadata", "{\"identified\":true,\"analyzed\":true}"], ["id", 9]]
[ActiveJob] [ActiveStorage::AnalyzeJob] [c0a37f12-0e56-4a8d-bc79-e76c5bfc0e5b]   [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [c0a37f12-0e56-4a8d-bc79-e76c5bfc0e5b] Performed ActiveStorage::AnalyzeJob (Job ID: c0a37f12-0e56-4a8d-bc79-e76c5bfc0e5b) from Async(default) in 15.72ms
Started PUT "/players/4dc86b4e-6e3e-4f70-b439-cffe72b513ec/update_image" for ::1 at 2023-10-13 16:26:07 -0300
Processing by PlayersController#update_image as */*
  Parameters: {"image"=>#<ActionDispatch::Http::UploadedFile:0x00007fadc0d3e760 @tempfile=#<Tempfile:/tmp/RackMultipart20231013-55582-9pw92.jpg>, @content_type="image/jpeg", @original_filename="Perfil_LS.jpg", @headers="Content-Disposition: form-data; name=\"image\"; filename=\"Perfil_LS.jpg\"\r\nContent-Type: image/jpeg\r\n">, "player_id"=>"4dc86b4e-6e3e-4f70-b439-cffe72b513ec"}
  [1m[36mPlayer Load (0.1ms)[0m  [1m[34mSELECT "players".* FROM "players" WHERE "players"."token" = $1 LIMIT $2[0m  [["token", "9884b51a-17db-4772-bc07-ed1bad870c2a"], ["LIMIT", 1]]
  ↳ app/helpers/session_helper.rb:4:in `check_token'
  [1m[36mPlayer Load (0.2ms)[0m  [1m[34mSELECT "players".* FROM "players" WHERE "players"."id" = $1 LIMIT $2[0m  [["id", "4dc86b4e-6e3e-4f70-b439-cffe72b513ec"], ["LIMIT", 1]]
  ↳ app/controllers/players_controller.rb:61:in `update_image'
Completed 500 Internal Server Error in 7ms (ActiveRecord: 1.9ms | Allocations: 6919)


  
ArgumentError (Unknown validator: 'AttachedValidator'):
  
app/models/image.rb:11:in `<class:Image>'
app/models/image.rb:1:in `<main>'
app/controllers/players_controller.rb:63:in `update_image'
Started PUT "/players/4dc86b4e-6e3e-4f70-b439-cffe72b513ec/update_image" for ::1 at 2023-10-13 16:29:36 -0300
Processing by PlayersController#update_image as */*
  Parameters: {"image"=>#<ActionDispatch::Http::UploadedFile:0x00007fadc0de61e0 @tempfile=#<Tempfile:/tmp/RackMultipart20231013-55582-scpbuc.jpg>, @content_type="image/jpeg", @original_filename="Perfil_LS.jpg", @headers="Content-Disposition: form-data; name=\"image\"; filename=\"Perfil_LS.jpg\"\r\nContent-Type: image/jpeg\r\n">, "player_id"=>"4dc86b4e-6e3e-4f70-b439-cffe72b513ec"}
  [1m[36mPlayer Load (0.1ms)[0m  [1m[34mSELECT "players".* FROM "players" WHERE "players"."token" = $1 LIMIT $2[0m  [["token", "9884b51a-17db-4772-bc07-ed1bad870c2a"], ["LIMIT", 1]]
  ↳ app/helpers/session_helper.rb:4:in `check_token'
  [1m[36mPlayer Load (0.1ms)[0m  [1m[34mSELECT "players".* FROM "players" WHERE "players"."id" = $1 LIMIT $2[0m  [["id", "4dc86b4e-6e3e-4f70-b439-cffe72b513ec"], ["LIMIT", 1]]
  ↳ app/controllers/players_controller.rb:61:in `update_image'
Completed 500 Internal Server Error in 7ms (ActiveRecord: 1.8ms | Allocations: 6943)


  
ArgumentError (Unknown validator: 'AttachedValidator'):
  
app/models/image.rb:11:in `<class:Image>'
app/models/image.rb:1:in `<main>'
app/controllers/players_controller.rb:63:in `update_image'
Started PUT "/players/4dc86b4e-6e3e-4f70-b439-cffe72b513ec/update_image" for ::1 at 2023-10-13 16:30:14 -0300
Processing by PlayersController#update_image as */*
  Parameters: {"image"=>#<ActionDispatch::Http::UploadedFile:0x00007fadc444e2f0 @tempfile=#<Tempfile:/tmp/RackMultipart20231013-55582-wvwmbg.jpg>, @content_type="image/jpeg", @original_filename="Perfil_LS.jpg", @headers="Content-Disposition: form-data; name=\"image\"; filename=\"Perfil_LS.jpg\"\r\nContent-Type: image/jpeg\r\n">, "player_id"=>"4dc86b4e-6e3e-4f70-b439-cffe72b513ec"}
  [1m[36mPlayer Load (0.1ms)[0m  [1m[34mSELECT "players".* FROM "players" WHERE "players"."token" = $1 LIMIT $2[0m  [["token", "9884b51a-17db-4772-bc07-ed1bad870c2a"], ["LIMIT", 1]]
  ↳ app/helpers/session_helper.rb:4:in `check_token'
  [1m[36mPlayer Load (0.1ms)[0m  [1m[34mSELECT "players".* FROM "players" WHERE "players"."id" = $1 LIMIT $2[0m  [["id", "4dc86b4e-6e3e-4f70-b439-cffe72b513ec"], ["LIMIT", 1]]
  ↳ app/controllers/players_controller.rb:61:in `update_image'
Completed 500 Internal Server Error in 7ms (ActiveRecord: 2.2ms | Allocations: 7017)


  
ArgumentError (Unknown validator: 'ContentTypeValidator'):
  
app/models/image.rb:12:in `<class:Image>'
app/models/image.rb:1:in `<main>'
app/controllers/players_controller.rb:63:in `update_image'
Started PUT "/players/4dc86b4e-6e3e-4f70-b439-cffe72b513ec/update_image" for ::1 at 2023-10-13 16:32:12 -0300
  [1m[36mActiveRecord::SchemaMigration Pluck (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by PlayersController#update_image as */*
  Parameters: {"image"=>#<ActionDispatch::Http::UploadedFile:0x00007f33a3ca2870 @tempfile=#<Tempfile:/tmp/RackMultipart20231013-57133-w4tjgu.jpg>, @content_type="image/jpeg", @original_filename="Perfil_LS.jpg", @headers="Content-Disposition: form-data; name=\"image\"; filename=\"Perfil_LS.jpg\"\r\nContent-Type: image/jpeg\r\n">, "player_id"=>"4dc86b4e-6e3e-4f70-b439-cffe72b513ec"}
  [1m[36mPlayer Load (0.2ms)[0m  [1m[34mSELECT "players".* FROM "players" WHERE "players"."token" = $1 LIMIT $2[0m  [["token", "9884b51a-17db-4772-bc07-ed1bad870c2a"], ["LIMIT", 1]]
  ↳ app/helpers/session_helper.rb:4:in `check_token'
  [1m[36mPlayer Load (0.1ms)[0m  [1m[34mSELECT "players".* FROM "players" WHERE "players"."id" = $1 LIMIT $2[0m  [["id", "4dc86b4e-6e3e-4f70-b439-cffe72b513ec"], ["LIMIT", 1]]
  ↳ app/controllers/players_controller.rb:61:in `update_image'
  [1m[36mImage Load (0.2ms)[0m  [1m[34mSELECT "images".* FROM "images" WHERE "images"."player_id" = $1 LIMIT $2[0m  [["player_id", "4dc86b4e-6e3e-4f70-b439-cffe72b513ec"], ["LIMIT", 1]]
  ↳ app/controllers/players_controller.rb:63:in `update_image'
  [1m[36mActiveStorage::Attachment Load (0.4ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = $1 AND "active_storage_attachments"."record_type" = $2 AND "active_storage_attachments"."name" = $3 LIMIT $4[0m  [["record_id", 4825], ["record_type", "Image"], ["name", "file"], ["LIMIT", 1]]
  ↳ app/controllers/players_controller.rb:64:in `update_image'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/players_controller.rb:64:in `update_image'
  [1m[36mActiveStorage::Attachment Destroy (0.2ms)[0m  [1m[31mDELETE FROM "active_storage_attachments" WHERE "active_storage_attachments"."id" = $1[0m  [["id", 9]]
  ↳ app/controllers/players_controller.rb:64:in `update_image'
  [1m[36mImage Load (0.2ms)[0m  [1m[34mSELECT "images".* FROM "images" WHERE "images"."id" = $1 LIMIT $2[0m  [["id", nil], ["LIMIT", 1]]
  ↳ app/controllers/players_controller.rb:64:in `update_image'
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/players_controller.rb:64:in `update_image'
  [1m[36mActiveStorage::Blob Load (0.2ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = $1 LIMIT $2[0m  [["id", 9], ["LIMIT", 1]]
  ↳ app/controllers/players_controller.rb:64:in `update_image'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/players_controller.rb:64:in `update_image'
  [1m[36mActiveStorage::Attachment Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "active_storage_attachments" WHERE "active_storage_attachments"."blob_id" = $1 LIMIT $2[0m  [["blob_id", 9], ["LIMIT", 1]]
  ↳ app/controllers/players_controller.rb:64:in `update_image'
  [1m[36mActiveStorage::VariantRecord Load (0.2ms)[0m  [1m[34mSELECT "active_storage_variant_records".* FROM "active_storage_variant_records" WHERE "active_storage_variant_records"."blob_id" = $1[0m  [["blob_id", 9]]
  ↳ app/controllers/players_controller.rb:64:in `update_image'
  [1m[36mActiveStorage::Attachment Load (0.2ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = $1 AND "active_storage_attachments"."record_type" = $2 AND "active_storage_attachments"."name" = $3 LIMIT $4[0m  [["record_id", 9], ["record_type", "ActiveStorage::Blob"], ["name", "preview_image"], ["LIMIT", 1]]
  ↳ app/controllers/players_controller.rb:64:in `update_image'
  [1m[36mActiveStorage::Blob Destroy (0.4ms)[0m  [1m[31mDELETE FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = $1[0m  [["id", 9]]
  ↳ app/controllers/players_controller.rb:64:in `update_image'
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/players_controller.rb:64:in `update_image'
[36m  Disk Storage (0.1ms) [0m[31mDeleted file from key: jipejjq0tiozubyt7its2daztgwt[0m
[36m  Disk Storage (0.0ms) [0m[31mDeleted files by key prefix: variants/jipejjq0tiozubyt7its2daztgwt/[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/players_controller.rb:65:in `update_image'
  [1m[36mActiveStorage::Blob Load (0.5ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" INNER JOIN "active_storage_attachments" ON "active_storage_blobs"."id" = "active_storage_attachments"."blob_id" WHERE "active_storage_attachments"."record_id" = $1 AND "active_storage_attachments"."record_type" = $2 AND "active_storage_attachments"."name" = $3 LIMIT $4[0m  [["record_id", 4825], ["record_type", "Image"], ["name", "file"], ["LIMIT", 1]]
  ↳ app/controllers/players_controller.rb:65:in `update_image'
  [1m[36mActiveStorage::Blob Create (0.3ms)[0m  [1m[32mINSERT INTO "active_storage_blobs" ("key", "filename", "content_type", "metadata", "service_name", "byte_size", "checksum", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["key", "wo8amyx98d33zxpj9pgwn9tlbnuv"], ["filename", "Perfil_LS.jpg"], ["content_type", "image/jpeg"], ["metadata", "{\"identified\":true}"], ["service_name", "local"], ["byte_size", 41525], ["checksum", "nI/KLUGrrXLsuJv61FGHcA=="], ["created_at", "2023-10-13 19:32:12.474445"]]
  ↳ app/controllers/players_controller.rb:65:in `update_image'
  [1m[36mActiveStorage::Attachment Create (0.4ms)[0m  [1m[32mINSERT INTO "active_storage_attachments" ("name", "record_type", "record_id", "blob_id", "created_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "file"], ["record_type", "Image"], ["record_id", 4825], ["blob_id", 10], ["created_at", "2023-10-13 19:32:12.476375"]]
  ↳ app/controllers/players_controller.rb:65:in `update_image'
  [1m[36mImage Update (0.2ms)[0m  [1m[33mUPDATE "images" SET "updated_at" = $1 WHERE "images"."id" = $2[0m  [["updated_at", "2023-10-13 19:32:12.477740"], ["id", "4825e432-c0a3-4bfe-a0e3-b2c4719cd2f1"]]
  ↳ app/controllers/players_controller.rb:65:in `update_image'
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/players_controller.rb:65:in `update_image'
[36m  Disk Storage (0.3ms) [0m[32mUploaded file to key: wo8amyx98d33zxpj9pgwn9tlbnuv (checksum: nI/KLUGrrXLsuJv61FGHcA==)[0m
[ActiveJob] Enqueued ActiveStorage::AnalyzeJob (Job ID: efe80808-0149-4ade-a621-6b482b3cd6b3) to Async(default) with arguments: #<GlobalID:0x00007f33a1c0d150 @uri=#<URI::GID gid://cardgame-ruby/ActiveStorage::Blob/10>>
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/players_controller.rb:70:in `update_image'
  [1m[36mPlayer Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "players" WHERE "players"."nickname" = $1 AND "players"."id" != $2 LIMIT $3[0m  [["nickname", "enkinaurio"], ["id", "4dc86b4e-6e3e-4f70-b439-cffe72b513ec"], ["LIMIT", 1]]
  ↳ app/controllers/players_controller.rb:70:in `update_image'
  [1m[36mPlayer Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "players" WHERE "players"."email" = $1 AND "players"."id" != $2 LIMIT $3[0m  [["email", "lucasdavidmiranda8@hotmail.com"], ["id", "4dc86b4e-6e3e-4f70-b439-cffe72b513ec"], ["LIMIT", 1]]
  ↳ app/controllers/players_controller.rb:70:in `update_image'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/players_controller.rb:70:in `update_image'
Completed 200 OK in 74ms (Views: 0.2ms | ActiveRecord: 14.9ms | Allocations: 58391)


[ActiveJob] [ActiveStorage::AnalyzeJob] [efe80808-0149-4ade-a621-6b482b3cd6b3]   [1m[36mActiveStorage::Blob Load (0.2ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = $1 LIMIT $2[0m  [["id", 10], ["LIMIT", 1]]
[ActiveJob] [ActiveStorage::AnalyzeJob] [efe80808-0149-4ade-a621-6b482b3cd6b3] Performing ActiveStorage::AnalyzeJob (Job ID: efe80808-0149-4ade-a621-6b482b3cd6b3) from Async(default) enqueued at 2023-10-13T19:32:12Z with arguments: #<GlobalID:0x00007f33a5079fb0 @uri=#<URI::GID gid://cardgame-ruby/ActiveStorage::Blob/10>>
[ActiveJob] [ActiveStorage::AnalyzeJob] [efe80808-0149-4ade-a621-6b482b3cd6b3] Skipping image analysis because the ruby-vips gem isn't installed
[ActiveJob] [ActiveStorage::AnalyzeJob] [efe80808-0149-4ade-a621-6b482b3cd6b3]   [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [efe80808-0149-4ade-a621-6b482b3cd6b3]   [1m[36mActiveStorage::Blob Update (0.2ms)[0m  [1m[33mUPDATE "active_storage_blobs" SET "metadata" = $1 WHERE "active_storage_blobs"."id" = $2[0m  [["metadata", "{\"identified\":true,\"analyzed\":true}"], ["id", 10]]
[ActiveJob] [ActiveStorage::AnalyzeJob] [efe80808-0149-4ade-a621-6b482b3cd6b3]   [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [efe80808-0149-4ade-a621-6b482b3cd6b3] Performed ActiveStorage::AnalyzeJob (Job ID: efe80808-0149-4ade-a621-6b482b3cd6b3) from Async(default) in 46.09ms
Started PUT "/players/4dc86b4e-6e3e-4f70-b439-cffe72b513ec/update_image" for ::1 at 2023-10-13 16:32:34 -0300
Processing by PlayersController#update_image as */*
  Parameters: {"image"=>#<ActionDispatch::Http::UploadedFile:0x00007f33a4b00070 @tempfile=#<Tempfile:/tmp/RackMultipart20231013-57133-gjees6.jpg>, @content_type="image/jpeg", @original_filename="Perfil_LS.jpg", @headers="Content-Disposition: form-data; name=\"image\"; filename=\"Perfil_LS.jpg\"\r\nContent-Type: image/jpeg\r\n">, "player_id"=>"4dc86b4e-6e3e-4f70-b439-cffe72b513ec"}
  [1m[36mPlayer Load (0.3ms)[0m  [1m[34mSELECT "players".* FROM "players" WHERE "players"."token" = $1 LIMIT $2[0m  [["token", "9884b51a-17db-4772-bc07-ed1bad870c2a"], ["LIMIT", 1]]
  ↳ app/helpers/session_helper.rb:4:in `check_token'
  [1m[36mPlayer Load (0.2ms)[0m  [1m[34mSELECT "players".* FROM "players" WHERE "players"."id" = $1 LIMIT $2[0m  [["id", "4dc86b4e-6e3e-4f70-b439-cffe72b513ec"], ["LIMIT", 1]]
  ↳ app/controllers/players_controller.rb:61:in `update_image'
  [1m[36mImage Load (0.2ms)[0m  [1m[34mSELECT "images".* FROM "images" WHERE "images"."player_id" = $1 LIMIT $2[0m  [["player_id", "4dc86b4e-6e3e-4f70-b439-cffe72b513ec"], ["LIMIT", 1]]
  ↳ app/controllers/players_controller.rb:63:in `update_image'
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = $1 AND "active_storage_attachments"."record_type" = $2 AND "active_storage_attachments"."name" = $3 LIMIT $4[0m  [["record_id", 4825], ["record_type", "Image"], ["name", "file"], ["LIMIT", 1]]
  ↳ app/controllers/players_controller.rb:64:in `update_image'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/players_controller.rb:64:in `update_image'
  [1m[36mActiveStorage::Attachment Destroy (0.1ms)[0m  [1m[31mDELETE FROM "active_storage_attachments" WHERE "active_storage_attachments"."id" = $1[0m  [["id", 10]]
  ↳ app/controllers/players_controller.rb:64:in `update_image'
  [1m[36mImage Load (0.1ms)[0m  [1m[34mSELECT "images".* FROM "images" WHERE "images"."id" = $1 LIMIT $2[0m  [["id", nil], ["LIMIT", 1]]
  ↳ app/controllers/players_controller.rb:64:in `update_image'
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/players_controller.rb:64:in `update_image'
  [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = $1 LIMIT $2[0m  [["id", 10], ["LIMIT", 1]]
  ↳ app/controllers/players_controller.rb:64:in `update_image'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/players_controller.rb:64:in `update_image'
  [1m[36mActiveStorage::Attachment Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "active_storage_attachments" WHERE "active_storage_attachments"."blob_id" = $1 LIMIT $2[0m  [["blob_id", 10], ["LIMIT", 1]]
  ↳ app/controllers/players_controller.rb:64:in `update_image'
  [1m[36mActiveStorage::VariantRecord Load (0.1ms)[0m  [1m[34mSELECT "active_storage_variant_records".* FROM "active_storage_variant_records" WHERE "active_storage_variant_records"."blob_id" = $1[0m  [["blob_id", 10]]
  ↳ app/controllers/players_controller.rb:64:in `update_image'
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = $1 AND "active_storage_attachments"."record_type" = $2 AND "active_storage_attachments"."name" = $3 LIMIT $4[0m  [["record_id", 10], ["record_type", "ActiveStorage::Blob"], ["name", "preview_image"], ["LIMIT", 1]]
  ↳ app/controllers/players_controller.rb:64:in `update_image'
  [1m[36mActiveStorage::Blob Destroy (0.2ms)[0m  [1m[31mDELETE FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = $1[0m  [["id", 10]]
  ↳ app/controllers/players_controller.rb:64:in `update_image'
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/players_controller.rb:64:in `update_image'
[36m  Disk Storage (0.1ms) [0m[31mDeleted file from key: wo8amyx98d33zxpj9pgwn9tlbnuv[0m
[36m  Disk Storage (0.0ms) [0m[31mDeleted files by key prefix: variants/wo8amyx98d33zxpj9pgwn9tlbnuv/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/players_controller.rb:65:in `update_image'
  [1m[36mActiveStorage::Blob Load (0.2ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" INNER JOIN "active_storage_attachments" ON "active_storage_blobs"."id" = "active_storage_attachments"."blob_id" WHERE "active_storage_attachments"."record_id" = $1 AND "active_storage_attachments"."record_type" = $2 AND "active_storage_attachments"."name" = $3 LIMIT $4[0m  [["record_id", 4825], ["record_type", "Image"], ["name", "file"], ["LIMIT", 1]]
  ↳ app/controllers/players_controller.rb:65:in `update_image'
  [1m[36mActiveStorage::Blob Create (0.2ms)[0m  [1m[32mINSERT INTO "active_storage_blobs" ("key", "filename", "content_type", "metadata", "service_name", "byte_size", "checksum", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["key", "c9rbbzzx9zcqjvfc4prn5uav9iwi"], ["filename", "Perfil_LS.jpg"], ["content_type", "image/jpeg"], ["metadata", "{\"identified\":true}"], ["service_name", "local"], ["byte_size", 41525], ["checksum", "nI/KLUGrrXLsuJv61FGHcA=="], ["created_at", "2023-10-13 19:32:34.595406"]]
  ↳ app/controllers/players_controller.rb:65:in `update_image'
  [1m[36mActiveStorage::Attachment Create (0.2ms)[0m  [1m[32mINSERT INTO "active_storage_attachments" ("name", "record_type", "record_id", "blob_id", "created_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "file"], ["record_type", "Image"], ["record_id", 4825], ["blob_id", 11], ["created_at", "2023-10-13 19:32:34.596326"]]
  ↳ app/controllers/players_controller.rb:65:in `update_image'
  [1m[36mImage Update (0.1ms)[0m  [1m[33mUPDATE "images" SET "updated_at" = $1 WHERE "images"."id" = $2[0m  [["updated_at", "2023-10-13 19:32:34.597247"], ["id", "4825e432-c0a3-4bfe-a0e3-b2c4719cd2f1"]]
  ↳ app/controllers/players_controller.rb:65:in `update_image'
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/players_controller.rb:65:in `update_image'
[36m  Disk Storage (0.2ms) [0m[32mUploaded file to key: c9rbbzzx9zcqjvfc4prn5uav9iwi (checksum: nI/KLUGrrXLsuJv61FGHcA==)[0m
[ActiveJob] Enqueued ActiveStorage::AnalyzeJob (Job ID: 07b6c629-564a-4123-9987-4f66fda59605) to Async(default) with arguments: #<GlobalID:0x00007f33a4b2f708 @uri=#<URI::GID gid://cardgame-ruby/ActiveStorage::Blob/11>>
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/players_controller.rb:70:in `update_image'
  [1m[36mPlayer Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "players" WHERE "players"."nickname" = $1 AND "players"."id" != $2 LIMIT $3[0m  [["nickname", "enkinaurio"], ["id", "4dc86b4e-6e3e-4f70-b439-cffe72b513ec"], ["LIMIT", 1]]
  ↳ app/controllers/players_controller.rb:70:in `update_image'
  [1m[36mPlayer Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "players" WHERE "players"."email" = $1 AND "players"."id" != $2 LIMIT $3[0m  [["email", "lucasdavidmiranda8@hotmail.com"], ["id", "4dc86b4e-6e3e-4f70-b439-cffe72b513ec"], ["LIMIT", 1]]
  ↳ app/controllers/players_controller.rb:70:in `update_image'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/players_controller.rb:70:in `update_image'
Completed 500 Internal Server Error in 49ms (ActiveRecord: 11.5ms | Allocations: 40292)


  
ArgumentError (Missing host to link to! Please provide the :host parameter, set default_url_options[:host], or set :only_path to true):
  
app/models/image.rb:22:in `full_url'
app/controllers/players_controller.rb:71:in `update_image'
[ActiveJob] [ActiveStorage::AnalyzeJob] [07b6c629-564a-4123-9987-4f66fda59605]   [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = $1 LIMIT $2[0m  [["id", 11], ["LIMIT", 1]]
[ActiveJob] [ActiveStorage::AnalyzeJob] [07b6c629-564a-4123-9987-4f66fda59605] Performing ActiveStorage::AnalyzeJob (Job ID: 07b6c629-564a-4123-9987-4f66fda59605) from Async(default) enqueued at 2023-10-13T19:32:34Z with arguments: #<GlobalID:0x00007f33a1d09248 @uri=#<URI::GID gid://cardgame-ruby/ActiveStorage::Blob/11>>
[ActiveJob] [ActiveStorage::AnalyzeJob] [07b6c629-564a-4123-9987-4f66fda59605] Skipping image analysis because the ruby-vips gem isn't installed
[ActiveJob] [ActiveStorage::AnalyzeJob] [07b6c629-564a-4123-9987-4f66fda59605]   [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [07b6c629-564a-4123-9987-4f66fda59605]   [1m[36mActiveStorage::Blob Update (0.1ms)[0m  [1m[33mUPDATE "active_storage_blobs" SET "metadata" = $1 WHERE "active_storage_blobs"."id" = $2[0m  [["metadata", "{\"identified\":true,\"analyzed\":true}"], ["id", 11]]
[ActiveJob] [ActiveStorage::AnalyzeJob] [07b6c629-564a-4123-9987-4f66fda59605]   [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [07b6c629-564a-4123-9987-4f66fda59605] Performed ActiveStorage::AnalyzeJob (Job ID: 07b6c629-564a-4123-9987-4f66fda59605) from Async(default) in 9.63ms
Started PUT "/players/4dc86b4e-6e3e-4f70-b439-cffe72b513ec/update_image" for ::1 at 2023-10-13 16:44:05 -0300
  [1m[36mActiveRecord::SchemaMigration Pluck (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by PlayersController#update_image as */*
  Parameters: {"image"=>#<ActionDispatch::Http::UploadedFile:0x00007fd117a84bf8 @tempfile=#<Tempfile:/tmp/RackMultipart20231013-58033-rsd09v.jpg>, @content_type="image/jpeg", @original_filename="Perfil_LS.jpg", @headers="Content-Disposition: form-data; name=\"image\"; filename=\"Perfil_LS.jpg\"\r\nContent-Type: image/jpeg\r\n">, "player_id"=>"4dc86b4e-6e3e-4f70-b439-cffe72b513ec"}
  [1m[36mPlayer Load (0.2ms)[0m  [1m[34mSELECT "players".* FROM "players" WHERE "players"."token" = $1 LIMIT $2[0m  [["token", "9884b51a-17db-4772-bc07-ed1bad870c2a"], ["LIMIT", 1]]
  ↳ app/helpers/session_helper.rb:4:in `check_token'
  [1m[36mPlayer Load (0.1ms)[0m  [1m[34mSELECT "players".* FROM "players" WHERE "players"."id" = $1 LIMIT $2[0m  [["id", "4dc86b4e-6e3e-4f70-b439-cffe72b513ec"], ["LIMIT", 1]]
  ↳ app/controllers/players_controller.rb:61:in `update_image'
  [1m[36mImage Load (0.1ms)[0m  [1m[34mSELECT "images".* FROM "images" WHERE "images"."player_id" = $1 LIMIT $2[0m  [["player_id", "4dc86b4e-6e3e-4f70-b439-cffe72b513ec"], ["LIMIT", 1]]
  ↳ app/controllers/players_controller.rb:63:in `update_image'
  [1m[36mActiveStorage::Attachment Load (0.2ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = $1 AND "active_storage_attachments"."record_type" = $2 AND "active_storage_attachments"."name" = $3 LIMIT $4[0m  [["record_id", 4825], ["record_type", "Image"], ["name", "file"], ["LIMIT", 1]]
  ↳ app/controllers/players_controller.rb:64:in `update_image'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/players_controller.rb:64:in `update_image'
  [1m[36mActiveStorage::Attachment Destroy (0.2ms)[0m  [1m[31mDELETE FROM "active_storage_attachments" WHERE "active_storage_attachments"."id" = $1[0m  [["id", 11]]
  ↳ app/controllers/players_controller.rb:64:in `update_image'
  [1m[36mImage Load (0.1ms)[0m  [1m[34mSELECT "images".* FROM "images" WHERE "images"."id" = $1 LIMIT $2[0m  [["id", nil], ["LIMIT", 1]]
  ↳ app/controllers/players_controller.rb:64:in `update_image'
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/players_controller.rb:64:in `update_image'
  [1m[36mActiveStorage::Blob Load (0.2ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = $1 LIMIT $2[0m  [["id", 11], ["LIMIT", 1]]
  ↳ app/controllers/players_controller.rb:64:in `update_image'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/players_controller.rb:64:in `update_image'
  [1m[36mActiveStorage::Attachment Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "active_storage_attachments" WHERE "active_storage_attachments"."blob_id" = $1 LIMIT $2[0m  [["blob_id", 11], ["LIMIT", 1]]
  ↳ app/controllers/players_controller.rb:64:in `update_image'
  [1m[36mActiveStorage::VariantRecord Load (0.2ms)[0m  [1m[34mSELECT "active_storage_variant_records".* FROM "active_storage_variant_records" WHERE "active_storage_variant_records"."blob_id" = $1[0m  [["blob_id", 11]]
  ↳ app/controllers/players_controller.rb:64:in `update_image'
  [1m[36mActiveStorage::Attachment Load (0.1ms)[0m  [1m[34mSELECT "active_storage_attachments".* FROM "active_storage_attachments" WHERE "active_storage_attachments"."record_id" = $1 AND "active_storage_attachments"."record_type" = $2 AND "active_storage_attachments"."name" = $3 LIMIT $4[0m  [["record_id", 11], ["record_type", "ActiveStorage::Blob"], ["name", "preview_image"], ["LIMIT", 1]]
  ↳ app/controllers/players_controller.rb:64:in `update_image'
  [1m[36mActiveStorage::Blob Destroy (0.3ms)[0m  [1m[31mDELETE FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = $1[0m  [["id", 11]]
  ↳ app/controllers/players_controller.rb:64:in `update_image'
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/players_controller.rb:64:in `update_image'
[36m  Disk Storage (0.1ms) [0m[31mDeleted file from key: c9rbbzzx9zcqjvfc4prn5uav9iwi[0m
[36m  Disk Storage (0.0ms) [0m[31mDeleted files by key prefix: variants/c9rbbzzx9zcqjvfc4prn5uav9iwi/[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/players_controller.rb:65:in `update_image'
  [1m[36mActiveStorage::Blob Load (0.3ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" INNER JOIN "active_storage_attachments" ON "active_storage_blobs"."id" = "active_storage_attachments"."blob_id" WHERE "active_storage_attachments"."record_id" = $1 AND "active_storage_attachments"."record_type" = $2 AND "active_storage_attachments"."name" = $3 LIMIT $4[0m  [["record_id", 4825], ["record_type", "Image"], ["name", "file"], ["LIMIT", 1]]
  ↳ app/controllers/players_controller.rb:65:in `update_image'
  [1m[36mActiveStorage::Blob Create (0.2ms)[0m  [1m[32mINSERT INTO "active_storage_blobs" ("key", "filename", "content_type", "metadata", "service_name", "byte_size", "checksum", "created_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["key", "27gdkn3mstqe49obfafbe9aiubun"], ["filename", "Perfil_LS.jpg"], ["content_type", "image/jpeg"], ["metadata", "{\"identified\":true}"], ["service_name", "local"], ["byte_size", 41525], ["checksum", "nI/KLUGrrXLsuJv61FGHcA=="], ["created_at", "2023-10-13 19:44:05.458356"]]
  ↳ app/controllers/players_controller.rb:65:in `update_image'
  [1m[36mActiveStorage::Attachment Create (0.2ms)[0m  [1m[32mINSERT INTO "active_storage_attachments" ("name", "record_type", "record_id", "blob_id", "created_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "file"], ["record_type", "Image"], ["record_id", 4825], ["blob_id", 12], ["created_at", "2023-10-13 19:44:05.459464"]]
  ↳ app/controllers/players_controller.rb:65:in `update_image'
  [1m[36mImage Update (0.1ms)[0m  [1m[33mUPDATE "images" SET "updated_at" = $1 WHERE "images"."id" = $2[0m  [["updated_at", "2023-10-13 19:44:05.460242"], ["id", "4825e432-c0a3-4bfe-a0e3-b2c4719cd2f1"]]
  ↳ app/controllers/players_controller.rb:65:in `update_image'
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/players_controller.rb:65:in `update_image'
[36m  Disk Storage (0.2ms) [0m[32mUploaded file to key: 27gdkn3mstqe49obfafbe9aiubun (checksum: nI/KLUGrrXLsuJv61FGHcA==)[0m
[ActiveJob] Enqueued ActiveStorage::AnalyzeJob (Job ID: c1efd5d4-60a9-47ee-bcf6-be3cd1f9e584) to Async(default) with arguments: #<GlobalID:0x00007fd115a181d0 @uri=#<URI::GID gid://cardgame-ruby/ActiveStorage::Blob/12>>
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/players_controller.rb:70:in `update_image'
  [1m[36mPlayer Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "players" WHERE "players"."nickname" = $1 AND "players"."id" != $2 LIMIT $3[0m  [["nickname", "enkinaurio"], ["id", "4dc86b4e-6e3e-4f70-b439-cffe72b513ec"], ["LIMIT", 1]]
  ↳ app/controllers/players_controller.rb:70:in `update_image'
  [1m[36mPlayer Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "players" WHERE "players"."email" = $1 AND "players"."id" != $2 LIMIT $3[0m  [["email", "lucasdavidmiranda8@hotmail.com"], ["id", "4dc86b4e-6e3e-4f70-b439-cffe72b513ec"], ["LIMIT", 1]]
  ↳ app/controllers/players_controller.rb:70:in `update_image'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/players_controller.rb:70:in `update_image'
Completed 200 OK in 55ms (Views: 0.2ms | ActiveRecord: 11.4ms | Allocations: 58423)


[ActiveJob] [ActiveStorage::AnalyzeJob] [c1efd5d4-60a9-47ee-bcf6-be3cd1f9e584]   [1m[36mActiveStorage::Blob Load (0.1ms)[0m  [1m[34mSELECT "active_storage_blobs".* FROM "active_storage_blobs" WHERE "active_storage_blobs"."id" = $1 LIMIT $2[0m  [["id", 12], ["LIMIT", 1]]
[ActiveJob] [ActiveStorage::AnalyzeJob] [c1efd5d4-60a9-47ee-bcf6-be3cd1f9e584] Performing ActiveStorage::AnalyzeJob (Job ID: c1efd5d4-60a9-47ee-bcf6-be3cd1f9e584) from Async(default) enqueued at 2023-10-13T19:44:05Z with arguments: #<GlobalID:0x00007fd115788140 @uri=#<URI::GID gid://cardgame-ruby/ActiveStorage::Blob/12>>
[ActiveJob] [ActiveStorage::AnalyzeJob] [c1efd5d4-60a9-47ee-bcf6-be3cd1f9e584] Skipping image analysis because the ruby-vips gem isn't installed
[ActiveJob] [ActiveStorage::AnalyzeJob] [c1efd5d4-60a9-47ee-bcf6-be3cd1f9e584]   [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [c1efd5d4-60a9-47ee-bcf6-be3cd1f9e584]   [1m[36mActiveStorage::Blob Update (0.2ms)[0m  [1m[33mUPDATE "active_storage_blobs" SET "metadata" = $1 WHERE "active_storage_blobs"."id" = $2[0m  [["metadata", "{\"identified\":true,\"analyzed\":true}"], ["id", 12]]
[ActiveJob] [ActiveStorage::AnalyzeJob] [c1efd5d4-60a9-47ee-bcf6-be3cd1f9e584]   [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mCOMMIT[0m
[ActiveJob] [ActiveStorage::AnalyzeJob] [c1efd5d4-60a9-47ee-bcf6-be3cd1f9e584] Performed ActiveStorage::AnalyzeJob (Job ID: c1efd5d4-60a9-47ee-bcf6-be3cd1f9e584) from Async(default) in 20.84ms
Started GET "/boards" for ::1 at 2023-10-15 17:27:57 -0300
  [1m[36mActiveRecord::SchemaMigration Pluck (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  
ActionController::RoutingError (No route matches [GET] "/boards"):
  
Started GET "/boards/:id" for ::1 at 2023-10-15 17:30:44 -0300
Processing by BoardsController#show as */*
  Parameters: {"id"=>":id", "board"=>{}}
  [1m[36mBoard Load (0.2ms)[0m  [1m[34mSELECT "boards".* FROM "boards" WHERE "boards"."id" = $1 LIMIT $2[0m  [["id", nil], ["LIMIT", 1]]
  ↳ app/controllers/boards_controller.rb:12:in `show'
Completed 404 Not Found in 4ms (ActiveRecord: 2.3ms | Allocations: 2721)


  
ActiveRecord::RecordNotFound (Couldn't find Board with 'id'=:id):
  
app/controllers/boards_controller.rb:12:in `show'
Started GET "/boards" for ::1 at 2023-10-15 17:31:03 -0300
Processing by BoardsController#index as */*
  Parameters: {"board"=>{}}
  [1m[36mBoard Load (0.2ms)[0m  [1m[34mSELECT "boards".* FROM "boards"[0m
  ↳ app/controllers/boards_controller.rb:8:in `index'
Completed 200 OK in 1ms (Views: 0.8ms | ActiveRecord: 0.2ms | Allocations: 919)


Started POST "/player/login" for ::1 at 2023-10-15 17:39:06 -0300
Processing by PlayersController#login as */*
  Parameters: {"player"=>{"email"=>"lucasdavidmiranda8@hotmail.com", "password"=>"[FILTERED]"}}
  [1m[36mPlayer Load (0.4ms)[0m  [1m[34mSELECT "players".* FROM "players" WHERE ((email = 'lucasdavidmiranda8@hotmail.com' OR nickname = NULL) AND password = '123456#') LIMIT $1[0m  [["LIMIT", 1]]
  ↳ app/controllers/players_controller.rb:18:in `login'
Completed 500 Internal Server Error in 10ms (ActiveRecord: 2.9ms | Allocations: 4134)


  
NoMethodError (undefined method `errors' for nil:NilClass):
  
app/controllers/players_controller.rb:27:in `login'
Started POST "/players" for ::1 at 2023-10-15 17:39:09 -0300
Processing by PlayersController#create as */*
  Parameters: {"player"=>{"email"=>"lucasdavidmiranda8@hotmail.com", "password"=>"[FILTERED]", "name"=>"lucas", "lastname"=>"miranda", "nickname"=>"enkinaurio"}}
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/players_controller.rb:34:in `create'
  [1m[36mPlayer Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "players" WHERE "players"."nickname" = $1 LIMIT $2[0m  [["nickname", "enkinaurio"], ["LIMIT", 1]]
  ↳ app/controllers/players_controller.rb:34:in `create'
  [1m[36mPlayer Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "players" WHERE "players"."email" = $1 LIMIT $2[0m  [["email", "lucasdavidmiranda8@hotmail.com"], ["LIMIT", 1]]
  ↳ app/controllers/players_controller.rb:34:in `create'
  [1m[36mPlayer Create (0.3ms)[0m  [1m[32mINSERT INTO "players" ("name", "lastname", "password", "nickname", "email", "token", "image_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["name", "lucas"], ["lastname", "miranda"], ["password", "123456#"], ["nickname", "enkinaurio"], ["email", "lucasdavidmiranda8@hotmail.com"], ["token", "9990cdcc-2bb6-405f-bf00-7051f45012c4"], ["image_id", nil], ["created_at", "2023-10-15 20:39:09.327503"], ["updated_at", "2023-10-15 20:39:09.327503"]]
  ↳ app/controllers/players_controller.rb:34:in `create'
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/players_controller.rb:34:in `create'
Completed 200 OK in 10ms (Views: 0.2ms | ActiveRecord: 3.1ms | Allocations: 10850)


Started POST "/player/login" for ::1 at 2023-10-15 17:39:17 -0300
Processing by PlayersController#login as */*
  Parameters: {"player"=>{"email"=>"lucasdavidmiranda8@hotmail.com", "password"=>"[FILTERED]"}}
  [1m[36mPlayer Load (0.3ms)[0m  [1m[34mSELECT "players".* FROM "players" WHERE ((email = 'lucasdavidmiranda8@hotmail.com' OR nickname = NULL) AND password = '123456#') LIMIT $1[0m  [["LIMIT", 1]]
  ↳ app/controllers/players_controller.rb:18:in `login'
Completed 200 OK in 2ms (Views: 0.1ms | ActiveRecord: 0.3ms | Allocations: 772)


Started GET "/boards" for ::1 at 2023-10-15 17:39:37 -0300
Processing by BoardsController#index as */*
  Parameters: {"board"=>{}}
  [1m[36mBoard Load (0.3ms)[0m  [1m[34mSELECT "boards".* FROM "boards"[0m
  ↳ app/controllers/boards_controller.rb:8:in `index'
Completed 200 OK in 1ms (Views: 0.5ms | ActiveRecord: 0.3ms | Allocations: 920)


Started POST "/boards" for ::1 at 2023-10-15 17:39:53 -0300
Processing by BoardsController#create as */*
  Parameters: {"board"=>{"board_name"=>"Nombre_del_Tablero", "player1"=>"636776e2-5667-4403-8023-b2ccccc6557d"}}
  [1m[36mPlayer Load (0.2ms)[0m  [1m[34mSELECT "players".* FROM "players" WHERE "players"."token" = $1 LIMIT $2[0m  [["token", "9990cdcc-2bb6-405f-bf00-7051f45012c4"], ["LIMIT", 1]]
  ↳ app/helpers/session_helper.rb:4:in `check_token'
Completed 500 Internal Server Error in 2ms (ActiveRecord: 0.3ms | Allocations: 783)


  
NoMethodError (undefined method `set_game' for #<BoardsController:0x00000000010e78>):
  
activesupport (7.0.8) lib/active_support/callbacks.rb:400:in `block in make_lambda'
activesupport (7.0.8) lib/active_support/callbacks.rb:180:in `block (2 levels) in halting_and_conditional'
actionpack (7.0.8) lib/abstract_controller/callbacks.rb:34:in `block (2 levels) in <module:Callbacks>'
activesupport (7.0.8) lib/active_support/callbacks.rb:181:in `block in halting_and_conditional'
activesupport (7.0.8) lib/active_support/callbacks.rb:595:in `block in invoke_before'
activesupport (7.0.8) lib/active_support/callbacks.rb:595:in `each'
activesupport (7.0.8) lib/active_support/callbacks.rb:595:in `invoke_before'
activesupport (7.0.8) lib/active_support/callbacks.rb:116:in `block in run_callbacks'
actiontext (7.0.8) lib/action_text/rendering.rb:20:in `with_renderer'
actiontext (7.0.8) lib/action_text/engine.rb:69:in `block (4 levels) in <class:Engine>'
activesupport (7.0.8) lib/active_support/callbacks.rb:127:in `instance_exec'
activesupport (7.0.8) lib/active_support/callbacks.rb:127:in `block in run_callbacks'
activesupport (7.0.8) lib/active_support/callbacks.rb:138:in `run_callbacks'
actionpack (7.0.8) lib/abstract_controller/callbacks.rb:233:in `process_action'
actionpack (7.0.8) lib/action_controller/metal/rescue.rb:23:in `process_action'
actionpack (7.0.8) lib/action_controller/metal/instrumentation.rb:67:in `block in process_action'
activesupport (7.0.8) lib/active_support/notifications.rb:206:in `block in instrument'
activesupport (7.0.8) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (7.0.8) lib/active_support/notifications.rb:206:in `instrument'
actionpack (7.0.8) lib/action_controller/metal/instrumentation.rb:66:in `process_action'
actionpack (7.0.8) lib/action_controller/metal/params_wrapper.rb:259:in `process_action'
activerecord (7.0.8) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (7.0.8) lib/abstract_controller/base.rb:151:in `process'
actionview (7.0.8) lib/action_view/rendering.rb:39:in `process'
actionpack (7.0.8) lib/action_controller/metal.rb:188:in `dispatch'
actionpack (7.0.8) lib/action_controller/metal.rb:251:in `dispatch'
actionpack (7.0.8) lib/action_dispatch/routing/route_set.rb:49:in `dispatch'
actionpack (7.0.8) lib/action_dispatch/routing/route_set.rb:32:in `serve'
actionpack (7.0.8) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (7.0.8) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (7.0.8) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (7.0.8) lib/action_dispatch/routing/route_set.rb:852:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:40:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (7.0.8) lib/active_record/migration.rb:638:in `call'
actionpack (7.0.8) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (7.0.8) lib/active_support/callbacks.rb:99:in `run_callbacks'
actionpack (7.0.8) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (7.0.8) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (7.0.8) lib/action_dispatch/middleware/actionable_exceptions.rb:17:in `call'
actionpack (7.0.8) lib/action_dispatch/middleware/debug_exceptions.rb:28:in `call'
actionpack (7.0.8) lib/action_dispatch/middleware/show_exceptions.rb:29:in `call'
railties (7.0.8) lib/rails/rack/logger.rb:40:in `call_app'
railties (7.0.8) lib/rails/rack/logger.rb:25:in `block in call'
activesupport (7.0.8) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (7.0.8) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (7.0.8) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (7.0.8) lib/rails/rack/logger.rb:25:in `call'
actionpack (7.0.8) lib/action_dispatch/middleware/remote_ip.rb:93:in `call'
actionpack (7.0.8) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (7.0.8) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (7.0.8) lib/action_dispatch/middleware/server_timing.rb:61:in `block in call'
actionpack (7.0.8) lib/action_dispatch/middleware/server_timing.rb:26:in `collect_events'
actionpack (7.0.8) lib/action_dispatch/middleware/server_timing.rb:60:in `call'
actionpack (7.0.8) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (7.0.8) lib/action_dispatch/middleware/static.rb:23:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (7.0.8) lib/action_dispatch/middleware/host_authorization.rb:138:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (7.0.8) lib/rails/engine.rb:530:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Started POST "/boards" for ::1 at 2023-10-15 17:40:20 -0300
Processing by BoardsController#create as */*
  Parameters: {"board"=>{"board_name"=>"Nombre_del_Tablero", "player1"=>"636776e2-5667-4403-8023-b2ccccc6557d"}}
  [1m[36mPlayer Load (0.1ms)[0m  [1m[34mSELECT "players".* FROM "players" WHERE "players"."token" = $1 LIMIT $2[0m  [["token", "9990cdcc-2bb6-405f-bf00-7051f45012c4"], ["LIMIT", 1]]
  ↳ app/helpers/session_helper.rb:4:in `check_token'
  [1m[36mPlayer Load (0.1ms)[0m  [1m[34mSELECT "players".* FROM "players" WHERE "players"."id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  ↳ app/controllers/boards_controller.rb:16:in `create'
Completed 500 Internal Server Error in 11ms (ActiveRecord: 2.8ms | Allocations: 10442)


  
NoMethodError (undefined method `save?' for #<Board id: nil, player1_id: nil, player2_id: nil, board_name: nil, turn: 0, winner: nil, created_at: nil, updated_at: nil>):
  
app/controllers/boards_controller.rb:19:in `create'
Started POST "/boards" for ::1 at 2023-10-15 17:40:45 -0300
Processing by BoardsController#create as */*
  Parameters: {"board"=>{"board_name"=>"Nombre_del_Tablero", "player1"=>"636776e2-5667-4403-8023-b2ccccc6557d"}}
  [1m[36mPlayer Load (0.1ms)[0m  [1m[34mSELECT "players".* FROM "players" WHERE "players"."token" = $1 LIMIT $2[0m  [["token", "9990cdcc-2bb6-405f-bf00-7051f45012c4"], ["LIMIT", 1]]
  ↳ app/helpers/session_helper.rb:4:in `check_token'
  [1m[36mPlayer Load (0.1ms)[0m  [1m[34mSELECT "players".* FROM "players" LIMIT $1[0m  [["LIMIT", 1]]
  ↳ app/controllers/boards_controller.rb:16:in `create'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/boards_controller.rb:17:in `create'
  [1m[36mBoard Create (0.3ms)[0m  [1m[32mINSERT INTO "boards" ("player1_id", "player2_id", "board_name", "turn", "winner", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["player1_id", 636776], ["player2_id", nil], ["board_name", nil], ["turn", 0], ["winner", nil], ["created_at", "2023-10-15 20:40:45.080013"], ["updated_at", "2023-10-15 20:40:45.080013"]]
  ↳ app/controllers/boards_controller.rb:17:in `create'
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/boards_controller.rb:17:in `create'
Completed 500 Internal Server Error in 10ms (ActiveRecord: 4.0ms | Allocations: 9720)


  
NoMethodError (undefined method `save?' for #<Board id: "785a962a-9a6d-44d6-a903-f920cb1b3551", player1_id: 636776, player2_id: nil, board_name: nil, turn: 0, winner: nil, created_at: "2023-10-15 20:40:45.080013000 +0000", updated_at: "2023-10-15 20:40:45.080013000 +0000">):
  
app/controllers/boards_controller.rb:19:in `create'
Started POST "/boards" for ::1 at 2023-10-15 17:42:11 -0300
  [1m[36mActiveRecord::SchemaMigration Pluck (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by BoardsController#create as */*
  Parameters: {"board"=>{"board_name"=>"Nombre_del_Tablero", "player1"=>"636776e2-5667-4403-8023-b2ccccc6557d"}}
  [1m[36mPlayer Load (0.1ms)[0m  [1m[34mSELECT "players".* FROM "players" WHERE "players"."token" = $1 LIMIT $2[0m  [["token", "9990cdcc-2bb6-405f-bf00-7051f45012c4"], ["LIMIT", 1]]
  ↳ app/helpers/session_helper.rb:4:in `check_token'
  [1m[36mPlayer Load (0.1ms)[0m  [1m[34mSELECT "players".* FROM "players" LIMIT $1[0m  [["LIMIT", 1]]
  ↳ app/controllers/boards_controller.rb:16:in `create'
Completed 500 Internal Server Error in 8ms (ActiveRecord: 3.1ms | Allocations: 7648)


  
NoMethodError (undefined method `save?' for #<Board id: nil, player1_id: 636776, player2_id: nil, board_name: nil, turn: 0, winner: nil, created_at: nil, updated_at: nil>):
  
app/controllers/boards_controller.rb:19:in `create'
  [1m[36mActiveRecord::SchemaMigration Pluck (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (13.8ms)[0m  [1m[35mDROP DATABASE IF EXISTS "card_game_backend_development"[0m
  [1m[35m (12.8ms)[0m  [1m[35mDROP DATABASE IF EXISTS "card_game_backend_test"[0m
  [1m[35m (21.1ms)[0m  [1m[35mCREATE DATABASE "card_game_backend_development" ENCODING = 'unicode'[0m
  [1m[35m (21.1ms)[0m  [1m[35mCREATE DATABASE "card_game_backend_test" ENCODING = 'unicode'[0m
  [1m[35m (2.8ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[35m (2.5ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT pg_try_advisory_lock(3379173675217033995)[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to CreateBoards (20220522162722)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (2.1ms)[0m  [1m[35mCREATE TABLE "boards" ("id" uuid DEFAULT gen_random_uuid() NOT NULL PRIMARY KEY, "player1_id" bigint, "player2_id" bigint, "board_name" character varying, "winner" integer, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE INDEX "index_boards_on_player1_id" ON "boards" ("player1_id")[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE INDEX "index_boards_on_player2_id" ON "boards" ("player2_id")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20220522162722"]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateActiveStorageTables (20231013182339)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (2.4ms)[0m  [1m[35mCREATE TABLE "active_storage_blobs" ("id" bigserial primary key, "key" character varying NOT NULL, "filename" character varying NOT NULL, "content_type" character varying, "metadata" text, "service_name" character varying NOT NULL, "byte_size" bigint NOT NULL, "checksum" character varying, "created_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_active_storage_blobs_on_key" ON "active_storage_blobs" ("key")[0m
  [1m[35m (3.3ms)[0m  [1m[35mCREATE TABLE "active_storage_attachments" ("id" bigserial primary key, "name" character varying NOT NULL, "record_type" character varying NOT NULL, "record_id" bigint NOT NULL, "blob_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, CONSTRAINT "fk_rails_c3b3935057"
FOREIGN KEY ("blob_id")
  REFERENCES "active_storage_blobs" ("id")
)[0m
  [1m[35m (1.8ms)[0m  [1m[35mCREATE INDEX "index_active_storage_attachments_on_blob_id" ON "active_storage_attachments" ("blob_id")[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_active_storage_attachments_uniqueness" ON "active_storage_attachments" ("record_type", "record_id", "name", "blob_id")[0m
  [1m[35m (2.0ms)[0m  [1m[35mCREATE TABLE "active_storage_variant_records" ("id" bigserial primary key, "blob_id" bigint NOT NULL, "variation_digest" character varying NOT NULL, CONSTRAINT "fk_rails_993965df05"
FOREIGN KEY ("blob_id")
  REFERENCES "active_storage_blobs" ("id")
)[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_active_storage_variant_records_uniqueness" ON "active_storage_variant_records" ("blob_id", "variation_digest")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20231013182339"]]
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateImages (20231013183935)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE TABLE "images" ("id" uuid DEFAULT gen_random_uuid() NOT NULL PRIMARY KEY, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20231013183935"]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreatePlayers (20231013183954)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.9ms)[0m  [1m[35mCREATE TABLE "players" ("id" uuid DEFAULT gen_random_uuid() NOT NULL PRIMARY KEY, "name" character varying, "lastname" character varying, "password" character varying, "nickname" character varying, "email" character varying, "token" character varying, "image_id" uuid, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "players" ADD CONSTRAINT "fk_rails_884bb50f59"
FOREIGN KEY ("image_id")
  REFERENCES "images" ("id")
 ON DELETE SET NULL[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20231013183954"]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
Migrating to AddPlayerToImages (20231013184330)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mALTER TABLE "images" ADD "player_id" uuid NOT NULL[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "images" ADD CONSTRAINT "fk_rails_e73d825546"
FOREIGN KEY ("player_id")
  REFERENCES "players" ("id")
 ON DELETE CASCADE[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20231013184330"]]
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.2ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "environment"], ["value", "development"], ["created_at", "2023-10-15 20:42:45.599416"], ["updated_at", "2023-10-15 20:42:45.599416"]]
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_advisory_unlock(3379173675217033995)[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Started POST "/players" for ::1 at 2023-10-15 17:42:55 -0300
  [1m[36mActiveRecord::SchemaMigration Pluck (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by PlayersController#create as */*
  Parameters: {"player"=>{"email"=>"lucasdavidmiranda8@hotmail.com", "password"=>"[FILTERED]", "name"=>"lucas", "lastname"=>"miranda", "nickname"=>"enkinaurio"}}
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/players_controller.rb:34:in `create'
  [1m[36mPlayer Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "players" WHERE "players"."nickname" = $1 LIMIT $2[0m  [["nickname", "enkinaurio"], ["LIMIT", 1]]
  ↳ app/controllers/players_controller.rb:34:in `create'
  [1m[36mPlayer Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "players" WHERE "players"."email" = $1 LIMIT $2[0m  [["email", "lucasdavidmiranda8@hotmail.com"], ["LIMIT", 1]]
  ↳ app/controllers/players_controller.rb:34:in `create'
  [1m[36mPlayer Create (0.3ms)[0m  [1m[32mINSERT INTO "players" ("name", "lastname", "password", "nickname", "email", "token", "image_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["name", "lucas"], ["lastname", "miranda"], ["password", "123456#"], ["nickname", "enkinaurio"], ["email", "lucasdavidmiranda8@hotmail.com"], ["token", "75e2264a-b7bf-4829-9bc1-6a5410d4c27a"], ["image_id", nil], ["created_at", "2023-10-15 20:42:55.349360"], ["updated_at", "2023-10-15 20:42:55.349360"]]
  ↳ app/controllers/players_controller.rb:34:in `create'
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/players_controller.rb:34:in `create'
Completed 200 OK in 12ms (Views: 0.2ms | ActiveRecord: 3.4ms | Allocations: 12946)


Started POST "/player/login" for ::1 at 2023-10-15 17:43:04 -0300
Processing by PlayersController#login as */*
  Parameters: {"player"=>{"email"=>"lucasdavidmiranda8@hotmail.com", "password"=>"[FILTERED]"}}
  [1m[36mPlayer Load (0.2ms)[0m  [1m[34mSELECT "players".* FROM "players" WHERE ((email = 'lucasdavidmiranda8@hotmail.com' OR nickname = NULL) AND password = '123456#') LIMIT $1[0m  [["LIMIT", 1]]
  ↳ app/controllers/players_controller.rb:18:in `login'
Completed 200 OK in 1ms (Views: 0.1ms | ActiveRecord: 0.2ms | Allocations: 920)


Started POST "/boards" for ::1 at 2023-10-15 17:43:27 -0300
Processing by BoardsController#create as */*
  Parameters: {"board"=>{"board_name"=>"Nombre_del_Tablero", "player1"=>"c493ecc7-0c31-4e90-aff8-1c2cce44049b"}}
  [1m[36mPlayer Load (0.1ms)[0m  [1m[34mSELECT "players".* FROM "players" WHERE "players"."token" = $1 LIMIT $2[0m  [["token", "75e2264a-b7bf-4829-9bc1-6a5410d4c27a"], ["LIMIT", 1]]
  ↳ app/helpers/session_helper.rb:4:in `check_token'
  [1m[36mPlayer Load (0.1ms)[0m  [1m[34mSELECT "players".* FROM "players" LIMIT $1[0m  [["LIMIT", 1]]
  ↳ app/controllers/boards_controller.rb:16:in `create'
Completed 500 Internal Server Error in 8ms (ActiveRecord: 1.7ms | Allocations: 6035)


  
NoMethodError (undefined method `save?' for #<Board id: nil, player1_id: 0, player2_id: nil, board_name: nil, winner: nil, created_at: nil, updated_at: nil>):
  
app/controllers/boards_controller.rb:19:in `create'
Started POST "/boards" for ::1 at 2023-10-15 17:44:32 -0300
Processing by BoardsController#create as */*
  Parameters: {"board"=>{"board_name"=>"Nombre_del_Tablero", "player1"=>"c493ecc7-0c31-4e90-aff8-1c2cce44049b"}}
  [1m[36mPlayer Load (0.1ms)[0m  [1m[34mSELECT "players".* FROM "players" WHERE "players"."token" = $1 LIMIT $2[0m  [["token", "75e2264a-b7bf-4829-9bc1-6a5410d4c27a"], ["LIMIT", 1]]
  ↳ app/helpers/session_helper.rb:4:in `check_token'
Completed 404 Not Found in 5ms (ActiveRecord: 1.7ms | Allocations: 4732)


  
ActiveRecord::RecordNotFound (Couldn't find Player without an ID):
  
app/controllers/boards_controller.rb:16:in `create'
  [1m[36mPlayer Load (0.2ms)[0m  [1m[34mSELECT "players".* FROM "players" WHERE "players"."id" = $1 LIMIT $2[0m  [["id", "c493ecc7-0c31-4e90-aff8-1c2cce44049b"], ["LIMIT", 1]]
Started POST "/boards" for ::1 at 2023-10-15 17:46:57 -0300
Processing by BoardsController#create as */*
  Parameters: {"board"=>{"board_name"=>"Nombre_del_Tablero", "player1_id"=>"c493ecc7-0c31-4e90-aff8-1c2cce44049b"}}
  [1m[36mPlayer Load (0.1ms)[0m  [1m[34mSELECT "players".* FROM "players" WHERE "players"."token" = $1 LIMIT $2[0m  [["token", "75e2264a-b7bf-4829-9bc1-6a5410d4c27a"], ["LIMIT", 1]]
  ↳ app/helpers/session_helper.rb:4:in `check_token'
Completed 404 Not Found in 5ms (ActiveRecord: 1.6ms | Allocations: 4708)


  
ActiveRecord::RecordNotFound (Couldn't find Player without an ID):
  
app/controllers/boards_controller.rb:16:in `create'
Started POST "/boards" for ::1 at 2023-10-15 17:47:21 -0300
Processing by BoardsController#create as */*
  Parameters: {"board"=>{"board_name"=>"Nombre_del_Tablero", "player1_id"=>"c493ecc7-0c31-4e90-aff8-1c2cce44049b"}}
  [1m[36mPlayer Load (0.1ms)[0m  [1m[34mSELECT "players".* FROM "players" WHERE "players"."token" = $1 LIMIT $2[0m  [["token", "75e2264a-b7bf-4829-9bc1-6a5410d4c27a"], ["LIMIT", 1]]
  ↳ app/helpers/session_helper.rb:4:in `check_token'
  [1m[36mPlayer Load (0.1ms)[0m  [1m[34mSELECT "players".* FROM "players" WHERE "players"."id" = $1 LIMIT $2[0m  [["id", "c493ecc7-0c31-4e90-aff8-1c2cce44049b"], ["LIMIT", 1]]
  ↳ app/controllers/boards_controller.rb:16:in `create'
Completed 500 Internal Server Error in 8ms (ActiveRecord: 2.8ms | Allocations: 7402)


  
NoMethodError (undefined method `save?' for #<Board id: nil, player1_id: 0, player2_id: nil, board_name: "Nombre_del_Tablero", winner: nil, created_at: nil, updated_at: nil>):
  
app/controllers/boards_controller.rb:19:in `create'
Started POST "/boards" for ::1 at 2023-10-15 17:47:33 -0300
Processing by BoardsController#create as */*
  Parameters: {"board"=>{"board_name"=>"Nombre_del_Tablero", "player1_id"=>"c493ecc7-0c31-4e90-aff8-1c2cce44049b"}}
  [1m[36mPlayer Load (0.1ms)[0m  [1m[34mSELECT "players".* FROM "players" WHERE "players"."token" = $1 LIMIT $2[0m  [["token", "75e2264a-b7bf-4829-9bc1-6a5410d4c27a"], ["LIMIT", 1]]
  ↳ app/helpers/session_helper.rb:4:in `check_token'
  [1m[36mPlayer Load (0.1ms)[0m  [1m[34mSELECT "players".* FROM "players" WHERE "players"."id" = $1 LIMIT $2[0m  [["id", "c493ecc7-0c31-4e90-aff8-1c2cce44049b"], ["LIMIT", 1]]
  ↳ app/controllers/boards_controller.rb:16:in `create'
Completed 500 Internal Server Error in 8ms (ActiveRecord: 2.7ms | Allocations: 7388)


  
NoMethodError (undefined method `save?' for #<Board id: nil, player1_id: 0, player2_id: nil, board_name: nil, winner: nil, created_at: nil, updated_at: nil>):
  
app/controllers/boards_controller.rb:19:in `create'
Started POST "/boards" for ::1 at 2023-10-15 17:47:52 -0300
Processing by BoardsController#create as */*
  Parameters: {"board"=>{"board_name"=>"Nombre_del_Tablero", "player1_id"=>"c493ecc7-0c31-4e90-aff8-1c2cce44049b"}}
  [1m[36mPlayer Load (0.1ms)[0m  [1m[34mSELECT "players".* FROM "players" WHERE "players"."token" = $1 LIMIT $2[0m  [["token", "75e2264a-b7bf-4829-9bc1-6a5410d4c27a"], ["LIMIT", 1]]
  ↳ app/helpers/session_helper.rb:4:in `check_token'
  [1m[36mPlayer Load (0.1ms)[0m  [1m[34mSELECT "players".* FROM "players" WHERE "players"."id" = $1 LIMIT $2[0m  [["id", "c493ecc7-0c31-4e90-aff8-1c2cce44049b"], ["LIMIT", 1]]
  ↳ app/controllers/boards_controller.rb:16:in `create'
Completed 500 Internal Server Error in 8ms (ActiveRecord: 2.7ms | Allocations: 7394)


  
NoMethodError (undefined method `save?' for #<Board id: nil, player1_id: 0, player2_id: nil, board_name: "Nombre_del_Tablero", winner: nil, created_at: nil, updated_at: nil>):
  
app/controllers/boards_controller.rb:19:in `create'
Started POST "/boards" for ::1 at 2023-10-15 17:48:15 -0300
Processing by BoardsController#create as */*
  Parameters: {"board"=>{"board_name"=>"Nombre_del_Tablero", "player1_id"=>"c493ecc7-0c31-4e90-aff8-1c2cce44049b"}}
  [1m[36mPlayer Load (0.1ms)[0m  [1m[34mSELECT "players".* FROM "players" WHERE "players"."token" = $1 LIMIT $2[0m  [["token", "75e2264a-b7bf-4829-9bc1-6a5410d4c27a"], ["LIMIT", 1]]
  ↳ app/helpers/session_helper.rb:4:in `check_token'
  [1m[36mPlayer Load (0.1ms)[0m  [1m[34mSELECT "players".* FROM "players" WHERE "players"."id" = $1 LIMIT $2[0m  [["id", nil], ["LIMIT", 1]]
  ↳ app/controllers/boards_controller.rb:16:in `create'
Completed 404 Not Found in 6ms (ActiveRecord: 2.2ms | Allocations: 5375)


  
ActiveRecord::RecordNotFound (Couldn't find Player with 'id'={:id=>"c493ecc7-0c31-4e90-aff8-1c2cce44049b"}):
  
app/controllers/boards_controller.rb:16:in `create'
Started POST "/boards" for ::1 at 2023-10-15 17:48:36 -0300
Processing by BoardsController#create as */*
  Parameters: {"board"=>{"board_name"=>"Nombre_del_Tablero", "player1_id"=>"c493ecc7-0c31-4e90-aff8-1c2cce44049b"}}
  [1m[36mPlayer Load (0.2ms)[0m  [1m[34mSELECT "players".* FROM "players" WHERE "players"."token" = $1 LIMIT $2[0m  [["token", "75e2264a-b7bf-4829-9bc1-6a5410d4c27a"], ["LIMIT", 1]]
  ↳ app/helpers/session_helper.rb:4:in `check_token'
  [1m[36mPlayer Load (0.2ms)[0m  [1m[34mSELECT "players".* FROM "players" WHERE "players"."id" = $1 LIMIT $2[0m  [["id", nil], ["LIMIT", 1]]
  ↳ app/controllers/boards_controller.rb:16:in `create'
Completed 404 Not Found in 2ms (ActiveRecord: 0.3ms | Allocations: 1279)


  
ActiveRecord::RecordNotFound (Couldn't find Player with 'id'={:id=>"c493ecc7-0c31-4e90-aff8-1c2cce44049b"}):
  
app/controllers/boards_controller.rb:16:in `create'
Started POST "/boards" for ::1 at 2023-10-15 17:48:49 -0300
Processing by BoardsController#create as */*
  Parameters: {"board"=>{"board_name"=>"Nombre_del_Tablero", "player1_id"=>"c493ecc7-0c31-4e90-aff8-1c2cce44049b"}}
  [1m[36mPlayer Load (0.1ms)[0m  [1m[34mSELECT "players".* FROM "players" WHERE "players"."token" = $1 LIMIT $2[0m  [["token", "75e2264a-b7bf-4829-9bc1-6a5410d4c27a"], ["LIMIT", 1]]
  ↳ app/helpers/session_helper.rb:4:in `check_token'
  [1m[36mPlayer Load (0.1ms)[0m  [1m[34mSELECT "players".* FROM "players" WHERE "players"."id" = $1 LIMIT $2[0m  [["id", "c493ecc7-0c31-4e90-aff8-1c2cce44049b"], ["LIMIT", 1]]
  ↳ app/controllers/boards_controller.rb:16:in `create'
Completed 500 Internal Server Error in 7ms (ActiveRecord: 2.5ms | Allocations: 7388)


  
NoMethodError (undefined method `save?' for #<Board id: nil, player1_id: 0, player2_id: nil, board_name: "Nombre_del_Tablero", winner: nil, created_at: nil, updated_at: nil>):
  
app/controllers/boards_controller.rb:19:in `create'
  [1m[36mActiveRecord::SchemaMigration Pluck (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (35.8ms)[0m  [1m[35mDROP DATABASE IF EXISTS "card_game_backend_development"[0m
  [1m[35m (13.0ms)[0m  [1m[35mDROP DATABASE IF EXISTS "card_game_backend_test"[0m
  [1m[35m (21.8ms)[0m  [1m[35mCREATE DATABASE "card_game_backend_development" ENCODING = 'unicode'[0m
  [1m[35m (20.6ms)[0m  [1m[35mCREATE DATABASE "card_game_backend_test" ENCODING = 'unicode'[0m
  [1m[35m (2.8ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[35m (2.1ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT pg_try_advisory_lock(3379173675217033995)[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to CreateBoards (20220522162722)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (2.1ms)[0m  [1m[35mCREATE TABLE "boards" ("id" uuid DEFAULT gen_random_uuid() NOT NULL PRIMARY KEY, "player1_id" bigint, "player2_id" bigint, "board_name" character varying, "winner" integer, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE INDEX "index_boards_on_player1_id" ON "boards" ("player1_id")[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE INDEX "index_boards_on_player2_id" ON "boards" ("player2_id")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20220522162722"]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateActiveStorageTables (20231013182339)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (2.2ms)[0m  [1m[35mCREATE TABLE "active_storage_blobs" ("id" bigserial primary key, "key" character varying NOT NULL, "filename" character varying NOT NULL, "content_type" character varying, "metadata" text, "service_name" character varying NOT NULL, "byte_size" bigint NOT NULL, "checksum" character varying, "created_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_active_storage_blobs_on_key" ON "active_storage_blobs" ("key")[0m
  [1m[35m (2.3ms)[0m  [1m[35mCREATE TABLE "active_storage_attachments" ("id" bigserial primary key, "name" character varying NOT NULL, "record_type" character varying NOT NULL, "record_id" bigint NOT NULL, "blob_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, CONSTRAINT "fk_rails_c3b3935057"
FOREIGN KEY ("blob_id")
  REFERENCES "active_storage_blobs" ("id")
)[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE INDEX "index_active_storage_attachments_on_blob_id" ON "active_storage_attachments" ("blob_id")[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_active_storage_attachments_uniqueness" ON "active_storage_attachments" ("record_type", "record_id", "name", "blob_id")[0m
  [1m[35m (2.0ms)[0m  [1m[35mCREATE TABLE "active_storage_variant_records" ("id" bigserial primary key, "blob_id" bigint NOT NULL, "variation_digest" character varying NOT NULL, CONSTRAINT "fk_rails_993965df05"
FOREIGN KEY ("blob_id")
  REFERENCES "active_storage_blobs" ("id")
)[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_active_storage_variant_records_uniqueness" ON "active_storage_variant_records" ("blob_id", "variation_digest")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20231013182339"]]
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateImages (20231013183935)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE TABLE "images" ("id" uuid DEFAULT gen_random_uuid() NOT NULL PRIMARY KEY, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20231013183935"]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreatePlayers (20231013183954)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.9ms)[0m  [1m[35mCREATE TABLE "players" ("id" uuid DEFAULT gen_random_uuid() NOT NULL PRIMARY KEY, "name" character varying, "lastname" character varying, "password" character varying, "nickname" character varying, "email" character varying, "token" character varying, "image_id" uuid, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "players" ADD CONSTRAINT "fk_rails_884bb50f59"
FOREIGN KEY ("image_id")
  REFERENCES "images" ("id")
 ON DELETE SET NULL[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20231013183954"]]
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mCOMMIT[0m
Migrating to AddPlayerToImages (20231013184330)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "images" ADD "player_id" uuid NOT NULL[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "images" ADD CONSTRAINT "fk_rails_e73d825546"
FOREIGN KEY ("player_id")
  REFERENCES "players" ("id")
 ON DELETE CASCADE[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20231013184330"]]
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.2ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "environment"], ["value", "development"], ["created_at", "2023-10-15 20:50:45.687876"], ["updated_at", "2023-10-15 20:50:45.687876"]]
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_advisory_unlock(3379173675217033995)[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Started POST "/boards" for ::1 at 2023-10-15 17:51:57 -0300
  [1m[36mActiveRecord::SchemaMigration Pluck (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by BoardsController#create as */*
  Parameters: {"board"=>{"board_name"=>"Nombre_del_Tablero", "player1_id"=>"c493ecc7-0c31-4e90-aff8-1c2cce44049b"}}
  [1m[36mPlayer Load (0.2ms)[0m  [1m[34mSELECT "players".* FROM "players" WHERE "players"."token" = $1 LIMIT $2[0m  [["token", "75e2264a-b7bf-4829-9bc1-6a5410d4c27a"], ["LIMIT", 1]]
  ↳ app/helpers/session_helper.rb:4:in `check_token'
Filter chain halted as :check_token rendered or redirected
Completed 401 Unauthorized in 7ms (Views: 0.1ms | ActiveRecord: 0.9ms | Allocations: 4993)


Started POST "/players" for ::1 at 2023-10-15 17:52:02 -0300
Processing by PlayersController#create as */*
  Parameters: {"player"=>{"email"=>"lucasdavidmiranda8@hotmail.com", "password"=>"[FILTERED]", "name"=>"lucas", "lastname"=>"miranda", "nickname"=>"enkinaurio"}}
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/players_controller.rb:34:in `create'
  [1m[36mPlayer Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "players" WHERE "players"."nickname" = $1 LIMIT $2[0m  [["nickname", "enkinaurio"], ["LIMIT", 1]]
  ↳ app/controllers/players_controller.rb:34:in `create'
  [1m[36mPlayer Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "players" WHERE "players"."email" = $1 LIMIT $2[0m  [["email", "lucasdavidmiranda8@hotmail.com"], ["LIMIT", 1]]
  ↳ app/controllers/players_controller.rb:34:in `create'
  [1m[36mPlayer Create (0.4ms)[0m  [1m[32mINSERT INTO "players" ("name", "lastname", "password", "nickname", "email", "token", "image_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["name", "lucas"], ["lastname", "miranda"], ["password", "123456#"], ["nickname", "enkinaurio"], ["email", "lucasdavidmiranda8@hotmail.com"], ["token", "5424bf74-4a3d-433e-b109-57f32ff86245"], ["image_id", nil], ["created_at", "2023-10-15 20:52:02.773001"], ["updated_at", "2023-10-15 20:52:02.773001"]]
  ↳ app/controllers/players_controller.rb:34:in `create'
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/players_controller.rb:34:in `create'
Completed 200 OK in 23ms (Views: 0.2ms | ActiveRecord: 2.7ms | Allocations: 10444)


Started POST "/player/login" for ::1 at 2023-10-15 17:52:13 -0300
Processing by PlayersController#login as */*
  Parameters: {"player"=>{"email"=>"lucasdavidmiranda8@hotmail.com", "password"=>"[FILTERED]"}}
  [1m[36mPlayer Load (0.3ms)[0m  [1m[34mSELECT "players".* FROM "players" WHERE ((email = 'lucasdavidmiranda8@hotmail.com' OR nickname = NULL) AND password = '123456#') LIMIT $1[0m  [["LIMIT", 1]]
  ↳ app/controllers/players_controller.rb:18:in `login'
Completed 200 OK in 2ms (Views: 0.1ms | ActiveRecord: 0.3ms | Allocations: 849)


Started GET "/boards" for ::1 at 2023-10-15 17:52:29 -0300
Processing by BoardsController#index as */*
  Parameters: {"board"=>{}}
  [1m[36mBoard Load (0.4ms)[0m  [1m[34mSELECT "boards".* FROM "boards"[0m
  ↳ app/controllers/boards_controller.rb:7:in `index'
Completed 200 OK in 1ms (Views: 0.8ms | ActiveRecord: 1.6ms | Allocations: 838)


Started POST "/boards" for ::1 at 2023-10-15 17:52:42 -0300
Processing by BoardsController#create as */*
  Parameters: {"board"=>{"board_name"=>"Nombre_del_Tablero", "player1_id"=>"81dd2e65-bc07-488a-ace0-f3d9676ab845"}}
  [1m[36mPlayer Load (0.2ms)[0m  [1m[34mSELECT "players".* FROM "players" WHERE "players"."token" = $1 LIMIT $2[0m  [["token", "5424bf74-4a3d-433e-b109-57f32ff86245"], ["LIMIT", 1]]
  ↳ app/helpers/session_helper.rb:4:in `check_token'
  [1m[36mPlayer Load (0.2ms)[0m  [1m[34mSELECT "players".* FROM "players" WHERE "players"."id" = $1 LIMIT $2[0m  [["id", "81dd2e65-bc07-488a-ace0-f3d9676ab845"], ["LIMIT", 1]]
  ↳ app/controllers/boards_controller.rb:16:in `create'
Completed 500 Internal Server Error in 8ms (ActiveRecord: 1.9ms | Allocations: 5183)


  
NoMethodError (undefined method `save?' for #<Board id: nil, player1_id: 81, player2_id: nil, board_name: "Nombre_del_Tablero", winner: nil, created_at: nil, updated_at: nil>):
  
app/controllers/boards_controller.rb:19:in `create'
Started POST "/boards" for ::1 at 2023-10-15 17:54:14 -0300
Processing by BoardsController#create as */*
  Parameters: {"board"=>{"board_name"=>"Nombre_del_Tablero", "player1_id"=>"81dd2e65-bc07-488a-ace0-f3d9676ab845"}}
  [1m[36mPlayer Load (0.1ms)[0m  [1m[34mSELECT "players".* FROM "players" WHERE "players"."token" = $1 LIMIT $2[0m  [["token", "5424bf74-4a3d-433e-b109-57f32ff86245"], ["LIMIT", 1]]
  ↳ app/helpers/session_helper.rb:4:in `check_token'
  [1m[36mPlayer Load (0.1ms)[0m  [1m[34mSELECT "players".* FROM "players" WHERE "players"."id" = $1 LIMIT $2[0m  [["id", "81dd2e65-bc07-488a-ace0-f3d9676ab845"], ["LIMIT", 1]]
  ↳ app/controllers/boards_controller.rb:16:in `create'
Completed 500 Internal Server Error in 8ms (ActiveRecord: 2.6ms | Allocations: 7387)


  
NoMethodError (undefined method `save?' for #<Board id: nil, player1_id: 81, player2_id: nil, board_name: "Nombre_del_Tablero", winner: nil, created_at: nil, updated_at: nil>):
  
app/controllers/boards_controller.rb:20:in `create'
Started POST "/boards" for ::1 at 2023-10-15 17:54:43 -0300
Processing by BoardsController#create as */*
  Parameters: {"board"=>{"board_name"=>"Nombre_del_Tablero", "player1_id"=>"81dd2e65-bc07-488a-ace0-f3d9676ab845"}}
  [1m[36mPlayer Load (0.1ms)[0m  [1m[34mSELECT "players".* FROM "players" WHERE "players"."token" = $1 LIMIT $2[0m  [["token", "5424bf74-4a3d-433e-b109-57f32ff86245"], ["LIMIT", 1]]
  ↳ app/helpers/session_helper.rb:4:in `check_token'
  [1m[36mPlayer Load (0.1ms)[0m  [1m[34mSELECT "players".* FROM "players" WHERE "players"."id" = $1 LIMIT $2[0m  [["id", "81dd2e65-bc07-488a-ace0-f3d9676ab845"], ["LIMIT", 1]]
  ↳ app/controllers/boards_controller.rb:16:in `create'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/boards_controller.rb:19:in `create'
  [1m[36mBoard Create (0.3ms)[0m  [1m[32mINSERT INTO "boards" ("player1_id", "player2_id", "board_name", "winner", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["player1_id", 81], ["player2_id", nil], ["board_name", "Nombre_del_Tablero"], ["winner", nil], ["created_at", "2023-10-15 20:54:43.328998"], ["updated_at", "2023-10-15 20:54:43.328998"]]
  ↳ app/controllers/boards_controller.rb:19:in `create'
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/boards_controller.rb:19:in `create'
Completed 200 OK in 10ms (Views: 0.2ms | ActiveRecord: 3.6ms | Allocations: 9443)


  [1m[36mPlayer Load (0.2ms)[0m  [1m[34mSELECT "players".* FROM "players" WHERE "players"."id" = $1 LIMIT $2[0m  [["id", "81dd2e65-bc07-488a-ace0-f3d9676ab845"], ["LIMIT", 1]]
  [1m[36mBoard Load (0.3ms)[0m  [1m[34mSELECT "boards".* FROM "boards" ORDER BY "boards"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mPlayer Load (0.4ms)[0m  [1m[34mSELECT "players".* FROM "players" WHERE "players"."id" = $1 LIMIT $2[0m  [["id", nil], ["LIMIT", 1]]
Started POST "/boards" for ::1 at 2023-10-15 17:57:46 -0300
Processing by BoardsController#create as */*
  Parameters: {"board"=>{"board_name"=>"Nombre_del_Tablero", "player1_id"=>"81dd2e65-bc07-488a-ace0-f3d9676ab845"}}
  [1m[36mPlayer Load (0.1ms)[0m  [1m[34mSELECT "players".* FROM "players" WHERE "players"."token" = $1 LIMIT $2[0m  [["token", "5424bf74-4a3d-433e-b109-57f32ff86245"], ["LIMIT", 1]]
  ↳ app/helpers/session_helper.rb:4:in `check_token'
  [1m[36mPlayer Load (0.1ms)[0m  [1m[34mSELECT "players".* FROM "players" WHERE "players"."id" = $1 LIMIT $2[0m  [["id", "81dd2e65-bc07-488a-ace0-f3d9676ab845"], ["LIMIT", 1]]
  ↳ app/controllers/boards_controller.rb:16:in `create'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/boards_controller.rb:20:in `create'
  [1m[36mBoard Create (0.2ms)[0m  [1m[32mINSERT INTO "boards" ("player1_id", "player2_id", "board_name", "winner", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["player1_id", 81], ["player2_id", nil], ["board_name", "Nombre_del_Tablero"], ["winner", nil], ["created_at", "2023-10-15 20:57:46.476457"], ["updated_at", "2023-10-15 20:57:46.476457"]]
  ↳ app/controllers/boards_controller.rb:20:in `create'
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/boards_controller.rb:20:in `create'
Completed 200 OK in 11ms (Views: 0.2ms | ActiveRecord: 3.9ms | Allocations: 9402)


Started GET "/boards" for ::1 at 2023-10-15 17:57:54 -0300
Processing by BoardsController#index as */*
  Parameters: {"board"=>{}}
  [1m[36mBoard Load (0.2ms)[0m  [1m[34mSELECT "boards".* FROM "boards"[0m
  ↳ app/controllers/boards_controller.rb:7:in `index'
Completed 200 OK in 1ms (Views: 1.1ms | ActiveRecord: 0.2ms | Allocations: 1028)


Started DELETE "/boards/2bba218f-d648-48d6-a89f-1191bf3f4bbe" for ::1 at 2023-10-15 17:58:14 -0300
Processing by BoardsController#destroy as */*
  Parameters: {"id"=>"2bba218f-d648-48d6-a89f-1191bf3f4bbe", "board"=>{}}
  [1m[36mBoard Load (0.2ms)[0m  [1m[34mSELECT "boards".* FROM "boards" WHERE "boards"."id" = $1 LIMIT $2[0m  [["id", "2bba218f-d648-48d6-a89f-1191bf3f4bbe"], ["LIMIT", 1]]
  ↳ app/controllers/boards_controller.rb:28:in `destroy'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/boards_controller.rb:29:in `destroy'
  [1m[36mBoard Destroy (0.2ms)[0m  [1m[31mDELETE FROM "boards" WHERE "boards"."id" = $1[0m  [["id", "2bba218f-d648-48d6-a89f-1191bf3f4bbe"]]
  ↳ app/controllers/boards_controller.rb:29:in `destroy'
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/boards_controller.rb:29:in `destroy'
Completed 200 OK in 4ms (Views: 0.1ms | ActiveRecord: 0.9ms | Allocations: 2298)


Started GET "/boards" for ::1 at 2023-10-15 17:58:29 -0300
Processing by BoardsController#index as */*
  Parameters: {"board"=>{}}
  [1m[36mBoard Load (0.2ms)[0m  [1m[34mSELECT "boards".* FROM "boards"[0m
  ↳ app/controllers/boards_controller.rb:7:in `index'
Completed 200 OK in 1ms (Views: 1.0ms | ActiveRecord: 0.2ms | Allocations: 831)


Started PUT "/boards/b83b65f1-5e32-42ef-9e8d-0e8f6fcad90b" for ::1 at 2023-10-15 17:58:39 -0300
  
AbstractController::ActionNotFound (The action 'update' could not be found for BoardsController):
  
actionpack (7.0.8) lib/abstract_controller/base.rb:146:in `process'
actionview (7.0.8) lib/action_view/rendering.rb:39:in `process'
actionpack (7.0.8) lib/action_controller/metal.rb:188:in `dispatch'
actionpack (7.0.8) lib/action_controller/metal.rb:251:in `dispatch'
actionpack (7.0.8) lib/action_dispatch/routing/route_set.rb:49:in `dispatch'
actionpack (7.0.8) lib/action_dispatch/routing/route_set.rb:32:in `serve'
actionpack (7.0.8) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (7.0.8) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (7.0.8) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (7.0.8) lib/action_dispatch/routing/route_set.rb:852:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:40:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (7.0.8) lib/active_record/migration.rb:638:in `call'
actionpack (7.0.8) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (7.0.8) lib/active_support/callbacks.rb:99:in `run_callbacks'
actionpack (7.0.8) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (7.0.8) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (7.0.8) lib/action_dispatch/middleware/actionable_exceptions.rb:17:in `call'
actionpack (7.0.8) lib/action_dispatch/middleware/debug_exceptions.rb:28:in `call'
actionpack (7.0.8) lib/action_dispatch/middleware/show_exceptions.rb:29:in `call'
railties (7.0.8) lib/rails/rack/logger.rb:40:in `call_app'
railties (7.0.8) lib/rails/rack/logger.rb:25:in `block in call'
activesupport (7.0.8) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (7.0.8) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (7.0.8) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (7.0.8) lib/rails/rack/logger.rb:25:in `call'
actionpack (7.0.8) lib/action_dispatch/middleware/remote_ip.rb:93:in `call'
actionpack (7.0.8) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (7.0.8) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (7.0.8) lib/action_dispatch/middleware/server_timing.rb:61:in `block in call'
actionpack (7.0.8) lib/action_dispatch/middleware/server_timing.rb:26:in `collect_events'
actionpack (7.0.8) lib/action_dispatch/middleware/server_timing.rb:60:in `call'
actionpack (7.0.8) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (7.0.8) lib/action_dispatch/middleware/static.rb:23:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (7.0.8) lib/action_dispatch/middleware/host_authorization.rb:138:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (7.0.8) lib/rails/engine.rb:530:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Started PUT "/boards/b83b65f1-5e32-42ef-9e8d-0e8f6fcad90b" for ::1 at 2023-10-15 17:59:02 -0300
  
AbstractController::ActionNotFound (The action 'update' could not be found for BoardsController):
  
actionpack (7.0.8) lib/abstract_controller/base.rb:146:in `process'
actionview (7.0.8) lib/action_view/rendering.rb:39:in `process'
actionpack (7.0.8) lib/action_controller/metal.rb:188:in `dispatch'
actionpack (7.0.8) lib/action_controller/metal.rb:251:in `dispatch'
actionpack (7.0.8) lib/action_dispatch/routing/route_set.rb:49:in `dispatch'
actionpack (7.0.8) lib/action_dispatch/routing/route_set.rb:32:in `serve'
actionpack (7.0.8) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (7.0.8) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (7.0.8) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (7.0.8) lib/action_dispatch/routing/route_set.rb:852:in `call'
rack (2.2.8) lib/rack/etag.rb:27:in `call'
rack (2.2.8) lib/rack/conditional_get.rb:40:in `call'
rack (2.2.8) lib/rack/head.rb:12:in `call'
activerecord (7.0.8) lib/active_record/migration.rb:638:in `call'
actionpack (7.0.8) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (7.0.8) lib/active_support/callbacks.rb:99:in `run_callbacks'
actionpack (7.0.8) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (7.0.8) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (7.0.8) lib/action_dispatch/middleware/actionable_exceptions.rb:17:in `call'
actionpack (7.0.8) lib/action_dispatch/middleware/debug_exceptions.rb:28:in `call'
actionpack (7.0.8) lib/action_dispatch/middleware/show_exceptions.rb:29:in `call'
railties (7.0.8) lib/rails/rack/logger.rb:40:in `call_app'
railties (7.0.8) lib/rails/rack/logger.rb:25:in `block in call'
activesupport (7.0.8) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (7.0.8) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (7.0.8) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (7.0.8) lib/rails/rack/logger.rb:25:in `call'
actionpack (7.0.8) lib/action_dispatch/middleware/remote_ip.rb:93:in `call'
actionpack (7.0.8) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.8) lib/rack/runtime.rb:22:in `call'
activesupport (7.0.8) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (7.0.8) lib/action_dispatch/middleware/server_timing.rb:61:in `block in call'
actionpack (7.0.8) lib/action_dispatch/middleware/server_timing.rb:26:in `collect_events'
actionpack (7.0.8) lib/action_dispatch/middleware/server_timing.rb:60:in `call'
actionpack (7.0.8) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (7.0.8) lib/action_dispatch/middleware/static.rb:23:in `call'
rack (2.2.8) lib/rack/sendfile.rb:110:in `call'
actionpack (7.0.8) lib/action_dispatch/middleware/host_authorization.rb:138:in `call'
rack-cors (2.0.1) lib/rack/cors.rb:102:in `call'
railties (7.0.8) lib/rails/engine.rb:530:in `call'
puma (5.6.7) lib/puma/configuration.rb:252:in `call'
puma (5.6.7) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.7) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.7) lib/puma/request.rb:76:in `handle_request'
puma (5.6.7) lib/puma/server.rb:443:in `process_client'
puma (5.6.7) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Started GET "/boards" for ::1 at 2023-10-15 17:59:38 -0300
Processing by BoardsController#index as */*
  Parameters: {"board"=>{}}
  [1m[36mBoard Load (0.2ms)[0m  [1m[34mSELECT "boards".* FROM "boards"[0m
  ↳ app/controllers/boards_controller.rb:7:in `index'
Completed 200 OK in 2ms (Views: 1.2ms | ActiveRecord: 0.2ms | Allocations: 830)


Started PUT "/boards/b83b65f1-5e32-42ef-9e8d-0e8f6fcad90b" for ::1 at 2023-10-15 18:00:17 -0300
Processing by BoardsController#update as */*
  Parameters: {"board"=>{"board_name"=>"Nuevo_Nombre_del_Tablero", "winner"=>1}, "id"=>"b83b65f1-5e32-42ef-9e8d-0e8f6fcad90b"}
  [1m[36mBoard Load (0.2ms)[0m  [1m[34mSELECT "boards".* FROM "boards" WHERE "boards"."id" = $1 LIMIT $2[0m  [["id", "b83b65f1-5e32-42ef-9e8d-0e8f6fcad90b"], ["LIMIT", 1]]
  ↳ app/controllers/boards_controller.rb:34:in `update'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/boards_controller.rb:35:in `update'
  [1m[36mPlayer Load (0.1ms)[0m  [1m[34mSELECT "players".* FROM "players" WHERE "players"."id" = $1 LIMIT $2[0m  [["id", nil], ["LIMIT", 1]]
  ↳ app/controllers/boards_controller.rb:35:in `update'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  ↳ app/controllers/boards_controller.rb:35:in `update'
Completed 422 Unprocessable Entity in 12ms (Views: 0.1ms | ActiveRecord: 4.0ms | Allocations: 7931)


Started PUT "/boards/b83b65f1-5e32-42ef-9e8d-0e8f6fcad90b" for ::1 at 2023-10-15 18:00:27 -0300
Processing by BoardsController#update as */*
  Parameters: {"board"=>{"board_name"=>"Nuevo_Nombre_del_Tablero", "player2"=>"jugador2_id", "winner"=>1}, "id"=>"b83b65f1-5e32-42ef-9e8d-0e8f6fcad90b"}
  [1m[36mBoard Load (0.3ms)[0m  [1m[34mSELECT "boards".* FROM "boards" WHERE "boards"."id" = $1 LIMIT $2[0m  [["id", "b83b65f1-5e32-42ef-9e8d-0e8f6fcad90b"], ["LIMIT", 1]]
  ↳ app/controllers/boards_controller.rb:34:in `update'
Completed 500 Internal Server Error in 1ms (ActiveRecord: 0.3ms | Allocations: 788)


  
ActiveRecord::AssociationTypeMismatch (Player(#50760) expected, got "jugador2_id" which is an instance of String(#2060)):
  
app/controllers/boards_controller.rb:35:in `update'
Started PUT "/boards/b83b65f1-5e32-42ef-9e8d-0e8f6fcad90b" for ::1 at 2023-10-15 18:00:51 -0300
Processing by BoardsController#update as */*
  Parameters: {"board"=>{"board_name"=>"Nuevo_Nombre_del_Tablero", "winner"=>1}, "id"=>"b83b65f1-5e32-42ef-9e8d-0e8f6fcad90b"}
  [1m[36mBoard Load (0.2ms)[0m  [1m[34mSELECT "boards".* FROM "boards" WHERE "boards"."id" = $1 LIMIT $2[0m  [["id", "b83b65f1-5e32-42ef-9e8d-0e8f6fcad90b"], ["LIMIT", 1]]
  ↳ app/controllers/boards_controller.rb:34:in `update'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/boards_controller.rb:35:in `update'
  [1m[36mPlayer Load (0.1ms)[0m  [1m[34mSELECT "players".* FROM "players" WHERE "players"."id" = $1 LIMIT $2[0m  [["id", nil], ["LIMIT", 1]]
  ↳ app/controllers/boards_controller.rb:35:in `update'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  ↳ app/controllers/boards_controller.rb:35:in `update'
Completed 422 Unprocessable Entity in 3ms (Views: 0.1ms | ActiveRecord: 0.5ms | Allocations: 2943)


Started POST "/boards" for ::1 at 2023-10-15 18:02:26 -0300
Processing by BoardsController#create as */*
  Parameters: {"board"=>{"board_name"=>"Nombre_del_Tablero", "player1_id"=>"81dd2e65-bc07-488a-ace0-f3d9676ab845"}}
  [1m[36mPlayer Load (0.1ms)[0m  [1m[34mSELECT "players".* FROM "players" WHERE "players"."token" = $1 LIMIT $2[0m  [["token", "5424bf74-4a3d-433e-b109-57f32ff86245"], ["LIMIT", 1]]
  ↳ app/helpers/session_helper.rb:4:in `check_token'
  [1m[36mPlayer Load (0.1ms)[0m  [1m[34mSELECT "players".* FROM "players" WHERE "players"."id" = $1 LIMIT $2[0m  [["id", "81dd2e65-bc07-488a-ace0-f3d9676ab845"], ["LIMIT", 1]]
  ↳ app/controllers/boards_controller.rb:16:in `create'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/boards_controller.rb:19:in `create'
  [1m[36mBoard Create (0.2ms)[0m  [1m[32mINSERT INTO "boards" ("player1_id", "player2_id", "board_name", "winner", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["player1_id", 81], ["player2_id", nil], ["board_name", "Nombre_del_Tablero"], ["winner", nil], ["created_at", "2023-10-15 21:02:26.658913"], ["updated_at", "2023-10-15 21:02:26.658913"]]
  ↳ app/controllers/boards_controller.rb:19:in `create'
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/boards_controller.rb:19:in `create'
Completed 200 OK in 11ms (Views: 0.2ms | ActiveRecord: 3.5ms | Allocations: 9403)


Started POST "/boards" for ::1 at 2023-10-15 18:02:57 -0300
Processing by BoardsController#create as */*
  Parameters: {"board"=>{"board_name"=>"Nombre_del_Tablero", "player1_id"=>"81dd2e65-bc07-488a-ace0-f3d9676ab845"}}
  [1m[36mPlayer Load (0.2ms)[0m  [1m[34mSELECT "players".* FROM "players" WHERE "players"."token" = $1 LIMIT $2[0m  [["token", "5424bf74-4a3d-433e-b109-57f32ff86245"], ["LIMIT", 1]]
  ↳ app/helpers/session_helper.rb:4:in `check_token'
  [1m[36mPlayer Load (0.2ms)[0m  [1m[34mSELECT "players".* FROM "players" WHERE "players"."id" = $1 LIMIT $2[0m  [["id", "81dd2e65-bc07-488a-ace0-f3d9676ab845"], ["LIMIT", 1]]
  ↳ app/controllers/boards_controller.rb:16:in `create'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/boards_controller.rb:20:in `create'
  [1m[36mBoard Create (0.2ms)[0m  [1m[32mINSERT INTO "boards" ("player1_id", "player2_id", "board_name", "winner", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["player1_id", 81], ["player2_id", nil], ["board_name", "Nombre_del_Tablero"], ["winner", nil], ["created_at", "2023-10-15 21:02:57.620919"], ["updated_at", "2023-10-15 21:02:57.620919"]]
  ↳ app/controllers/boards_controller.rb:20:in `create'
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/boards_controller.rb:20:in `create'
Completed 200 OK in 14ms (Views: 0.2ms | ActiveRecord: 5.0ms | Allocations: 9374)


Started POST "/boards" for ::1 at 2023-10-15 18:03:37 -0300
Processing by BoardsController#create as */*
  Parameters: {"board"=>{"board_name"=>"Nombre_del_Tablero", "player1_id"=>"81dd2e65-bc07-488a-ace0-f3d9676ab845"}}
  [1m[36mPlayer Load (0.1ms)[0m  [1m[34mSELECT "players".* FROM "players" WHERE "players"."token" = $1 LIMIT $2[0m  [["token", "5424bf74-4a3d-433e-b109-57f32ff86245"], ["LIMIT", 1]]
  ↳ app/helpers/session_helper.rb:4:in `check_token'
  [1m[36mPlayer Load (0.1ms)[0m  [1m[34mSELECT "players".* FROM "players" WHERE "players"."id" = $1 LIMIT $2[0m  [["id", "81dd2e65-bc07-488a-ace0-f3d9676ab845"], ["LIMIT", 1]]
  ↳ app/controllers/boards_controller.rb:16:in `create'
Completed 500 Internal Server Error in 9ms (ActiveRecord: 3.8ms | Allocations: 7254)


  
ActiveRecord::AssociationTypeMismatch (Player(#74380) expected, got "81dd2e65-bc07-488a-ace0-f3d9676ab845" which is an instance of String(#2060)):
  
app/controllers/boards_controller.rb:18:in `create'
Started POST "/boards" for ::1 at 2023-10-15 18:04:59 -0300
Processing by BoardsController#create as */*
  Parameters: {"board"=>{"board_name"=>"Nombre_del_Tablero", "id"=>"81dd2e65-bc07-488a-ace0-f3d9676ab845"}}
  [1m[36mPlayer Load (0.1ms)[0m  [1m[34mSELECT "players".* FROM "players" WHERE "players"."token" = $1 LIMIT $2[0m  [["token", "5424bf74-4a3d-433e-b109-57f32ff86245"], ["LIMIT", 1]]
  ↳ app/helpers/session_helper.rb:4:in `check_token'
  [1m[36mPlayer Load (0.1ms)[0m  [1m[34mSELECT "players".* FROM "players" WHERE "players"."id" = $1 LIMIT $2[0m  [["id", "81dd2e65-bc07-488a-ace0-f3d9676ab845"], ["LIMIT", 1]]
  ↳ app/controllers/boards_controller.rb:16:in `create'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/boards_controller.rb:20:in `create'
  [1m[36mBoard Create (0.2ms)[0m  [1m[32mINSERT INTO "boards" ("player1_id", "player2_id", "board_name", "winner", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["player1_id", 81], ["player2_id", nil], ["board_name", "Nombre_del_Tablero"], ["winner", nil], ["created_at", "2023-10-15 21:04:59.230987"], ["updated_at", "2023-10-15 21:04:59.230987"]]
  ↳ app/controllers/boards_controller.rb:20:in `create'
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/boards_controller.rb:20:in `create'
Completed 200 OK in 10ms (Views: 0.2ms | ActiveRecord: 3.6ms | Allocations: 9405)


Started POST "/boards" for ::1 at 2023-10-15 18:06:08 -0300
Processing by BoardsController#create as */*
  Parameters: {"board"=>{"board_name"=>"Nombre_del_Tablero", "player1_id"=>"81dd2e65-bc07-488a-ace0-f3d9676ab845"}}
  [1m[36mPlayer Load (0.1ms)[0m  [1m[34mSELECT "players".* FROM "players" WHERE "players"."token" = $1 LIMIT $2[0m  [["token", "5424bf74-4a3d-433e-b109-57f32ff86245"], ["LIMIT", 1]]
  ↳ app/helpers/session_helper.rb:4:in `check_token'
  [1m[36mPlayer Load (0.1ms)[0m  [1m[34mSELECT "players".* FROM "players" WHERE "players"."id" = $1 LIMIT $2[0m  [["id", "81dd2e65-bc07-488a-ace0-f3d9676ab845"], ["LIMIT", 1]]
  ↳ app/controllers/boards_controller.rb:16:in `create'
Completed 500 Internal Server Error in 11ms (ActiveRecord: 3.9ms | Allocations: 7248)


  
ActiveRecord::AssociationTypeMismatch (Player(#90160) expected, got "81dd2e65-bc07-488a-ace0-f3d9676ab845" which is an instance of String(#2060)):
  
app/controllers/boards_controller.rb:18:in `create'
Started POST "/boards" for ::1 at 2023-10-15 18:06:24 -0300
Processing by BoardsController#create as */*
  Parameters: {"board"=>{"board_name"=>"Nombre_del_Tablero", "player1_id"=>"81dd2e65-bc07-488a-ace0-f3d9676ab845"}}
  [1m[36mPlayer Load (0.1ms)[0m  [1m[34mSELECT "players".* FROM "players" WHERE "players"."token" = $1 LIMIT $2[0m  [["token", "5424bf74-4a3d-433e-b109-57f32ff86245"], ["LIMIT", 1]]
  ↳ app/helpers/session_helper.rb:4:in `check_token'
  [1m[36mPlayer Load (0.1ms)[0m  [1m[34mSELECT "players".* FROM "players" WHERE "players"."id" = $1 LIMIT $2[0m  [["id", "81dd2e65-bc07-488a-ace0-f3d9676ab845"], ["LIMIT", 1]]
  ↳ app/controllers/boards_controller.rb:16:in `create'
Completed 500 Internal Server Error in 8ms (ActiveRecord: 3.9ms | Allocations: 7319)


  
ActiveRecord::AssociationTypeMismatch (Player(#98040) expected, got "81dd2e65-bc07-488a-ace0-f3d9676ab845" which is an instance of String(#2060)):
  
app/controllers/boards_controller.rb:18:in `create'
Started POST "/boards" for ::1 at 2023-10-15 18:06:33 -0300
Processing by BoardsController#create as */*
  Parameters: {"board"=>{"board_name"=>"Nombre_del_Tablero", "player1_id"=>"81dd2e65-bc07-488a-ace0-f3d9676ab845"}}
  [1m[36mPlayer Load (0.1ms)[0m  [1m[34mSELECT "players".* FROM "players" WHERE "players"."token" = $1 LIMIT $2[0m  [["token", "5424bf74-4a3d-433e-b109-57f32ff86245"], ["LIMIT", 1]]
  ↳ app/helpers/session_helper.rb:4:in `check_token'
  [1m[36mPlayer Load (0.1ms)[0m  [1m[34mSELECT "players".* FROM "players" WHERE "players"."id" = $1 LIMIT $2[0m  [["id", "81dd2e65-bc07-488a-ace0-f3d9676ab845"], ["LIMIT", 1]]
  ↳ app/controllers/boards_controller.rb:16:in `create'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/boards_controller.rb:20:in `create'
  [1m[36mBoard Create (0.2ms)[0m  [1m[32mINSERT INTO "boards" ("player1_id", "player2_id", "board_name", "winner", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["player1_id", 81], ["player2_id", nil], ["board_name", "Nombre_del_Tablero"], ["winner", nil], ["created_at", "2023-10-15 21:06:33.566322"], ["updated_at", "2023-10-15 21:06:33.566322"]]
  ↳ app/controllers/boards_controller.rb:20:in `create'
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/boards_controller.rb:20:in `create'
Completed 200 OK in 9ms (Views: 0.2ms | ActiveRecord: 3.4ms | Allocations: 9405)


Started POST "/boards" for ::1 at 2023-10-15 18:14:42 -0300
Processing by BoardsController#create as */*
  Parameters: {"board"=>{"board_name"=>"Nombre_del_Tablero", "player1_id"=>"81dd2e65-bc07-488a-ace0-f3d9676ab845"}}
  [1m[36mPlayer Load (0.2ms)[0m  [1m[34mSELECT "players".* FROM "players" WHERE "players"."token" = $1 LIMIT $2[0m  [["token", "5424bf74-4a3d-433e-b109-57f32ff86245"], ["LIMIT", 1]]
  ↳ app/helpers/session_helper.rb:4:in `check_token'
  [1m[36mPlayer Load (0.1ms)[0m  [1m[34mSELECT "players".* FROM "players" WHERE "players"."id" = $1 LIMIT $2[0m  [["id", "81dd2e65-bc07-488a-ace0-f3d9676ab845"], ["LIMIT", 1]]
  ↳ app/controllers/boards_controller.rb:16:in `create'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/boards_controller.rb:20:in `create'
  [1m[36mPlayer Load (0.1ms)[0m  [1m[34mSELECT "players".* FROM "players" WHERE "players"."id" = $1 LIMIT $2[0m  [["id", nil], ["LIMIT", 1]]
  ↳ app/controllers/boards_controller.rb:20:in `create'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  ↳ app/controllers/boards_controller.rb:20:in `create'
Completed 422 Unprocessable Entity in 16ms (Views: 0.1ms | ActiveRecord: 3.1ms | Allocations: 12253)


Started GET "/boards" for ::1 at 2023-10-15 18:14:55 -0300
Processing by BoardsController#index as */*
  Parameters: {"board"=>{}}
  [1m[36mBoard Load (0.4ms)[0m  [1m[34mSELECT "boards".* FROM "boards"[0m
  ↳ app/controllers/boards_controller.rb:7:in `index'
Completed 200 OK in 2ms (Views: 1.7ms | ActiveRecord: 0.4ms | Allocations: 1379)


Started POST "/boards" for ::1 at 2023-10-15 18:15:23 -0300
Processing by BoardsController#create as */*
  Parameters: {"board"=>{"board_name"=>"Nombre_del_Tablero", "player1_id"=>"81dd2e65-bc07-488a-ace0-f3d9676ab845"}}
  [1m[36mPlayer Load (0.3ms)[0m  [1m[34mSELECT "players".* FROM "players" WHERE "players"."token" = $1 LIMIT $2[0m  [["token", "5424bf74-4a3d-433e-b109-57f32ff86245"], ["LIMIT", 1]]
  ↳ app/helpers/session_helper.rb:4:in `check_token'
  [1m[36mPlayer Load (0.2ms)[0m  [1m[34mSELECT "players".* FROM "players" WHERE "players"."id" = $1 LIMIT $2[0m  [["id", "81dd2e65-bc07-488a-ace0-f3d9676ab845"], ["LIMIT", 1]]
  ↳ app/controllers/boards_controller.rb:16:in `create'
Completed 500 Internal Server Error in 13ms (ActiveRecord: 5.3ms | Allocations: 7268)


  
ActiveRecord::AssociationTypeMismatch (Player(#121920) expected, got "81dd2e65-bc07-488a-ace0-f3d9676ab845" which is an instance of String(#2060)):
  
app/controllers/boards_controller.rb:18:in `create'
Started POST "/boards" for ::1 at 2023-10-15 18:15:37 -0300
Processing by BoardsController#create as */*
  Parameters: {"board"=>{"board_name"=>"Nombre_del_Tablero", "player1_id"=>"81dd2e65-bc07-488a-ace0-f3d9676ab845"}}
  [1m[36mPlayer Load (0.2ms)[0m  [1m[34mSELECT "players".* FROM "players" WHERE "players"."token" = $1 LIMIT $2[0m  [["token", "5424bf74-4a3d-433e-b109-57f32ff86245"], ["LIMIT", 1]]
  ↳ app/helpers/session_helper.rb:4:in `check_token'
  [1m[36mPlayer Load (0.1ms)[0m  [1m[34mSELECT "players".* FROM "players" WHERE "players"."id" = $1 LIMIT $2[0m  [["id", "81dd2e65-bc07-488a-ace0-f3d9676ab845"], ["LIMIT", 1]]
  ↳ app/controllers/boards_controller.rb:16:in `create'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/boards_controller.rb:20:in `create'
  [1m[36mBoard Create (0.3ms)[0m  [1m[32mINSERT INTO "boards" ("player1_id", "player2_id", "board_name", "winner", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["player1_id", 81], ["player2_id", nil], ["board_name", "Nombre_del_Tablero"], ["winner", nil], ["created_at", "2023-10-15 21:15:37.931588"], ["updated_at", "2023-10-15 21:15:37.931588"]]
  ↳ app/controllers/boards_controller.rb:20:in `create'
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/boards_controller.rb:20:in `create'
Completed 200 OK in 11ms (Views: 0.2ms | ActiveRecord: 4.8ms | Allocations: 9403)


Started POST "/boards" for ::1 at 2023-10-15 18:15:51 -0300
Processing by BoardsController#create as */*
  Parameters: {"board"=>{"board_name"=>"Nombre_del_Tablero", "player1_id"=>"81dd2e65-bc07-488a-ace0-f3d9676ab845"}}
  [1m[36mPlayer Load (0.2ms)[0m  [1m[34mSELECT "players".* FROM "players" WHERE "players"."token" = $1 LIMIT $2[0m  [["token", "5424bf74-4a3d-433e-b109-57f32ff86245"], ["LIMIT", 1]]
  ↳ app/helpers/session_helper.rb:4:in `check_token'
  [1m[36mPlayer Load (0.8ms)[0m  [1m[34mSELECT "players".* FROM "players" WHERE (81dd2e65-bc07-488a-ace0-f3d9676ab845) LIMIT $1[0m  [["LIMIT", 1]]
  ↳ app/controllers/boards_controller.rb:16:in `create'
Completed 500 Internal Server Error in 9ms (ActiveRecord: 3.2ms | Allocations: 5310)


  
ActiveRecord::StatementInvalid (PG::SyntaxError: ERROR:  trailing junk after numeric literal at or near "81d"
LINE 1: SELECT "players".* FROM "players" WHERE (81dd2e65-bc07-488a-...
                                                 ^
):
  
app/controllers/boards_controller.rb:16:in `create'
Started POST "/boards" for ::1 at 2023-10-15 18:16:02 -0300
Processing by BoardsController#create as */*
  Parameters: {"board"=>{"board_name"=>"Nombre_del_Tablero", "player1_id"=>"81dd2e65-bc07-488a-ace0-f3d9676ab845"}}
  [1m[36mPlayer Load (0.1ms)[0m  [1m[34mSELECT "players".* FROM "players" WHERE "players"."token" = $1 LIMIT $2[0m  [["token", "5424bf74-4a3d-433e-b109-57f32ff86245"], ["LIMIT", 1]]
  ↳ app/helpers/session_helper.rb:4:in `check_token'
  [1m[36mPlayer Load (0.1ms)[0m  [1m[34mSELECT "players".* FROM "players" WHERE "players"."id" = $1 LIMIT $2[0m  [["id", "81dd2e65-bc07-488a-ace0-f3d9676ab845"], ["LIMIT", 1]]
  ↳ app/controllers/boards_controller.rb:16:in `create'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/boards_controller.rb:20:in `create'
  [1m[36mBoard Create (0.2ms)[0m  [1m[32mINSERT INTO "boards" ("player1_id", "player2_id", "board_name", "winner", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["player1_id", 81], ["player2_id", nil], ["board_name", "Nombre_del_Tablero"], ["winner", nil], ["created_at", "2023-10-15 21:16:02.448902"], ["updated_at", "2023-10-15 21:16:02.448902"]]
  ↳ app/controllers/boards_controller.rb:20:in `create'
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/boards_controller.rb:20:in `create'
Completed 200 OK in 9ms (Views: 0.2ms | ActiveRecord: 3.1ms | Allocations: 9406)


Started POST "/boards" for ::1 at 2023-10-15 18:16:45 -0300
Processing by BoardsController#create as */*
  Parameters: {"board"=>{"board_name"=>"Nombre_del_Tablero", "player1_id"=>"81dd2e65-bc07-488a-ace0-f3d9676ab845"}}
  [1m[36mPlayer Load (0.2ms)[0m  [1m[34mSELECT "players".* FROM "players" WHERE "players"."token" = $1 LIMIT $2[0m  [["token", "5424bf74-4a3d-433e-b109-57f32ff86245"], ["LIMIT", 1]]
  ↳ app/helpers/session_helper.rb:4:in `check_token'
  [1m[36mPlayer Load (0.2ms)[0m  [1m[34mSELECT "players".* FROM "players" WHERE "players"."id" = $1 LIMIT $2[0m  [["id", "81dd2e65-bc07-488a-ace0-f3d9676ab845"], ["LIMIT", 1]]
  ↳ app/controllers/boards_controller.rb:16:in `create'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/boards_controller.rb:20:in `create'
  [1m[36mPlayer Load (0.1ms)[0m  [1m[34mSELECT "players".* FROM "players" WHERE "players"."id" = $1 LIMIT $2[0m  [["id", nil], ["LIMIT", 1]]
  ↳ app/controllers/boards_controller.rb:20:in `create'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  ↳ app/controllers/boards_controller.rb:20:in `create'
Completed 422 Unprocessable Entity in 13ms (Views: 0.1ms | ActiveRecord: 4.2ms | Allocations: 9785)


  [1m[36mActiveRecord::SchemaMigration Pluck (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (5007.5ms)[0m  [1m[35mDROP DATABASE IF EXISTS "card_game_backend_development"[0m
Started POST "/players" for ::1 at 2023-10-15 18:18:08 -0300
  [1m[36mActiveRecord::SchemaMigration Pluck (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by PlayersController#create as */*
  Parameters: {"player"=>{"email"=>"lucasdavidmiranda8@hotmail.com", "password"=>"[FILTERED]", "name"=>"lucas", "lastname"=>"miranda", "nickname"=>"enkinaurio"}}
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/players_controller.rb:34:in `create'
  [1m[36mPlayer Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "players" WHERE "players"."nickname" = $1 LIMIT $2[0m  [["nickname", "enkinaurio"], ["LIMIT", 1]]
  ↳ app/controllers/players_controller.rb:34:in `create'
  [1m[36mPlayer Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "players" WHERE "players"."email" = $1 LIMIT $2[0m  [["email", "lucasdavidmiranda8@hotmail.com"], ["LIMIT", 1]]
  ↳ app/controllers/players_controller.rb:34:in `create'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  ↳ app/controllers/players_controller.rb:34:in `create'
Completed 422 Unprocessable Entity in 10ms (Views: 0.2ms | ActiveRecord: 3.0ms | Allocations: 11735)


  [1m[36mActiveRecord::SchemaMigration Pluck (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (13.2ms)[0m  [1m[35mDROP DATABASE IF EXISTS "card_game_backend_development"[0m
  [1m[35m (12.9ms)[0m  [1m[35mDROP DATABASE IF EXISTS "card_game_backend_test"[0m
  [1m[35m (21.5ms)[0m  [1m[35mCREATE DATABASE "card_game_backend_development" ENCODING = 'unicode'[0m
  [1m[35m (20.7ms)[0m  [1m[35mCREATE DATABASE "card_game_backend_test" ENCODING = 'unicode'[0m
  [1m[35m (2.7ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[35m (2.2ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT pg_try_advisory_lock(3379173675217033995)[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to CreateBoards (20220522162722)
  [1m[35m (0.1ms)[0m  [1m[34mSELECT pg_advisory_unlock(3379173675217033995)[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (46.3ms)[0m  [1m[35mDROP DATABASE IF EXISTS "card_game_backend_development"[0m
  [1m[35m (12.4ms)[0m  [1m[35mDROP DATABASE IF EXISTS "card_game_backend_test"[0m
  [1m[35m (21.0ms)[0m  [1m[35mCREATE DATABASE "card_game_backend_development" ENCODING = 'unicode'[0m
  [1m[35m (20.5ms)[0m  [1m[35mCREATE DATABASE "card_game_backend_test" ENCODING = 'unicode'[0m
  [1m[35m (2.8ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[35m (2.4ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT pg_try_advisory_lock(3379173675217033995)[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to CreateBoards (20220522162722)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (2.0ms)[0m  [1m[35mCREATE TABLE "boards" ("id" uuid DEFAULT gen_random_uuid() NOT NULL PRIMARY KEY, "player1_id" uuid NOT NULL, "player2_id" uuid, "board_name" character varying, "winner" integer, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "boards" ADD CONSTRAINT "fk_rails_5805c510bf"
FOREIGN KEY ("player1_id")
  REFERENCES "players" ("id")
[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT pg_advisory_unlock(3379173675217033995)[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (46.9ms)[0m  [1m[35mDROP DATABASE IF EXISTS "card_game_backend_development"[0m
  [1m[35m (12.7ms)[0m  [1m[35mDROP DATABASE IF EXISTS "card_game_backend_test"[0m
  [1m[35m (20.0ms)[0m  [1m[35mCREATE DATABASE "card_game_backend_development" ENCODING = 'unicode'[0m
  [1m[35m (20.8ms)[0m  [1m[35mCREATE DATABASE "card_game_backend_test" ENCODING = 'unicode'[0m
  [1m[35m (2.8ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[35m (2.2ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT pg_try_advisory_lock(3379173675217033995)[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to CreateBoards (20220522162722)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (2.3ms)[0m  [1m[35mCREATE TABLE "boards" ("id" uuid DEFAULT gen_random_uuid() NOT NULL PRIMARY KEY, "player1_id" uuid NOT NULL, "player2_id" uuid, "board_name" character varying, "winner" integer, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20220522162722"]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateActiveStorageTables (20231013182339)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (2.2ms)[0m  [1m[35mCREATE TABLE "active_storage_blobs" ("id" bigserial primary key, "key" character varying NOT NULL, "filename" character varying NOT NULL, "content_type" character varying, "metadata" text, "service_name" character varying NOT NULL, "byte_size" bigint NOT NULL, "checksum" character varying, "created_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_active_storage_blobs_on_key" ON "active_storage_blobs" ("key")[0m
  [1m[35m (2.2ms)[0m  [1m[35mCREATE TABLE "active_storage_attachments" ("id" bigserial primary key, "name" character varying NOT NULL, "record_type" character varying NOT NULL, "record_id" bigint NOT NULL, "blob_id" bigint NOT NULL, "created_at" timestamp(6) NOT NULL, CONSTRAINT "fk_rails_c3b3935057"
FOREIGN KEY ("blob_id")
  REFERENCES "active_storage_blobs" ("id")
)[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE INDEX "index_active_storage_attachments_on_blob_id" ON "active_storage_attachments" ("blob_id")[0m
  [1m[35m (1.4ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_active_storage_attachments_uniqueness" ON "active_storage_attachments" ("record_type", "record_id", "name", "blob_id")[0m
  [1m[35m (3.1ms)[0m  [1m[35mCREATE TABLE "active_storage_variant_records" ("id" bigserial primary key, "blob_id" bigint NOT NULL, "variation_digest" character varying NOT NULL, CONSTRAINT "fk_rails_993965df05"
FOREIGN KEY ("blob_id")
  REFERENCES "active_storage_blobs" ("id")
)[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_active_storage_variant_records_uniqueness" ON "active_storage_variant_records" ("blob_id", "variation_digest")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20231013182339"]]
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateImages (20231013183935)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE TABLE "images" ("id" uuid DEFAULT gen_random_uuid() NOT NULL PRIMARY KEY, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20231013183935"]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreatePlayers (20231013183954)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.9ms)[0m  [1m[35mCREATE TABLE "players" ("id" uuid DEFAULT gen_random_uuid() NOT NULL PRIMARY KEY, "name" character varying, "lastname" character varying, "password" character varying, "nickname" character varying, "email" character varying, "token" character varying, "image_id" uuid, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "players" ADD CONSTRAINT "fk_rails_884bb50f59"
FOREIGN KEY ("image_id")
  REFERENCES "images" ("id")
 ON DELETE SET NULL[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20231013183954"]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
Migrating to AddPlayerToImages (20231013184330)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mALTER TABLE "images" ADD "player_id" uuid NOT NULL[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "images" ADD CONSTRAINT "fk_rails_e73d825546"
FOREIGN KEY ("player_id")
  REFERENCES "players" ("id")
 ON DELETE CASCADE[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20231013184330"]]
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mCOMMIT[0m
Migrating to AddIndexPlayerToBoards (20231015212122)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "boards" ADD CONSTRAINT "fk_rails_5805c510bf"
FOREIGN KEY ("player1_id")
  REFERENCES "players" ("id")
[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "boards" ADD CONSTRAINT "fk_rails_2c25b5cc35"
FOREIGN KEY ("player2_id")
  REFERENCES "players" ("id")
[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20231015212122"]]
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.2ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "environment"], ["value", "development"], ["created_at", "2023-10-15 21:21:45.037421"], ["updated_at", "2023-10-15 21:21:45.037421"]]
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_advisory_unlock(3379173675217033995)[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Started POST "/players" for ::1 at 2023-10-15 18:21:57 -0300
  [1m[36mActiveRecord::SchemaMigration Pluck (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by PlayersController#create as */*
  Parameters: {"player"=>{"email"=>"lucasdavidmiranda8@hotmail.com", "password"=>"[FILTERED]", "name"=>"lucas", "lastname"=>"miranda", "nickname"=>"enkinaurio"}}
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/players_controller.rb:34:in `create'
  [1m[36mPlayer Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "players" WHERE "players"."nickname" = $1 LIMIT $2[0m  [["nickname", "enkinaurio"], ["LIMIT", 1]]
  ↳ app/controllers/players_controller.rb:34:in `create'
  [1m[36mPlayer Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "players" WHERE "players"."email" = $1 LIMIT $2[0m  [["email", "lucasdavidmiranda8@hotmail.com"], ["LIMIT", 1]]
  ↳ app/controllers/players_controller.rb:34:in `create'
  [1m[36mPlayer Create (0.4ms)[0m  [1m[32mINSERT INTO "players" ("name", "lastname", "password", "nickname", "email", "token", "image_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["name", "lucas"], ["lastname", "miranda"], ["password", "123456#"], ["nickname", "enkinaurio"], ["email", "lucasdavidmiranda8@hotmail.com"], ["token", "20eb3fd2-9eca-4d97-bd8f-c4f8f95402c5"], ["image_id", nil], ["created_at", "2023-10-15 21:21:57.355023"], ["updated_at", "2023-10-15 21:21:57.355023"]]
  ↳ app/controllers/players_controller.rb:34:in `create'
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/players_controller.rb:34:in `create'
Completed 200 OK in 40ms (Views: 0.3ms | ActiveRecord: 3.6ms | Allocations: 12946)


Started POST "/player/login" for ::1 at 2023-10-15 18:22:02 -0300
Processing by PlayersController#login as */*
  Parameters: {"player"=>{"email"=>"lucasdavidmiranda8@hotmail.com", "password"=>"[FILTERED]"}}
  [1m[36mPlayer Load (0.3ms)[0m  [1m[34mSELECT "players".* FROM "players" WHERE ((email = 'lucasdavidmiranda8@hotmail.com' OR nickname = NULL) AND password = '123456#') LIMIT $1[0m  [["LIMIT", 1]]
  ↳ app/controllers/players_controller.rb:18:in `login'
Completed 200 OK in 2ms (Views: 0.1ms | ActiveRecord: 0.3ms | Allocations: 919)


Started GET "/boards" for ::1 at 2023-10-15 18:22:15 -0300
Processing by BoardsController#index as */*
  Parameters: {"board"=>{}}
  [1m[36mBoard Load (0.2ms)[0m  [1m[34mSELECT "boards".* FROM "boards"[0m
  ↳ app/controllers/boards_controller.rb:7:in `index'
Completed 200 OK in 2ms (Views: 1.1ms | ActiveRecord: 0.9ms | Allocations: 901)


Started POST "/boards" for ::1 at 2023-10-15 18:22:22 -0300
Processing by BoardsController#create as */*
  Parameters: {"board"=>{"board_name"=>"Nombre_del_Tablero", "player1_id"=>"d8a82e18-67b7-466e-8c44-4e3c0130eef7"}}
  [1m[36mPlayer Load (0.2ms)[0m  [1m[34mSELECT "players".* FROM "players" WHERE "players"."token" = $1 LIMIT $2[0m  [["token", "20eb3fd2-9eca-4d97-bd8f-c4f8f95402c5"], ["LIMIT", 1]]
  ↳ app/helpers/session_helper.rb:4:in `check_token'
  [1m[36mPlayer Load (0.1ms)[0m  [1m[34mSELECT "players".* FROM "players" WHERE "players"."id" = $1 LIMIT $2[0m  [["id", "d8a82e18-67b7-466e-8c44-4e3c0130eef7"], ["LIMIT", 1]]
  ↳ app/controllers/boards_controller.rb:16:in `create'
  [1m[36mCACHE Player Load (0.0ms)[0m  [1m[34mSELECT "players".* FROM "players" WHERE "players"."id" = $1 LIMIT $2[0m  [["id", "d8a82e18-67b7-466e-8c44-4e3c0130eef7"], ["LIMIT", 1]]
  ↳ app/controllers/boards_controller.rb:20:in `create'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/boards_controller.rb:20:in `create'
  [1m[36mBoard Create (0.5ms)[0m  [1m[32mINSERT INTO "boards" ("player1_id", "player2_id", "board_name", "winner", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["player1_id", "d8a82e18-67b7-466e-8c44-4e3c0130eef7"], ["player2_id", nil], ["board_name", "Nombre_del_Tablero"], ["winner", nil], ["created_at", "2023-10-15 21:22:22.455208"], ["updated_at", "2023-10-15 21:22:22.455208"]]
  ↳ app/controllers/boards_controller.rb:20:in `create'
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/boards_controller.rb:20:in `create'
Completed 200 OK in 11ms (Views: 0.2ms | ActiveRecord: 2.5ms | Allocations: 8794)


Started PUT "/boards/ecb4896c-f747-492f-b7f7-48346eef2b41" for ::1 at 2023-10-15 18:22:50 -0300
Processing by BoardsController#update as */*
  Parameters: {"board"=>{"board_name"=>"Nuevo_Nombre_del_Tablero", "winner"=>1}, "id"=>"ecb4896c-f747-492f-b7f7-48346eef2b41"}
  [1m[36mBoard Load (0.2ms)[0m  [1m[34mSELECT "boards".* FROM "boards" WHERE "boards"."id" = $1 LIMIT $2[0m  [["id", "ecb4896c-f747-492f-b7f7-48346eef2b41"], ["LIMIT", 1]]
  ↳ app/controllers/boards_controller.rb:34:in `update'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/boards_controller.rb:35:in `update'
  [1m[36mPlayer Load (0.1ms)[0m  [1m[34mSELECT "players".* FROM "players" WHERE "players"."id" = $1 LIMIT $2[0m  [["id", "d8a82e18-67b7-466e-8c44-4e3c0130eef7"], ["LIMIT", 1]]
  ↳ app/controllers/boards_controller.rb:35:in `update'
  [1m[36mBoard Update (0.2ms)[0m  [1m[33mUPDATE "boards" SET "board_name" = $1, "winner" = $2, "updated_at" = $3 WHERE "boards"."id" = $4[0m  [["board_name", "Nuevo_Nombre_del_Tablero"], ["winner", 1], ["updated_at", "2023-10-15 21:22:50.544438"], ["id", "ecb4896c-f747-492f-b7f7-48346eef2b41"]]
  ↳ app/controllers/boards_controller.rb:35:in `update'
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/boards_controller.rb:35:in `update'
Completed 200 OK in 7ms (Views: 0.2ms | ActiveRecord: 1.4ms | Allocations: 3905)


Started PUT "/boards/ecb4896c-f747-492f-b7f7-48346eef2b41" for ::1 at 2023-10-15 18:22:58 -0300
Processing by BoardsController#update as */*
  Parameters: {"board"=>{"board_name"=>"Nuevo_Nombre_del_Tablero", "winner"=>2}, "id"=>"ecb4896c-f747-492f-b7f7-48346eef2b41"}
  [1m[36mBoard Load (0.2ms)[0m  [1m[34mSELECT "boards".* FROM "boards" WHERE "boards"."id" = $1 LIMIT $2[0m  [["id", "ecb4896c-f747-492f-b7f7-48346eef2b41"], ["LIMIT", 1]]
  ↳ app/controllers/boards_controller.rb:34:in `update'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/boards_controller.rb:35:in `update'
  [1m[36mPlayer Load (0.2ms)[0m  [1m[34mSELECT "players".* FROM "players" WHERE "players"."id" = $1 LIMIT $2[0m  [["id", "d8a82e18-67b7-466e-8c44-4e3c0130eef7"], ["LIMIT", 1]]
  ↳ app/controllers/boards_controller.rb:35:in `update'
  [1m[36mBoard Update (0.2ms)[0m  [1m[33mUPDATE "boards" SET "winner" = $1, "updated_at" = $2 WHERE "boards"."id" = $3[0m  [["winner", 2], ["updated_at", "2023-10-15 21:22:58.910852"], ["id", "ecb4896c-f747-492f-b7f7-48346eef2b41"]]
  ↳ app/controllers/boards_controller.rb:35:in `update'
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/boards_controller.rb:35:in `update'
Completed 200 OK in 6ms (Views: 0.3ms | ActiveRecord: 1.3ms | Allocations: 3575)


Started PUT "/boards/ecb4896c-f747-492f-b7f7-48346eef2b41" for ::1 at 2023-10-15 18:23:02 -0300
Processing by BoardsController#update as */*
  Parameters: {"board"=>{"board_name"=>"Nuevo_Nombre_del_Tablero", "winner"=>1}, "id"=>"ecb4896c-f747-492f-b7f7-48346eef2b41"}
  [1m[36mBoard Load (0.2ms)[0m  [1m[34mSELECT "boards".* FROM "boards" WHERE "boards"."id" = $1 LIMIT $2[0m  [["id", "ecb4896c-f747-492f-b7f7-48346eef2b41"], ["LIMIT", 1]]
  ↳ app/controllers/boards_controller.rb:34:in `update'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/boards_controller.rb:35:in `update'
  [1m[36mPlayer Load (0.1ms)[0m  [1m[34mSELECT "players".* FROM "players" WHERE "players"."id" = $1 LIMIT $2[0m  [["id", "d8a82e18-67b7-466e-8c44-4e3c0130eef7"], ["LIMIT", 1]]
  ↳ app/controllers/boards_controller.rb:35:in `update'
  [1m[36mBoard Update (0.2ms)[0m  [1m[33mUPDATE "boards" SET "winner" = $1, "updated_at" = $2 WHERE "boards"."id" = $3[0m  [["winner", 1], ["updated_at", "2023-10-15 21:23:02.690178"], ["id", "ecb4896c-f747-492f-b7f7-48346eef2b41"]]
  ↳ app/controllers/boards_controller.rb:35:in `update'
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/boards_controller.rb:35:in `update'
Completed 200 OK in 5ms (Views: 0.2ms | ActiveRecord: 1.2ms | Allocations: 3569)


Started GET "/boards" for ::1 at 2023-10-15 18:23:12 -0300
Processing by BoardsController#index as */*
  Parameters: {"board"=>{}}
  [1m[36mBoard Load (0.2ms)[0m  [1m[34mSELECT "boards".* FROM "boards"[0m
  ↳ app/controllers/boards_controller.rb:7:in `index'
Completed 200 OK in 1ms (Views: 1.2ms | ActiveRecord: 0.2ms | Allocations: 838)


Started GET "/boards/ecb4896c-f747-492f-b7f7-48346eef2b41" for ::1 at 2023-10-15 18:23:27 -0300
Processing by BoardsController#show as */*
  Parameters: {"id"=>"ecb4896c-f747-492f-b7f7-48346eef2b41", "board"=>{}}
  [1m[36mBoard Load (0.2ms)[0m  [1m[34mSELECT "boards".* FROM "boards" WHERE "boards"."id" = $1 LIMIT $2[0m  [["id", "ecb4896c-f747-492f-b7f7-48346eef2b41"], ["LIMIT", 1]]
  ↳ app/controllers/boards_controller.rb:11:in `show'
Completed 200 OK in 1ms (Views: 0.2ms | ActiveRecord: 0.2ms | Allocations: 688)


